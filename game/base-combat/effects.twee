:: Widgets Effects Man [widget]
<<widget "effectsman">>
<div @class="($debugLines ? 'debugLines-effectsman' : '')">
<!-- "FOR" loops work by counting backward from highest numbered combatant to lowest e.g. 5 to 0. -->
<!-- In case of train combat, count stops after 1, e.g. 5 to 5. -->
<!-- Lots of further opportunity to reduce code using <<for>><</for>> loops with NPC objects NG 2.8-->
<<set _ppbigreaction to ["Your body feels weak at the sight.","You shudder at the sight.","You moan involuntarily at its size.","You gasp at its massive girth.","Your thighs feel weak as you look on."]>>
<<set _ppsmallreaction to ["You stifle a laugh at the sight.","You smirk at the sight.","You stifle a chuckle at the sight.","You stifle a giggle at the sight.","You try not to laugh."]>>
<<set _pprng to random(0, 4)>>

/*ToDo: Pregnancy, remove to properly enable*/
<<if $pregnancyTesting is undefined>>
	<<set $condomUse to false>>
<</if>>

<<set $pain -= 1>>

<<if $enemyno gte 2>>
	<<set $pronoun to "n">>
<<else>>
	<<switch $NPCList[0].pronoun>>
	<<case "m">>
		<<set $pronoun to "m">>
	<<case "f">>
		<<set $pronoun to "f">>
	<<case "i">>
		<<set $pronoun to "i">>
	<<case "n">>
		<<set $pronoun to "n">>
	<<case "t">>
		<<set $pronoun to "t">>
	<</switch>>
<</if>>

<<for _i = 0; _i < $enemynomax; _i++>>
	<<set $NPCList[_i].intro to 1>>
<</for>>

<<if $trance gte 1 or $dissociation gte 2>>
	<<if $position is "stalk">>
		You wander in a daze, unaware of your surroundings.
	<<else>>
		You stare straight ahead, your body passive and compliant.
	<</if>>
<</if>>

<<if $underwater is 1>>
	<<set $underwatertime += 1>>
	<<if $underwatertime lte 5>>
		You are underwater, and cannot speak.
	<<elseif $underwatertime lte 10>>
		<span class="blue">You are underwater, and cannot breathe.</span>
		<<gstress>><<stress 1>>
	<<elseif $underwatertime lte 15>>
		<span class="purple">You are underwater, and cannot breathe.</span>
		<<gstress>><<stress 2>>
	<<elseif $underwatertime lte 20>>
		<span class="pink">You are underwater, and cannot breathe.</span>
		<<gtrauma>><<gstress>><<stress 4>><<trauma 2>>
	<<else>>
		<span class="red">You are suffocating beneath the water.</span>
		<<set $pain += 20>><<gtrauma>><<gstress>><<stress 6>><<trauma 4>>
		<br><br>
	<</if>>
<</if>>

<<if $position is "wall">>
	<<if $walltype is "pillory">>
		You are trapped in a pillory with your posterior stuck out and unprotected.
	<<elseif $walltype is "cleanpillory">>
		You are trapped in a pillory with your posterior stuck out and unprotected.
	<<elseif $walltype is "horse_pillory">>
		Your legs and neck are shackled by cold iron, preventing movement.
	<<else>>
		You are trapped in a $walltype with your posterior stuck out in the open.
	<</if>>
<</if>>

<<effectspain>>
<<effectsorgasm>>
<<effectsdissociation>>

<<effectsspray>>
<<effectshandsclothes>>
<<effectssteal>>
<<effectspenwhack>>
<<effectsshacklewhack>>
<<effectshandsfreeface>>

<<if $bodyaction is "doggy">>
	<<set $bodyaction to 0>>
	You roll onto your knees.
	<<set $position to "doggy">>
<<elseif $bodyaction is "missionary">>
	<<set $bodyaction to 0>>
	You roll onto your back.
	<<set $position to "missionary">>
<</if>>

/***
*      ███   ███████ ██   ██ ███████
*     ██ ██  ██   ██ ███ ███ ██
*    ██   ██ █████   ██ █ ██ ███████
*    ███████ ██  ██  ██   ██      ██
*    ██   ██ ██   ██ ██   ██ ███████
*
*/
<<if $newtarget isnot undefined>>
	<<setnewtarget>>
<</if>>

<<if $leftaction is "leftgrab">>
	<<set $leftaction to 0>><<set $leftactiondefault to "leftgrab">><<handskilluse>><<combatpromiscuity3>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $handskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<submission 1 $lefttarget>><<handstat>>
		<<if $NPCList[$lefttarget].penis is 0>>
			<<set $leftactiondefault to "leftwork">><<set $NPCList[$lefttarget].penis to "leftarm">><<set $leftarm to "penis">>
			<span class="lblue">You <<handtext>> <<if $NPCList[$lefttarget].chastity.penis.includes("chastity")>>fondle<<else>>grab<</if>> <<hisselect $lefttarget>> $NPCList[$lefttarget].penisdesc<<if $NPCList[$lefttarget].chastity.penis.includes("chastity")>> through <<hisselect $lefttarget>> $NPCList[$lefttarget].chastity.penis<</if>> with your left hand.</span>
		<<else>>
			<span class="blue">You try to grab <<hisselect $lefttarget>> $NPCList[$lefttarget].penisdesc with your left hand, but the phallus is already occupied.</span>
		<</if>>
	<<else>>
		You try to grab <<someones $lefttarget>> penis with your left hand, but <<he>> moves it away.
	<</if>>
<</if>>

<<if $rightaction is "rightgrab">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightgrab">><<handskilluse>><<combatpromiscuity3>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $handskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<submission 1 $righttarget>><<handstat>>
		<<if $NPCList[$righttarget].penis is 0>>
			<<set $NPCList[$righttarget].penis to "rightarm">><<set $rightarm to "penis">>
			<span class="lblue">You <<handtext>> <<if $NPCList[$righttarget].chastity.penis.includes("chastity")>>fondle<<else>>grab<</if>> <<hisselect $righttarget>> $NPCList[$righttarget].penisdesc<<if $NPCList[$righttarget].chastity.penis.includes("chastity")>> through <<hisselect $righttarget>> $NPCList[$righttarget].chastity.penis<</if>> with your right hand.</span>
		<<else>>
			<span class="blue">You try to grab <<hisselect $righttarget>> $NPCList[$righttarget].penisdesc with your right hand, but the phallus is already occupied.</span>
		<</if>>
	<<else>>
		You try to grab <<someones $righttarget>> penis with your right hand, but <<he>> moves it away.
	<</if>>
<</if>>

<<if $leftaction is "leftstroke" and $rightaction is "rightstroke">>
	<<set $leftaction to 0>><<set $rightaction to 0>><<set $leftactiondefault to "leftstroke">><<set $rightactiondefault to "rightstroke">>
	<<submission 2 $lefttarget $righttarget>><<actionspenisstroke $lefttarget $righttarget>><<handskilluse>><<handskilluse>>
<</if>>

<<if $leftaction is "leftstroke">>
	<<set $leftaction to 0>><<set $leftactiondefault to "leftstroke">><<submission 1 $lefttarget>><<actionspenisstroke $lefttarget>><<handskilluse>>
<</if>>

<<if $rightaction is "rightstroke">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightstroke">><<submission 1 $righttarget>><<actionspenisstroke $righttarget>><<handskilluse>>
<</if>>

<<if $leftaction is "leftwork">>
	<<set $leftaction to 0>><<set $leftactiondefault to "leftwork">><<handskilluse>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $handskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<submission 3 $lefttarget>><<actionsshaftrub $lefttarget>>
	<<else>>
		<<set $leftactiondefault to "leftgrab">>
		<<set $leftarm to 0>><<set $NPCList[$lefttarget].penis to 0>>
		<span class="blue">You try to rub <<hisselect $lefttarget>> shaft, but <<he>> moves away.</span>
	<</if>>
<</if>>

<<if $rightaction is "rightwork">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightwork">><<handskilluse>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $handskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<submission 3 $righttarget>><<actionsshaftrub $righttarget>>
	<<else>>
		<<set $rightactiondefault to "rightgrab">>
		<<set $rightarm to 0>><<set $NPCList[$righttarget].penis to 0>>
		<span class="blue">You try to rub <<hisselect $righttarget>> shaft, but <<he>> moves away.</span>
	<</if>>
<</if>>

<<if $leftaction is "leftstoppenis">>
	<<set $leftaction to 0>><<set $leftactiondefault to "leftstoppenis">><<submission 3 $lefttarget>><<set $leftarm to 0>>
	<<set $NPCList[$lefttarget].penis to 0>>You let go of <<hisselect $lefttarget>> penis.
<</if>>

<<if $rightaction is "rightstoppenis">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightstoppenis">><<submission 3 $righttarget>><<set $rightarm to 0>>
	<<set $NPCList[$righttarget].penis to 0>>You let go of <<hisselect $righttarget>> penis.
<</if>>

<<if $leftaction is "leftstruggle" and $rightaction is "rightstruggle" and !$abomination>>
	<<set $leftaction to 0>><<set $rightaction to 0>><<set $leftactiondefault to "leftstruggle">><<set $rightactiondefault to "rightstruggle">>
	You struggle with all your might.
	<<defiance 2 $lefttarget $righttarget>><<set $speechstruggle to 1>>
	<<if $physique gte random(1, 32000)>>
		<span class="teal">You manage to twist your arms free.</span>
		<<defiance 5 $lefttarget $righttarget>>
		<<set $leftarm to 0>><<set $rightarm to 0>>
		<<if $NPCList[$lefttarget].lefthand is "arms">>
			<<set $NPCList[$lefttarget].lefthand to 0>>
		<</if>>
		<<if $NPCList[$lefttarget].righthand is "arms">>
			<<set $NPCList[$lefttarget].righthand to 0>>
		<</if>>
		/* Unecessary */
		<<if $NPCList[$righttarget].lefthand is "arms">>
			<<set $NPCList[$righttarget].lefthand to 0>>
		<</if>>
		<<if $NPCList[$righttarget].righthand is "arms">>
			<<set $NPCList[$righttarget].righthand to 0>>
		<</if>>
	<<else>>
		<span class="purple">Your arms remain grasped.</span>
	<</if>>
<</if>>

<<if $leftaction is "leftstruggle" and !$abomination>>
	<<set $leftaction to 0>><<set $leftactiondefault to "leftstruggle">>
	You struggle.
	<<set $speechstruggle to 1>><<defiance 1 $lefttarget>>
	<<if $physique gte random(1, 64000)>>
		<span class="teal">You manage to twist your arms free.</span>
		<<defiance 5 $lefttarget>>
		<<set $leftarm to 0>><<set $rightarm to 0>>
		<<if $NPCList[$lefttarget].lefthand is "arms">>
			<<set $NPCList[$lefttarget].lefthand to 0>>
		<</if>>
		<<if $NPCList[$lefttarget].righthand is "arms">>
			<<set $NPCList[$lefttarget].righthand to 0>>
		<</if>>
	<<else>>
		<span class="purple">Your arms remain grasped.</span>
	<</if>>
<</if>>

<<if $rightaction is "rightstruggle" and !$abomination>>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightstruggle">>
	You struggle.
	<<defiance 1 $righttarget>><<set $speechstruggle to 1>>
	<<if $physique gte random(1, 64000)>>
		<span class="teal">You manage to twist your arms free.</span>
		<<defiance 5 $righttarget>>
		<<set $leftarm to 0>><<set $rightarm to 0>>
		<<if $NPCList[$righttarget].lefthand is "arms">>
			<<set $NPCList[$righttarget].lefthand to 0>>
		<</if>>
		<<if $NPCList[$righttarget].righthand is "arms">>
			<<set $NPCList[$righttarget].righthand to 0>>
		<</if>>
	<<else>>
		<span class="purple">Your arms remain grasped.</span>
	<</if>>
<</if>>

<<if $leftaction is "rest" and $rightaction is "rest">>
	<<set $leftaction to 0>><<set $rightaction to 0>><<set $leftactiondefault to "rest">><<set $rightactiondefault to "rest">>
	You rest your arms.
<</if>>

<<if $leftaction is "rest">>
	<<set $leftaction to 0>><<set $leftactiondefault to "rest">>
	You rest your left arm.
<</if>>

<<if $rightaction is "rest">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rest">>
	You rest your right arm.
<</if>>

<<if $leftaction is "behind" and $rightaction is "behind">>
	<<set $leftaction to 0>><<set $rightaction to 0>><<set $leftactiondefault to "behind">><<set $rightactiondefault to "behind">>
	You hold your arms behind your back in a compliant gesture.
	<<meek 2>><<set $leftarm to "behind">><<set $rightarm to "behind">>
<</if>>

<<if $leftaction is "behind">>
	<<set $leftaction to 0>><<set $leftactiondefault to "behind">>
	You hold your left arm behind your back in a compliant gesture.
	<<meek 1>><<set $leftarm to "behind">>
<</if>>

<<if $rightaction is "behind">>
	<<set $rightaction to 0>><<set $rightactiondefault to "behind">>
	You hold your left arm behind your back in a compliant gesture.
	<<meek 1>><<set $rightarm to "behind">>
<</if>>

<<if $leftaction is "stopbehind" and $rightaction is "stopbehind">>
	<<set $leftaction to 0>><<set $rightaction to 0>><<set $leftactiondefault to "rest">><<set $rightactiondefault to "rest">>
	You move your arms in front of you.
	<<set $leftarm to 0>><<set $rightarm to 0>>
<</if>>

<<if $leftaction is "stopbehind">>
	<<set $leftaction to 0>><<set $leftactiondefault to "rest">>
	You move your left arm in front of you.
	<<set $leftarm to 0>>
<</if>>

<<if $rightaction is "stopbehind">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rest">>
	You move your right arm in front of you.
	<<set $rightarm to 0>>
<</if>>

<<if $leftaction is "leftchest" and $rightaction is "rightchest">>
	<<set $leftaction to 0>><<set $rightaction to 0>><<set $leftactiondefault to "leftchest">>
	<<set $rightactiondefault to "rightchest">><<actionsstroke $lefttarget $righttarget>><<submission 2 $lefttarget $righttarget>>
<</if>>

<<if $leftaction is "leftchest">>
	<<set $leftaction to 0>><<set $leftactiondefault to "leftchest">><<actionsstroke $lefttarget>><<submission 1 $lefttarget>>
<</if>>

<<if $rightaction is "rightchest">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightchest">><<actionsstroke $righttarget>><<submission 1 $righttarget>>
<</if>>

<<if $leftaction is "lefthit" and $rightaction is "righthit">>
	<<set $leftaction to 0>><<set $rightaction to 0>><<set $leftactiondefault to "lefthit">>
	<<set $rightactiondefault to "righthit">><<actionshit both>><<defiance 5 $lefttarget $righttarget>><<set $speechhit to 1>><<set $attackstat += 2>>
<</if>>

<<if $leftaction is "lefthit">>
	<<set $leftaction to 0>><<set $leftactiondefault to "lefthit">>
	<<if $parasite.left_ear.name is "slime" and random(1, 3) is 3 or $parasite.right_ear.name is "slime" and random(1, 3) is 3>>
		<<if $corruption_slime gte ($willpower / 10)>>
			You try to hit the <<if $enemytype is "beast">><<beasttype>><<else>><<personselect $lefttarget>><<person>><</if>>
			with your left hand, <span class="red">but the slime immobilises your limb.</span>
			<<gwillpower>><<willpower 1>>
		<<else>>
			The slime tries to immobilise your left arm, <span class="green">but you wrestle control away from it.</span>
			<<actionshit $lefttarget>><<defiance 2 $lefttarget>><<set $speechhit to 1>><<set $attackstat += 1>>
		<</if>>
	<<else>>
		<<actionshit $lefttarget>><<defiance 2 $lefttarget>><<set $speechhit to 1>><<set $attackstat += 1>>
	<</if>>
<</if>>

<<if $rightaction is "righthit">>
	<<set $rightaction to 0>><<set $rightactiondefault to "righthit">>
	<<if $parasite.left_ear.name is "slime" and random(1, 3) is 3 or $parasite.right_ear.name is "slime" and random(1, 3) is 3>>
		<<if $corruption_slime gte ($willpower / 10)>>
			You try to hit the <<if $enemytype is "beast">><<beasttype>><<else>><<personselect $righttarget>><<person>><</if>>
			with your right hand, <span class="red">but the slime immobilises your limb.</span>
			<<gwillpower>><<willpower 1>>
		<<else>>
			The slime tries to immobilise your right arm, <span class="green">but you wrestle control away from it.</span>
			<<actionshit $righttarget>><<defiance 2 $righttarget>><<set $speechhit to 1>><<set $attackstat += 1>>
		<</if>>
	<<else>>
		<<actionshit $righttarget>><<set $speechhit to 1>><<defiance 2 $righttarget>><<set $attackstat += 1>>
	<</if>>
<</if>>

<<cover_end>>/*Resets $face and other variables that are covered */

<<if $leftaction is "leftcoverface" and $rightaction is "rightcoverface">>
	<<set $leftaction to 0>><<set $rightaction to 0>><<set $leftactiondefault to "leftcoverface">><<set $rightactiondefault to "rightcoverface">>
	You cover your face with your hands.
	<<set $speechcoverface to 1>><<set $face to "covered">><<neutral 2>>
<<elseif $leftaction is "leftcoverface">>
	<<set $leftaction to 0>><<set $leftactiondefault to "leftcoverface">>
	You cover your face with your hand.
	<<set $speechcoverface to 1>><<set $face to "covered">><<neutral 1>>
<<elseif $rightaction is "rightcoverface">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightcoverface">>
	You cover your face with your hand.
	<<set $speechcoverface to 1>><<set $face to "covered">><<neutral 1>>
<</if>>

<<if $leftaction is "leftcovervaginameek" and $rightaction is "rightcovervaginameek">>
	<<set $leftaction to 0>><<set $rightaction to 0>><<set $leftactiondefault to "leftcovervaginameek">><<set $rightactiondefault to "rightcovervaginameek">>
	<<if ($worn.lower.name is "towel skirt" or $worn.lower.name is "large towel bottom") and $worn.lower.state is "waist">>
		You cover your pussy with your hands, tugging the towel further over it.
	<<else>>
		You cover your pussy with your hands.
	<</if>>
	<<meek 2>><<set $leftarm to "vagina">><<set $rightarm to "vagina">><<set $vaginause to "cover">><<set $speechcovervagina to 1>>
<</if>>

<<if $leftaction is "leftcovervaginameek">>
	<<set $leftaction to 0>><<set $leftactiondefault to "leftcovervaginameek">>
	<<if ($worn.lower.name is "towel skirt" or $worn.lower.name is "large towel bottom") and $worn.lower.state is "waist">>
		You cover your pussy with your left hand, tugging the towel further over it.
	<<else>>
		You cover your pussy with your left hand.
	<</if>>
	<<meek 1>><<set $leftarm to "vagina">><<set $vaginause to "cover">><<set $speechcovervagina to 1>>
<</if>>

<<if $rightaction is "rightcovervaginameek">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightcovervaginameek">>
	<<if ($worn.lower.name is "towel skirt" or $worn.lower.name is "large towel bottom") and $worn.lower.state is "waist">>
		You cover your pussy with your right hand, tugging the towel further over it.
	<<else>>
		You cover your pussy with your right hand.
	<</if>>
	<<meek 1>><<set $rightarm to "vagina">><<set $vaginause to "cover">><<set $speechcovervagina to 1>>
<</if>>

<<if $leftaction is "leftcovervagina" and $rightaction is "rightcovervagina">>
	<<set $leftaction to 0>><<set $rightaction to 0>><<set $leftactiondefault to "leftcovervagina">><<set $rightactiondefault to "rightcovervagina">>
	<<if ($worn.lower.name is "towel skirt" or $worn.lower.name is "large towel bottom") and $worn.lower.state is "waist">>
		You cover your pussy with your hands, tugging the towel further over it.
	<<else>>
		You cover your pussy with your hands.
	<</if>>
	<<brat 2>><<set $leftarm to "vagina">><<set $rightarm to "vagina">><<set $vaginause to "cover">><<set $speechcovervagina to 1>>
<</if>>

<<if $leftaction is "leftcovervagina">>
	<<set $leftaction to 0>><<set $leftactiondefault to "leftcovervagina">>
	<<if ($worn.lower.name is "towel skirt" or $worn.lower.name is "large towel bottom") and $worn.lower.state is "waist">>
		You cover your pussy with your left hand, tugging the towel further over it.
	<<else>>
		You cover your pussy with your left hand.
	<</if>>
	<<brat 1>><<set $leftarm to "vagina">><<set $vaginause to "cover">><<set $speechcovervagina to 1>>
<</if>>

<<if $rightaction is "rightcovervagina">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightcovervagina">>
	<<if ($worn.lower.name is "towel skirt" or $worn.lower.name is "large towel bottom") and $worn.lower.state is "waist">>
		You cover your pussy with your right hand, tugging the towel further over it.
	<<else>>
		You cover your pussy with your right hand.
	<</if>>
	<<brat 1>><<set $rightarm to "vagina">><<set $vaginause to "cover">><<set $speechcovervagina to 1>>
<</if>>

<<if $leftaction is "leftcoverpenismeek" and $rightaction is "rightcoverpenismeek">>
	<<set $leftaction to 0>><<set $rightaction to 0>><<set $leftactiondefault to "leftcoverpenismeek">><<set $rightactiondefault to "rightcoverpenismeek">>
	<<if ($worn.lower.name is "towel skirt" or $worn.lower.name is "large towel bottom") and $worn.lower.state is "waist">>
		You cover your penis with your hands, tugging the towel further over it.
	<<else>>
		You cover your penis with your hands.
	<</if>>
	<<meek 2>><<set $leftarm to "coverpenis">><<set $rightarm to "coverpenis">><<set $penisuse to "cover">><<set $speechcoverpenis to 1>>
<</if>>

<<if $leftaction is "leftcoverpenismeek">>
	<<set $leftaction to 0>><<set $leftactiondefault to "leftcoverpenismeek">>
	<<if ($worn.lower.name is "towel skirt" or $worn.lower.name is "large towel bottom") and $worn.lower.state is "waist">>
		You cover your penis with your left hand, tugging the towel further over it.
	<<else>>
		You cover your penis with your left hand.
	<</if>>
	<<meek 1>><<set $leftarm to "coverpenis">><<set $penisuse to "cover">><<set $speechcoverpenis to 1>>
<</if>>

<<if $rightaction is "rightcoverpenismeek">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightcoverpenismeek">>
	<<if ($worn.lower.name is "towel skirt" or $worn.lower.name is "large towel bottom") and $worn.lower.state is "waist">>
		You cover your penis with your right hand, tugging the towel further over it.
	<<else>>
		You cover your penis with your right hand.
	<</if>>
	<<meek 1>><<set $rightarm to "coverpenis">><<set $penisuse to "cover">><<set $speechcoverpenis to 1>>
<</if>>


<<if $leftaction is "leftcoverpenis" and $rightaction is "rightcoverpenis">>
	<<set $leftaction to 0>><<set $rightaction to 0>><<set $leftactiondefault to "leftcoverpenis">><<set $rightactiondefault to "rightcoverpenis">>
	<<if ($worn.lower.name is "towel skirt" or $worn.lower.name is "large towel bottom") and $worn.lower.state is "waist">>
		You cover your penis with your hands, tugging the towel further over it.
	<<else>>
		You cover your penis with your hands.
	<</if>>
	<<brat 2>><<set $leftarm to "coverpenis">><<set $rightarm to "coverpenis">><<set $penisuse to "cover">><<set $speechcoverpenis to 1>>
<</if>>

<<if $leftaction is "leftcoverpenis">>
	<<set $leftaction to 0>><<set $leftactiondefault to "leftcoverpenis">>
	<<if ($worn.lower.name is "towel skirt" or $worn.lower.name is "large towel bottom") and $worn.lower.state is "waist">>
		You cover your penis with your left hand, tugging the towel further over it.
	<<else>>
		You cover your penis with your left hand.
	<</if>>
	<<brat 1>><<set $leftarm to "coverpenis">><<set $penisuse to "cover">><<set $speechcoverpenis to 1>>
<</if>>

<<if $rightaction is "rightcoverpenis">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightcoverpenis">>
	<<if ($worn.lower.name is "towel skirt" or $worn.lower.name is "large towel bottom") and $worn.lower.state is "waist">>
		You cover your penis with your right hand, tugging the towel further over it.
	<<else>>
		You cover your penis with your right hand.
	<</if>>
	<<brat 1>><<set $rightarm to "coverpenis">><<set $penisuse to "cover">><<set $speechcoverpenis to 1>>
<</if>>

<<if $leftaction is "leftcoveranusmeek" and $rightaction is "rightcoveranusmeek">>
	<<set $leftaction to 0>><<set $rightaction to 0>><<set $leftactiondefault to "leftcoveranusmeek">><<set $rightactiondefault to "rightcoveranusmeek">>
	<<if ($worn.lower.name is "towel skirt" or $worn.lower.name is "large towel bottom") and $worn.lower.state is "waist">>
		You cover your ass with your hands, tugging the towel further over it.
	<<else>>
		You cover your ass with your hands.
	<</if>>
	<<meek 2>><<set $leftarm to "anus">><<set $rightarm to "anus">><<set $anususe to "cover">>
<</if>>

<<if $leftaction is "leftcoveranusmeek">>
	<<set $leftaction to 0>><<set $leftactiondefault to "leftcoveranusmeek">>
	<<if ($worn.lower.name is "towel skirt" or $worn.lower.name is "large towel bottom") and $worn.lower.state is "waist">>
		You cover your ass with your left hand, tugging the towel further over it.
	<<else>>
		You cover your ass with your left hand.
	<</if>>
	<<meek 1>><<set $leftarm to "anus">><<set $anususe to "cover">>
<</if>>

<<if $rightaction is "rightcoveranusmeek">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightcoveranusmeek">>
	<<if ($worn.lower.name is "towel skirt" or $worn.lower.name is "large towel bottom") and $worn.lower.state is "waist">>
		You cover your ass with your right hand, tugging the towel further over it.
	<<else>>
		You cover your ass with your right hand.
	<</if>>
	<<meek 1>><<set $rightarm to "anus">><<set $anususe to "cover">>
<</if>>

<<if $leftaction is "leftcoveranus" and $rightaction is "rightcoveranus">>
	<<set $leftaction to 0>><<set $rightaction to 0>><<set $leftactiondefault to "leftcoveranus">><<set $rightactiondefault to "rightcoveranus">>
	<<if ($worn.lower.name is "towel skirt" or $worn.lower.name is "large towel bottom") and $worn.lower.state is "waist">>
		You cover your ass with your hands, tugging the towel further over it.
	<<else>>
		You cover your ass with your hands.
	<</if>>
	<<brat 2>><<set $leftarm to "anus">><<set $rightarm to "anus">><<set $anususe to "cover">>
<</if>>

<<if $leftaction is "leftcoveranus">>
	<<set $leftaction to 0>><<set $leftactiondefault to "leftcoveranus">>
	<<if ($worn.lower.name is "towel skirt" or $worn.lower.name is "large towel bottom") and $worn.lower.state is "waist">>
		You cover your ass with your left hand, tugging the towel further over it.
	<<else>>
		You cover your ass with your left hand.
	<</if>>
	<<brat 1>><<set $leftarm to "anus">><<set $anususe to "cover">>
<</if>>

<<if $rightaction is "rightcoveranus">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightcoveranus">>
	<<if ($worn.lower.name is "towel skirt" or $worn.lower.name is "large towel bottom") and $worn.lower.state is "waist">>
		You cover your ass with your right hand, tugging the towel further over it.
	<<else>>
		You cover your ass with your right hand.
	<</if>>
	<<brat 1>><<set $rightarm to "anus">><<set $anususe to "cover">>
<</if>>

<<if $leftaction is "leftstopvagina" and $rightaction is "rightstopvagina">>
	<<set $leftaction to 0>><<set $rightaction to 0>><<set $leftactiondefault to "leftstopvagina">><<set $rightactiondefault to "rightstopvagina">>
	You stop shielding your pussy with your hands.
	<<set $leftarm to 0>><<set $rightarm to 0>><<set $vaginause to 0>><<meek 2>>
<</if>>

<<if $leftaction is "leftstopcoverpenis" and $rightaction is "rightstopcoverpenis">>
	<<set $leftaction to 0>><<set $rightaction to 0>><<set $leftactiondefault to "leftstopcoverpenis">><<set $rightactiondefault to "rightstopcoverpenis">>
	You stop shielding your penis with your hands.
	<<set $leftarm to 0>><<set $rightarm to 0>><<set $penisuse to 0>><<meek 2>>
<</if>>

<<if $leftaction is "leftstopanus" and $rightaction is "rightstopanus">>
	<<set $leftaction to 0>><<set $rightaction to 0>><<set $leftactiondefault to "leftstopanus">><<set $rightactiondefault to "rightstopanus">>
	You stop shielding your <<bottom>> with your hands.
	<<set $leftarm to 0>><<set $rightarm to 0>><<set $anususe to 0>><<meek 2>>
<</if>>

<<if $leftaction is "leftstopvagina">>
	<<set $leftaction to 0>><<set $leftactiondefault to "leftstopvagina">>
	You stop covering your pussy with your left hand.
	<<set $leftarm to 0>>
	<<if $rightarm isnot "vagina">>
		<<set $vaginause to 0>>
	<</if>><<meek 1>>
<</if>>

<<if $leftaction is "leftstopcoverpenis">>
	<<set $leftaction to 0>><<set $leftactiondefault to "leftstopcoverpenis">>
	You stop covering your penis with your left hand.
	<<set $leftarm to 0>>
	<<if $rightarm isnot "coverpenis">>
		<<set $penisuse to 0>>
	<</if>>
	<<meek 1>>
<</if>>

<<if $leftaction is "leftstopanus">>
	<<set $leftaction to 0>><<set $leftactiondefault to "leftstopanus">>
	You stop covering your <<bottom>> with your left hand.
	<<set $leftarm to 0>>
	<<if $rightarm isnot "anus">>
		<<set $anususe to 0>>
	<</if>>
	<<meek 1>>
<</if>>

<<if $rightaction is "rightstopvagina">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightstopvagina">>
	You stop covering your vagina with your right hand.
	<<set $rightarm to 0>>
	<<if $leftarm isnot "vagina">>
		<<set $vaginause to 0>>
	<</if>>
	<<meek 1>>
<</if>>

<<if $rightaction is "rightstopcoverpenis">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightstopcoverpenis">>
	You stop covering your penis with your right hand.
	<<set $rightarm to 0>>
	<<if $leftarm isnot "coverpenis">>
		<<set $penisuse to 0>>
	<</if>>
	<<meek 1>>
<</if>>

<<if $rightaction is "rightstopanus">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightstopanus">>
	You stop covering you anus with your right hand.
	<<set $rightarm to 0>>
	<<if $leftarm isnot "anus">>
		<<set $anususe to 0>>
	<</if>>
	<<meek 1>>
<</if>>

<<if $leftaction is "leftclit">>
<<set $leftaction to 0>><<set $leftactiondefault to "leftclit">><<handskilluse>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $handskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<actionsclitstroke $lefttarget>><<submission 10 $lefttarget>><<set $speechhandjobvagina to 1>>
	<<else>>
		<<set $leftarm to 0>><<set $leftactiondefault to "leftplay">>
		<<set $NPCList[$lefttarget].vagina to 0>><<personselect $lefttarget>>
		<span class="blue">You stroke <<his>> clit, but <<he>>
		<<if $enemytype isnot "beast">>slaps your hand away<<else>>shifts way from you and growls<</if>>.</span>
	<</if>>
<</if>>

<<if $rightaction is "rightclit">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightclit">><<handskilluse>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $handskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<actionsclitstroke $righttarget>><<submission 10 $righttarget>><<set $speechhandjobvagina to 1>>
	<<else>><<set $rightarm to 0>><<set $rightactiondefault to "rightplay">>
		<<set $NPCList[$righttarget].vagina to 0>><<personselect $righttarget>>
		<span class="blue">You stroke <<his>> clit, but <<he>>
		<<if $enemytype isnot "beast">>slaps your hand away<<else>>shifts way from you and growls<</if>>.</span>
	<</if>>
<</if>>

<<if $leftaction is "leftothervaginastop">>
	<<set $leftaction to 0>><<set $leftactiondefault to "leftothervaginastop">>
	<<set $NPCList[$lefttarget].vagina to 0>><<set $leftarm to 0>>
	<span class="blue">You move your left hand away from <<hisselect $lefttarget>> pussy.</span>
 <</if>>

<<if $rightaction is "rightothervaginastop">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightothervaginastop">>
	<<set $NPCList[$righttarget].vagina to 0>><<set $rightarm to 0>>
	<span class="blue">You move your right hand away from <<hisselect $righttarget>> pussy.</span>
<</if>>

<<if $leftaction is "leftplay">>
	<<set $leftaction to 0>><<handskilluse>><<set $leftactiondefault to "leftplay">><<combatpromiscuity3>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $handskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<submission 1 $lefttarget>><<handstat>>
		<<if $NPCList[$lefttarget].vagina is 0>>
			<<set $leftactiondefault to "leftclit">><<set $NPCList[$lefttarget].vagina to "leftarm">><<set $leftarm to "othervagina">><<personselect $lefttarget>>
			<span class="lblue">You <<handtext>> grab <<his>> pussy<<if $NPCList[$lefttarget].chastity.vagina.includes("chastity")>> through <<his>> $NPCList[$lefttarget].chastity.vagina<</if>> with your left hand.</span>
		<<else>>
			<span class="blue">You try to grab <<hisselect $lefttarget>> pussy with your left hand, but they're already occupied.</span>
		<</if>>
	<<else>>
		You try to grab <<hisselect $lefttarget>> pussy with your left hand, but <<he>> moves it away.
	<</if>>
<</if>>

<<if $rightaction is "rightplay">>
	<<set $rightaction to 0>><<handskilluse>><<set $rightactiondefault to "rightplay">><<combatpromiscuity3>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $handskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<submission 1 $righttarget>><<handstat>>
		<<if $NPCList[$righttarget].vagina is 0>>
			<<set $rightactiondefault to "rightclit">><<set $NPCList[$righttarget].vagina to "rightarm">><<set $rightarm to "othervagina">><<personselect $righttarget>>
			<span class="lblue">You <<handtext>> grab <<his>> pussy<<if $NPCList[$righttarget].chastity.vagina.includes("chastity")>> through <<his>> $NPCList[$righttarget].chastity.vagina<</if>> with your right hand.</span>
		<<else>>
			<span class="blue">You try to grab <<hisselect $righttarget>> pussy with your left hand, but they're already occupied.</span>
		<</if>>
	<<else>>
		You try to grab <<hisselect $righttarget>> pussy with your right hand, but <<he>> moves it away.
	<</if>>
<</if>>

<<if $leftaction is "leftunderpull" and $rightaction is "rightunderpull">>
	<<set $leftaction to 0>><<set $rightaction to 0>><<brat 1>><<set $leftactiondefault to "leftunderpull">><<set $rightactiondefault to "rightunderpull">>
	<<if $worn.under_lower.name is "naked">>
		You clutch the tattered remains of your clothing.
		<<brat 2>>
	<<else>>
		<<for _j = 0; _j lt $enemynomax; _j++>>
			<<if $NPCList[_j].lefthand is "underclothes" or $NPCList[_j].righthand is "underclothes" or (_j is 0 and $NPCList[_j].mouth is "underclothes")>>
				You struggle for control of your $worn.under_lower.name.
				<<brat 2>><<set $understruggle to 1>>
				<<break>>
			<</if>>
		<</for>>
		<<if $understruggle is 0>>
			<<if $worn.under_lower.state is "ankles">>
				<<set $worn.under_lower.state to "knees">>
				You pull your $worn.under_lower.name up to your knees.
			<<elseif $worn.under_lower.state is "knees">>
				<<set $worn.under_lower.state to "thighs">>
				You pull your $worn.under_lower.name up to your thighs.
			<<elseif $worn.under_lower.state is "thighs">>
				<<if $vaginause is 0 and $anususe is 0>>
					You pull your $worn.under_lower.name up to your waist.
					<<set $worn.under_lower.state to "waist">><<set $worn.under_lower.exposed to setup.clothes.under_lower[$worn.under_lower.index].exposed_base>>
					<<set $worn.under_lower.vagina_exposed to setup.clothes.under_lower[$worn.under_lower.index].vagina_exposed_base>>
					<<set $worn.under_lower.anus_exposed to setup.clothes.under_lower[$worn.under_lower.index].anus_exposed_base>>
				<<else>>
					You try to pull up your $worn.under_lower.name, but something is in the way.
				<</if>>
			<</if>>
		<</if>>
	<</if>>
<</if>>

<<if $leftaction is "leftunderpull">>
	<<set $leftaction to 0>><<brat 1>><<set $leftactiondefault to "leftunderpull">>
	<<if $worn.under_lower.name is "naked">>
		You clutch the tattered remains of your clothing.
	<<else>>
		<<if $NPCList[0].lefthand isnot "underclothes" and $NPCList[0].righthand isnot "underclothes" and $NPCList[1].lefthand isnot "underclothes" and $NPCList[1].righthand isnot "underclothes" and $NPCList[2].lefthand isnot "underclothes" and $NPCList[2].righthand isnot "underclothes" and $NPCList[3].lefthand isnot "underclothes" and $NPCList[3].righthand isnot "underclothes" and $NPCList[4].lefthand isnot "underclothes" and $NPCList[4].righthand isnot "underclothes" and $NPCList[5].lefthand isnot "underclothes" and $NPCList[5].righthand isnot "underclothes" and $NPCList[0].mouth isnot "underclothes">>
			<<if $worn.under_lower.state is "ankles">>
				<<set $worn.under_lower.state to "knees">>
				You pull your $worn.under_lower.name up to your knees.
			<<elseif $worn.under_lower.state is "knees">>
				<<set $worn.under_lower.state to "thighs">>
				You pull your $worn.under_lower.name up to your thighs.
			<<elseif $worn.under_lower.state is "thighs">>
				<<if $vaginause is 0 and $anususe is 0>>
					You pull your $worn.under_lower.name up to your waist.
					<<set $worn.under_lower.state to "waist">><<set $worn.under_lower.exposed to setup.clothes.under_lower[$worn.under_lower.index].exposed_base>>
					<<set $worn.under_lower.vagina_exposed to setup.clothes.under_lower[$worn.under_lower.index].vagina_exposed_base>>
					<<set $worn.under_lower.anus_exposed to setup.clothes.under_lower[$worn.under_lower.index].anus_exposed_base>>
				<<else>>
					You try to pull up your $worn.under_lower.name, but something is in the way.
				<</if>>
			<</if>>
		<<else>>
			You try to pull up your $worn.under_lower.name, but one hand won't be enough.
			<<brat 1>>
		<</if>>
	<</if>>
<</if>>

<<if $rightaction is "rightunderpull">>
	<<set $rightaction to 0>><<brat 1>><<set $rightactiondefault to "rightunderpull">>
	<<if $worn.under_lower.name is "naked">>
		You clutch the tattered remains of your clothing.
	<<else>>
		<<if $NPCList[0].lefthand isnot "underclothes" and $NPCList[0].righthand isnot "underclothes" and $NPCList[1].lefthand isnot "underclothes" and $NPCList[1].righthand isnot "underclothes" and $NPCList[2].lefthand isnot "underclothes" and $NPCList[2].righthand isnot "underclothes" and $NPCList[3].lefthand isnot "underclothes" and $NPCList[3].righthand isnot "underclothes" and $NPCList[4].lefthand isnot "underclothes" and $NPCList[4].righthand isnot "underclothes" and $NPCList[5].lefthand isnot "underclothes" and $NPCList[5].righthand isnot "underclothes" and $NPCList[0].mouth isnot "underclothes">>
			<<if $worn.under_lower.state is "ankles">>
				<<set $worn.under_lower.state to "knees">>
				You pull your $worn.under_lower.name up to your knees.
			<<elseif $worn.under_lower.state is "knees">>
				<<set $worn.under_lower.state to "thighs">>
				You pull your $worn.under_lower.name up to your thighs.
			<<elseif $worn.under_lower.state is "thighs">>
				<<if $vaginause is 0 and $anususe is 0>>
					You pull your $worn.under_lower.name up to your waist.
					<<set $worn.under_lower.state to "waist">><<set $worn.under_lower.exposed to setup.clothes.under_lower[$worn.under_lower.index].exposed_base>>
					<<set $worn.under_lower.vagina_exposed to setup.clothes.under_lower[$worn.under_lower.index].vagina_exposed_base>>
					<<set $worn.under_lower.anus_exposed to setup.clothes.under_lower[$worn.under_lower.index].anus_exposed_base>>
				<<else>>
					You try to pull up your $worn.under_lower.name, but one hand won't be enough.
				<</if>>
			<</if>>
		<<else>>
			You try to pull up your $worn.under_lower.name, but you aren't strong enough.
			<<brat 1>>
		<</if>>
	<</if>>
<</if>>

<<if $leftaction is "leftskirtpull" and $rightaction is "rightskirtpull">>
	<<set $leftaction to 0>><<set $rightaction to 0>><<set $leftactiondefault to "leftskirtpull">><<set $rightactiondefault to "rightskirtpull">><<brat 1>>
	<<if $worn.lower.name is "naked">>
		You clutch the tattered remains of your clothing.
	<<else>>
		You pull your $worn.lower.name down with both hands, covering your crotch.
		<<set $worn.lower.skirt_down to 1>><<set $worn.lower.vagina_exposed to setup.clothes.lower[$worn.lower.index].vagina_exposed_base>>
		<<set $worn.lower.anus_exposed to setup.clothes.lower[$worn.lower.index].anus_exposed_base>><<set $worn.lower.exposed to setup.clothes.lower[$worn.lower.index].exposed_base>>
	<</if>>
<</if>>

<<if $leftaction is "leftskirtpull">>
	<<set $leftaction to 0>><<set $leftactiondefault to "leftskirtpull">><<brat 1>>
	<<if $worn.lower.name is "naked">>
		You clutch the tattered remains of your clothing.
	<<else>>
		You pull your $worn.lower.name back down, covering your crotch.
		<<set $worn.lower.skirt_down to 1>><<set $worn.lower.vagina_exposed to setup.clothes.lower[$worn.lower.index].vagina_exposed_base>>
		<<set $worn.lower.anus_exposed to setup.clothes.lower[$worn.lower.index].anus_exposed_base>><<set $worn.lower.exposed to setup.clothes.lower[$worn.lower.index].exposed_base>>
	<</if>>
<</if>>

<<if $rightaction is "rightskirtpull">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightskirtpull">><<brat 1>>
	<<if $worn.lower.name is "naked">>
		You clutch the tattered remains of your clothing.
	<<else>>
		You pull your $worn.lower.name back down, covering your crotch.
		<<set $worn.lower.skirt_down to 1>><<set $worn.lower.vagina_exposed to setup.clothes.lower[$worn.lower.index].vagina_exposed_base>>
		<<set $worn.lower.anus_exposed to setup.clothes.lower[$worn.lower.index].anus_exposed_base>><<set $worn.lower.exposed to setup.clothes.lower[$worn.lower.index].exposed_base>>
	<</if>>
<</if>>

<<if $leftaction is "leftlowerpull" or $rightaction is "rightlowerpull">>
	<<set $_strength to 0>>
	<<if $leftaction is "leftlowerpull">>
		<<set $leftaction to 0>><<set $leftactiondefault to "leftlowerpull">><<set $_strength++>>
	<</if>>
	<<if $rightaction is "rightlowerpull">>
		<<set $rightaction to 0>><<set $rightactiondefault to "rightlowerpull">><<set $_strength++>>
	<</if>>
	<<brat 1>>
	<<if $worn.lower.name is "naked">>
		You clutch the tattered remains of your clothing.
		<<brat 2>>
	<<else>>
		<<if $understruggle is 0>>
			<<for _j = 0; _j lt $enemynomax; _j++>>
				<<if $NPCList[_j].lefthand is "lowerclothes" or $NPCList[_j].righthand is "lowerclothes" or (_j is 0 and $NPCList[_j].mouth is "lowerclothes")>>
					<<if $_strength is 2>>
						You struggle for control of your $worn.lower.name.
						<<brat 2>><<set $lowerstruggle to 1>><<set _lowerpull to "failed">>
						<<break>>
					<<else>>
						You try to pull up your $worn.lower.name, but you aren't strong enough.
						<<brat 1>><<set _lowerpull to "failed">>
						<<break>>
					<</if>>
				<</if>>
			<</for>>
			<<if _leftlowerpull isnot "failed">>
				<<if $vaginause isnot 0 and $vaginause isnot "none">>
					Your $worn.lower.name hang loosely, but you can't adjust <<lowerit>> while your <<pussy>> is threatened.
				<<elseif $penisuse isnot 0 and $penisuse isnot "none">>
					Your $worn.lower.name hang loosely, but you can't adjust <<lowerit>> while your <<penis>> is threatened.
				<<elseif $anususe isnot 0>>
					Your $worn.lower.name hang loosely, but you can't adjust <<lowerit>> while your <<bottom>> is threatened.
				<<else>>
					You fix your
					<<if $worn.over_lower.exposed gt 0>>
						$worn.lower.name, concealing your
						<<if $worn.under_lower.exposed gte 1>>
							<<genitals>>.
						<<else>>
							$worn.under_lower.name.
						<</if>>
					<<else>>
						$worn.lower.name.
					<</if>>
					<<brat 5>><<set $worn.lower.state to setup.clothes.lower[$worn.lower.index].state_base>>
					<<if setup.clothes.lower[$worn.lower.index].skirt is 1>><<set $worn.lower.skirt_down to 1>><</if>>
					<<set $worn.lower.vagina_exposed to setup.clothes.lower[$worn.lower.index].vagina_exposed_base>>
					<<set $worn.lower.anus_exposed to setup.clothes.lower[$worn.lower.index].anus_exposed_base>><<set $worn.lower.exposed to setup.clothes.lower[$worn.lower.index].exposed_base>>
				<</if>>
			<</if>>
		<</if>>
	<</if>>
<</if>>

<<if $leftaction is "leftoverlowerpull" or $rightaction is "rightoverlowerpull">>
	<<set $_strength to 0>>
	<<if $leftaction is "leftoverlowerpull">>
		<<set $leftaction to 0>><<set $leftactiondefault to "leftoverlowerpull">><<set $_strength++>>
	<</if>>
	<<if $rightaction is "rightoverlowerpull">>
		<<set $rightaction to 0>><<set $rightactiondefault to "rightoverlowerpull">><<set $_strength++>>
	<</if>>
	<<brat 1>>
	<<if $worn.over_lower.name is "naked">>
		You clutch the tattered remains of your clothing.
		<<brat 2>>
	<<else>>
		<<if $understruggle is 0>>
			<<for _j = 0; _j lt $enemynomax; _j++>>
				<<if $NPCList[_j].lefthand is "overlowerclothes" or $NPCList[_j].righthand is "overlowerclothes" or (_j is 0 and $NPCList[_j].mouth is "overlowerclothes")>>
					<<if $_strength is 2>>
						You struggle for control of your $worn.over_lower.name.
						<<brat 2>><<set $overlowerstruggle to 1>><<set _overlowerpull to "failed">>
						<<break>>
					<<else>>
						You try to pull up your $worn.over_lower.name, but you aren't strong enough.
						<<brat 1>><<set _overlowerpull to "failed">>
						<<break>>
					<</if>>
				<</if>>
			<</for>>
			<<if _overlowerpull isnot "failed">>
				<<if $vaginause isnot 0 and $vaginause isnot "none">>
					Your $worn.over_lower.name hang loosely, but you can't adjust <<overlowerit>> while your <<pussy>> is threatened.
				<<elseif $penisuse isnot 0 and $penisuse isnot "none">>
					Your $worn.over_lower.name hang loosely, but you can't adjust <<overlowerit>> while your <<penis>> is threatened.
				<<elseif $anususe isnot 0>>
					Your $worn.over_lower.name hang loosely, but you can't adjust <<overlowerit>> while your <<bottom>> is threatened.
				<<else>>
					You fix your
					<<if $worn.lower.exposed gt 0>>
						$worn.over_lower.name, concealing your
						<<if $worn.under_lower.exposed gte 1>>
							<<genitals>>.
						<<else>>
							$worn.under_lower.name.
						<</if>>
					<<else>>
						$worn.over_lower.name.
					<</if>>
					<<brat 5>><<set $worn.over_lower.state to setup.clothes.over_lower[$worn.over_lower.index].state_base>>
					<<if setup.clothes.over_lower[$worn.over_lower.index].skirt is 1>><<set $worn.over_lower.skirt_down to 1>><</if>>
					<<set $worn.over_lower.vagina_exposed to setup.clothes.over_lower[$worn.over_lower.index].vagina_exposed_base>>
					<<set $worn.over_lower.anus_exposed to setup.clothes.over_lower[$worn.over_lower.index].anus_exposed_base>><<set $worn.over_lower.exposed to setup.clothes.over_lower[$worn.over_lower.index].exposed_base>>
				<</if>>
			<</if>>
		<</if>>
	<</if>>
<</if>>

<<if $leftaction is "leftupperpull" or $rightaction is "rightupperpull">>
	<<set $_strength to 0>>
	<<if $leftaction is "leftupperpull">>
		<<set $leftaction to 0>><<set $leftactiondefault to "leftupperpull">><<set $_strength++>>
	<</if>>
	<<if $rightaction is "rightupperpull">>
		<<set $rightaction to 0>><<set $rightactiondefault to "rightupperpull">><<set $_strength++>>
	<</if>>
	<<brat 1>>
	<<if $worn.upper.name is "naked">>
		You clutch the tattered remains of your clothing.
	<<else>>
		<<for _j = 0; _j lt $enemynomax; _j++>>
			<<if $NPCList[_j].lefthand is "upperclothes" or $NPCList[_j].righthand is "upperclothes" or (_j is 0 and $NPCList[_j].mouth is "upperclothes")>>
				<<if $_strength is 2>>
					You struggle for control of your $worn.upper.name.
					<<brat 2>><<set $upperstruggle to 1>><<set _upperpull to "failed">>
					<<break>>
				<<else>>
					You struggle for your $worn.upper.name, but you aren't strong enough.
					<<brat 1>><<set _upperpull to "failed">>
					<<break>>
				<</if>>
			<</if>>
		<</for>>
		<<if _upperpull isnot "failed">>
			<<if $vaginause isnot 0 and $vaginause isnot "none">>
				Your $worn.lower.name hang loosely, but you can't adjust <<lowerit>> while your <<pussy>> is threatened.
			<<elseif $penisuse isnot 0 and $penisuse isnot "none">>
				Your $worn.lower.name hang loosely, but you can't adjust <<lowerit>> while your <<penis>> is threatened.
			<<elseif $anususe isnot 0>>
				Your $worn.lower.name hang loosely, but you can't adjust <<lowerit>> while your <<bottom>> is threatened.
			<<elseif $worn.lower.set is $worn.upper.set>>
				You fix your
				<<if $worn.over_upper.exposed gt 0 or $worn.over_lower.exposed gt 0>>
					$worn.upper.name, concealing your<<if $worn.over_upper.exposed gt 0>><<breasts>> <<if $worn.over_lower.exposed gt 0>>and<</if>><</if>>
					<<if $worn.over_lower.exposed is 0>>
					<<elseif $worn.under_lower.exposed gte 1>>
						<<genitals>>.
					<<else>>
						$worn.under_lower.name.
					<</if>>
				<<else>>
					$worn.upper.name.
				<</if>>
				<<brat 5>><<set $worn.upper.state to setup.clothes.upper[$worn.upper.index].state_base>><<set $worn.upper.state_top to setup.clothes.upper[$worn.upper.index].state_top_base>>
				<<set $worn.upper.exposed to setup.clothes.upper[$worn.upper.index].exposed_base>><<set $worn.lower.state to setup.clothes.lower[$worn.lower.index].state_base>>
				<<if setup.clothes.lower[$worn.lower.index].skirt is 1>><<set $worn.lower.skirt_down to 1>><</if>><<set $worn.lower.vagina_exposed to setup.clothes.lower[$worn.lower.index].vagina_exposed_base>>
				<<set $worn.lower.anus_exposed to setup.clothes.lower[$worn.lower.index].anus_exposed_base>><<set $worn.lower.exposed to setup.clothes.lower[$worn.lower.index].exposed_base>>
			<<else>>
				You fix your $worn.upper.name, concealing your <<breasts>>.
				<<brat 5>><<set $worn.upper.state to setup.clothes.upper[$worn.upper.index].state_base>>
				<<set $worn.upper.state_top to setup.clothes.upper[$worn.upper.index].state_top_base>><<set $worn.upper.exposed to setup.clothes.upper[$worn.upper.index].exposed_base>>
			<</if>>
		<</if>>
	<</if>>
<</if>>

<<if $leftaction is "leftoverupperpull" or $rightaction is "rightoverupperpull">>
	<<set $_strength to 0>>
	<<if $leftaction is "leftoverupperpull">>
		<<set $leftaction to 0>><<set $leftactiondefault to "leftoverupperpull">><<set $_strength++>>
	<</if>>
	<<if $rightaction is "rightoverupperpull">>
		<<set $rightaction to 0>><<set $rightactiondefault to "rightoverupperpull">><<set $_strength++>>
	<</if>>
	<<brat 1>>
	<<if $worn.over_upper.name is "naked">>
		You clutch the tattered remains of your clothing.
	<<else>>
		<<for _j = 0; _j lt $enemynomax; _j++>>
			<<if $NPCList[_j].lefthand is "overupperclothes" or $NPCList[_j].righthand is "overupperclothes" or (_j is 0 and $NPCList[_j].mouth is "overupperclothes")>>
				<<if $_strength is 2>>
					You struggle for control of your $worn.over_upper.name.
					<<brat 2>><<set $overupperstruggle to 1>><<set _overupperpull to "failed">>
					<<break>>
				<<else>>
					You struggle for your $worn.over_upper.name, but you aren't strong enough.
					<<brat 1>><<set _overupperpull to "failed">>
					<<break>>
				<</if>>
			<</if>>
		<</for>>
		<<if _overupperpull isnot "failed">>
			<<if $vaginause isnot 0 and $vaginause isnot "none">>
				Your $worn.over_lower.name hang loosely, but you can't adjust <<overlowerit>> while your <<pussy>> is threatened.
			<<elseif $penisuse isnot 0 and $penisuse isnot "none">>
				Your $worn.over_lower.name hang loosely, but you can't adjust <<overlowerit>> while your <<penis>> is threatened.
			<<elseif $anususe isnot 0>>
				Your $worn.over_lower.name hang loosely, but you can't adjust <<overlowerit>> while your <<bottom>> is threatened.
			<<elseif $worn.over_lower.set is $worn.over_upper.set>>
				You fix your
				<<if $worn.upper.exposed gt 0 or $worn.lower.exposed gt 0>>
					$worn.over_upper.name, concealing your <<if $worn.upper.exposed gt 0>><<breasts>> <<if $worn.lower.exposed gt 0>>and<</if>><</if>>
					<<if $worn.lower.exposed is 0>>
					<<elseif $worn.under_lower.exposed gte 1>>
						<<genitals>>.
					<<else>>
						$worn.under_lower.name.
					<</if>>
				<<else>>
					$worn.over_upper.name.
				<</if>>
				<<brat 5>><<set $worn.over_upper.state to setup.clothes.over_upper[$worn.over_upper.index].state_base>><<set $worn.over_upper.state_top to setup.clothes.over_upper[$worn.over_upper.index].state_top_base>>
				<<set $worn.over_upper.exposed to setup.clothes.over_upper[$worn.over_upper.index].exposed_base>><<set $worn.over_lower.state to setup.clothes.over_lower[$worn.over_lower.index].state_base>>
				<<if setup.clothes.over_lower[$worn.over_lower.index].skirt is 1>><<set $worn.over_lower.skirt_down to 1>><</if>><<set $worn.over_lower.vagina_exposed to setup.clothes.over_lower[$worn.over_lower.index].vagina_exposed_base>>
				<<set $worn.over_lower.anus_exposed to setup.clothes.over_lower[$worn.over_lower.index].anus_exposed_base>><<set $worn.over_lower.exposed to setup.clothes.over_lower[$worn.over_lower.index].exposed_base>>
			<<else>>
				You fix your $worn.over_upper.name<<if $worn.upper.exposed gt 0>>, concealing your <<breasts>><</if>>.
				<<brat 5>><<set $worn.over_upper.state to setup.clothes.over_upper[$worn.over_upper.index].state_base>>
				<<set $worn.over_upper.state_top to setup.clothes.over_upper[$worn.over_upper.index].state_top_base>><<set $worn.over_upper.exposed to setup.clothes.over_upper[$worn.over_upper.index].exposed_base>>
			<</if>>
		<</if>>
	<</if>>
<</if>>

<<unset $keepchoke>>
<<if $leftaction is "keepchoke" or $rightaction is "keepchoke">>
	<<if $neckuse is "hand">>
		<<set _npcId = $NPCList.findIndex(x => x.lefthand == "throat" or x.righthand == "throat")>>
		<<personselect _npcId>>

		<<if $leftactioncarry is "keepchoke" or $rightactioncarry is "keepchoke">>
			You keep pressing <<his>> hand against your neck.
		<<else>>
			You reach out to <<his>> hand holding your neck and push it harder against your soft skin. <span class="sub"><<His>> grip tightens around your throat.</span>
		<</if>>
	<</if>>
	<<if $leftaction is "keepchoke">>
		<<set $leftaction to 0>><<set $leftactiondefault to "keepchoke">><<submission 1 $lefttarget>>
	<</if>>
	<<if $rightaction is "keepchoke">>
		<<set $rightaction to 0>><<set $rightactiondefault to "keepchoke">><<submission 1 $righttarget>>
	<</if>>
	<<set $keepchoke = 1>>
<</if>>

<<if $leftaction is "stopchoke" or $rightaction is "stopchoke">>
	<<if $leftaction is "stopchoke">>
		<<set $leftaction to 0>><<set $leftactiondefault to "stopchoke">>
		<<brat 1 $lefttarget>>
	<</if>>
	<<if $rightaction is "stopchoke">>
		<<set $rightaction to 0>><<set $rightactiondefault to "stopchoke">>
		<<brat 1 $righttarget>>
	<</if>>

	<<set _npcId = $NPCList.findIndex(x => x.lefthand == "throat" or x.righthand == "throat")>>
	<<personselect _npcId>>

	<<if $neckuse is "hand">>
		You reach out to <<his>> hand on your neck and gently pull it away. <<He>> doesn't resist.
		<<unset $neckuse>>
		<<if $NPCList[_npcId].lefthand == "throat">>
			<<set $NPCList[_npcId].lefthand = 0>>
		<</if>>
		<<if $NPCList[_npcId].righthand == "throat">>
			<<set $NPCList[_npcId].righthand = 0>>
		<</if>>
	<</if>>
<</if>>


<<if $leftaction is "stopchokenoncon" or $rightaction is "stopchokenoncon">>
	<<set _handsCount = 0>>
	<<if $leftaction is "stopchokenoncon">>
		<<set $leftaction to 0>><<set $leftactiondefault to "stopchokenoncon">>
		<<defiance 2 $lefttarget>>
		<<set _handsCount++>>
	<</if>>
	<<if $rightaction is "stopchokenoncon">>
		<<set $rightaction to 0>><<set $rightactiondefault to "stopchokenoncon">>
		<<defiance 2 $righttarget>>
		<<set _handsCount++>>
	<</if>>

	<<set _npcId = $NPCList.findIndex(x => x.lefthand == "throat" or x.righthand == "throat")>>
	<<personselect _npcId>>

	<<if $neckuse is "hand">>
		You dig your nails into <<his>> hand around your throat and pull it.
		<<defiance 2 _npcId>><<set $speechstruggle to 1>>
		<<if $physique gte random(1, 60000/_handsCount)>>
			<span class="teal">You manage to rip <<his>> hand off your throat.</span>
			<<defiance 5 _npcId>>
			<<unset $neckuse>>
			<<gaspair>>

			<<if $leftactiondefault == "stopchokenoncon">>
				<<set $leftactiondefault to "rest">>
			<</if>>
			<<if $rightactiondefault == "stopchokenoncon">>
				<<set $rightactiondefault to "rest">>
			<</if>>

			<<if $NPCList[_npcId].lefthand == "throat">>
				<<set $NPCList[_npcId].lefthand = 0>>
			<</if>>
			<<if $NPCList[_npcId].righthand == "throat">>
				<<set $NPCList[_npcId].righthand = 0>>
			<</if>>
		<<elseif $physique gte random(1, 40000/_handsCount)>>
			<<His>> hand doesn't move, however <span class="blue">you manage to gasp for a bit of air when <<his>> grip weakens momentarily</span>.
			<<oxygen 200>>
		<<else>>
			<span class="purple"><<His>> hand remains on your throat.</span>
		<</if>>
	<</if>>
<</if>>

<<if $rightaction is "rightUndressOther" and $leftaction is "leftUndressOther" and $lefttarget is $righttarget>>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightUndressOther">><<set $leftaction to 0>><<set $leftactiondefault to "leftUndressOther">><<handskilluse>><<combatpromiscuity2>><<brat 2 $lefttarget>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 5) - $handskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<if $NPCList[$lefttarget].penis is "clothed">>
			<<if $npcSub and $NPCList[$lefttarget].fullDescription is "Sydney">>
				<span class="lblue">You <<handtext>> undress $NPCList[$lefttarget].pronouns.him with both hands.</span> <<sydneyExpose>>
			<<else>>
				<span class="lblue">You <<handtext>> undress $NPCList[$lefttarget].pronouns.him with both hands, revealing <<his>> $NPCList[$lefttarget].penisdesc, <<if $NPCList[$lefttarget].chastity.penis.includes("chastity")>>inside of a $NPCList[$lefttarget].chastity.penis<<else>>fully erect<</if>>.</span>
			<</if>>
			<<switch $NPCList[$lefttarget].penissize>>
			<<case 4>>
				<span class="red"> _ppbigreaction[_pprng]</span>
			<<case 1>>
				<span class="green"> _ppsmallreaction[_pprng]</span>
			<<default>>
			<</switch>>
			<<set $NPCList[$lefttarget].penis to 0>>
		<<elseif $NPCList[$lefttarget].vagina is "clothed">>
			<<if $npcSub and $NPCList[$lefttarget].fullDescription is "Sydney">>
				<span class="lblue">You <<handtext>> undress $NPCList[$lefttarget].pronouns.him with both hands.</span> <<sydneyExpose>>
			<<else>>
				<span class="lblue">You <<handtext>> undress $NPCList[$lefttarget].pronouns.him with both hands, revealing <<his>> pussy<<if $NPCList[$lefttarget].chastity.vagina.includes("chastity")>> behind a $NPCList[$lefttarget].chastity.vagina<</if>>.</span>
			<</if>>
			<<set $NPCList[$lefttarget].vagina to 0>>
		<</if>>
	<<else>>
		You try to undress $NPCList[$lefttarget].pronouns.him with both hands, but <<personselect $lefttarget>><<he>> holds $NPCList[$lefttarget].pronouns.his clothing up.
	<</if>>
<</if>>

<<if $rightaction is "rightUndressOther">>
	<<set $rightaction to 0>><<set $rightactiondefault to "rightUndressOther">><<handskilluse>><<combatpromiscuity2>><<brat 1 $lefttarget>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $handskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<if $NPCList[$lefttarget].penis is "clothed">>
			<<if $npcSub and $NPCList[$lefttarget].fullDescription is "Sydney">>
				<span class="lblue">You <<handtext>> undress $NPCList[$lefttarget].pronouns.him.</span> <<sydneyExpose>>
			<<else>>
				<span class="lblue">You <<handtext>> undress $NPCList[$lefttarget].pronouns.him, revealing <<his>> $NPCList[$lefttarget].penisdesc, <<if $NPCList[$lefttarget].chastity.penis.includes("chastity")>>inside of a $NPCList[$lefttarget].chastity.penis<<else>>fully erect<</if>>.</span>
			<</if>>
			<<switch $NPCList[$lefttarget].penissize>>
			<<case 4>>
				<span class="red"> _ppbigreaction[_pprng]</span>
			<<case 1>>
				<span class="green"> _ppsmallreaction[_pprng]</span>
			<<default>>
			<</switch>>
			<<set $NPCList[$lefttarget].penis to 0>>
		<<elseif $NPCList[$lefttarget].vagina is "clothed">>
			<<if $npcSub and $NPCList[$lefttarget].fullDescription is "Sydney">>
				<span class="lblue">You <<handtext>> undress $NPCList[$lefttarget].pronouns.him.</span> <<sydneyExpose>>
			<<else>>
				<span class="lblue">You <<handtext>> undress $NPCList[$lefttarget].pronouns.him, revealing <<his>> pussy<<if $NPCList[$lefttarget].chastity.vagina.includes("chastity")>> behind a $NPCList[$lefttarget].chastity.vagina<</if>>.</span>
			<</if>>
			<<set $NPCList[$lefttarget].vagina to 0>>
		<</if>>
	<<else>>
		You try to undress $NPCList[$lefttarget].pronouns.him, but <<personselect $lefttarget>><<he>> holds $NPCList[$lefttarget].pronouns.his clothing up.
	<</if>>
<</if>>

<<if $leftaction is "leftUndressOther">>
	<<set $leftaction to 0>><<set $leftactiondefault to "leftUndressOther">><<handskilluse>><<combatpromiscuity2>><<brat 1 $righttarget>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $handskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<if $NPCList[$righttarget].penis is "clothed">>
			<<if $npcSub and $NPCList[$righttarget].fullDescription is "Sydney">>
				<span class="lblue">You <<handtext>> undress $NPCList[$righttarget].pronouns.him.</span> <<sydneyExpose>>
			<<else>>
				<span class="lblue">You <<handtext>> undress $NPCList[$righttarget].pronouns.him, revealing <<his>> $NPCList[$righttarget].penisdesc, <<if $NPCList[$righttarget].chastity.penis.includes("chastity")>>inside of a $NPCList[$righttarget].chastity.penis<<else>>fully erect<</if>>.</span>
			<</if>>
			<<switch $NPCList[$righttarget].penissize>>
			<<case 4>>
				<span class="red"> _ppbigreaction[_pprng]</span>
			<<case 1>>
				<span class="green"> _ppsmallreaction[_pprng]</span>
			<<default>>
			<</switch>>
			<<set $NPCList[$righttarget].penis to 0>>
		<<elseif $NPCList[$righttarget].vagina is "clothed">>
			<<if $npcSub and $NPCList[$righttarget].fullDescription is "Sydney">>
				<span class="lblue">You <<handtext>> undress $NPCList[$righttarget].pronouns.him.</span> <<sydneyExpose>>
			<<else>>
				<span class="lblue">You <<handtext>> undress $NPCList[$righttarget].pronouns.him, revealing <<his>> pussy<<if $NPCList[$righttarget].chastity.vagina.includes("chastity")>> behind a $NPCList[$righttarget].chastity.vagina<</if>>.</span>
			<</if>>
			<<set $NPCList[$righttarget].vagina to 0>>
		<</if>>
	<<else>>
		You try to undress $NPCList[$righttarget].pronouns.him, but <<personselect $righttarget>><<he>> holds $NPCList[$righttarget].pronouns.his clothing up.
	<</if>>
<</if>>

<<if $leftaction is "peniscondom" or $rightaction is "peniscondom">>
	<<set _handsCount to 0>>
	<<if $leftaction is "peniscondom">>
		<<set $leftaction to 0>><<set $leftactiondefault to "rest">>
		<<set _handsCount++>>
	<</if>>
	<<if $rightaction is "peniscondom">>
		<<set $rightaction to 0>><<set $rightactiondefault to "rest">>
		<<set _handsCount++>>
	<</if>>
	<<if false>>
		/*Npc tries to prevent you from putting the condom on*/
	<<else>>
		<<if !$player.condom and $parasite.penis.name is undefined>>
			You are not stopped from putting the condom over your penis.
			<<equipCondom>>
		<</if>>
	<</if>>
<</if>>

/*Stalked actions */
<<if !$stalk_end>>
	<<if $leftaction is "clench" and $rightaction is "clench">>
		<<set $leftactiondefault to "clench">><<set $leftaction to 0>><<set $rightactiondefault to "clench">><<set $rightaction to 0>><<brat 6>>
		You clench your fists.
	<</if>>

	<<if $leftaction is "clench">>
		<<set $leftactiondefault to "clench">><<set $leftaction to 0>><<brat 3>>
		You clench your left fist.
	<</if>>

	<<if $rightaction is "clench">>
		<<set $rightactiondefault to "clench">><<set $rightaction to 0>><<brat 3>>
		You clench your right fist.
	<</if>>

	<<if $leftaction is "fold" and $rightaction is "fold">>
		<<set $leftaction to 0>><<set $rightaction to 0>><<set $leftactiondefault to "fold">><<set $rightactiondefault to "fold">>
		<<if $breastsize gte 3>>
			You fold your arms beneath your <<breasts>>.
		<<else>>
			You fold your arms in front of you.
		<</if>>
		<<meek 6>>
	<</if>>

	<<if $leftaction is "fold">>
		<<set $leftaction to 0>><<set $leftactiondefault to "fold">>
		<<if $breastsize gte 3>>
			You fold your left arm beneath your <<breasts>>.
		<<else>>
			You fold your left arm in front of you.
		<</if>>
		<<meek 3>>
	<</if>>

	<<if $rightaction is "fold">>
		<<set $rightaction to 0>><<set $rightactiondefault to "fold">>
		<<if $breastsize gte 3>>
			You fold your right arm beneath your <<breasts>>.
		<<else>>
			You fold your right arm in front of you.
		<</if>>
		<<meek 3>>
	<</if>>

	<<if $leftaction is "pursuit_grab" and $rightaction is "pursuit_grab">>
		<<set $leftaction to 0>><<set $leftactiondefault to "pursuit_grab">><<set $rightaction to 0>><<set $rightactiondefault to "pursuit_grab">>
		<<set $feetaction to "rest">>
		<<set $feetuse to 0>>
		You grasp the back of the <<persons>> shirt with both hands, <span class="green">and force <<him>> to stop.</span> <<He>> turns to face you.
		<<stalk_catch>>
	<</if>>

	<<if $leftaction is "pursuit_grab">>
		<<set $leftaction to 0>><<set $leftactiondefault to "pursuit_grab">>
		<<set $feetaction to "rest">>
		<<set $feetuse to 0>>
		You grasp the back of the <<persons>> shirt with your left hand, <span class="green">and force <<him>> to stop.</span> <<He>> turns to face you.
		<<stalk_catch>>
	<</if>>

	<<if $rightaction is "pursuit_grab">>
		<<set $rightaction to 0>><<set $rightactiondefault to "pursuit_grab">>
		<<set $feetaction to "rest">>
		<<set $feetuse to 0>>
		You grasp the back of the <<persons>> shirt with your right hand, <span class="green">and force <<him>> to stop.</span> <<He>> turns to face you.
		<<stalk_catch>>
	<</if>>
<</if>>

/*End of stalked actions */

/***
*    ███████ ███████ ███████ ███████
*    ██      ██      ██        ███
*    ███████ ███████ ███████   ███
*    ██      ██      ██        ███
*    ██      ███████ ███████   ███
*
*/
<<if $newtarget isnot undefined>>
	<<setnewtarget>>
<</if>>

<<if $feetaction is "grab">>
	<<set $feetaction to 0>><<set $feetactiondefault to "grab">><<combatpromiscuity3>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $feetskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<submission 2 $feettarget>>
		<<if $NPCList[$feettarget].penis is 0>>
			<<set $feetactiondefault to "grabrub">><<set $NPCList[$feettarget].penis to "feet">><<set $feetuse to "penis">><<feetstat>><<feetskilluse>>
			<span class="lblue">You <<feettext>> <<if $NPCList[$feettarget].chastity.penis.includes("chastity")>>rub your foot on <<hisselect $feettarget>> $NPCList[$feettarget].penisdesc through <<hisselect $feettarget>> $NPCList[$feettarget].chastity.penis<<else>>grab <<hisselect $feettarget>> $NPCList[$feettarget].penisdesc between your feet<</if>>.</span>
		<<else>>
			<span class="blue">You try go grab <<hisselect $feettarget>> $NPCList[$feettarget].penisdesc with your feet, but the phallus is already occupied.</span>
		<</if>>
	<<else>>
		You clumsily try to grab <<hisselect $feettarget>> penis between your feet, but fail.
		<<feetskilluse>><<submission 2 $feettarget>>
	<</if>>
<</if>>

<<if $feetaction is "rest">>
	<<set $feetaction to 0>><<set $feetactiondefault to "rest">>You rest your legs.
<</if>>

<<if $feetaction is "kick">>
	<<set $feetaction to 0>><<set $feetactiondefault to "kick">>
	<<if $parasite.left_ear.name is "slime" and random(1, 3) is 3 or $parasite.right_ear.name is "slime" and random(1, 3) is 3>>
		<<if $corruption_slime gte ($willpower / 10)>>
			You try to kick the <<if $enemytype is "beast">><<beasttype>>,<<else>><<personselect $feettarget>><<person>>,<</if>>
			<span class="red">but the slime immobilises your legs.</span>
			<<gwillpower>><<willpower 1>>
		<<else>>
			The slime tries to immobilise your legs, <span class="green">but you wrestle control away from it.</span>
			<<actionskick $feettarget>><<defiance 5 $feettarget>><<set $attackstat += 1>>
			<<if $worn.feet.type.includes("heels")>>
				Your high heels strengthen the blow!
				<<defiance 1 $feettarget>>
			<</if>>
		<</if>>
	<<else>>
		<<actionskick $feettarget>><<defiance 5 $feettarget>><<set $attackstat += 1>>
		<<if $worn.feet.type.includes("heels")>>
			Your high heels strengthen the blow!
			<<defiance 1 $feettarget>>
		<</if>>
	<</if>>
<</if>>

<<if $feetaction is "rub">>
	<<set $feetaction to 0>><<submission 1 $feettarget>><<actionsfeetrub $feettarget>>
<</if>>

<<set $rng to random(1, 100)>>

<<if $feetaction is "grabrub">>
	<<feetskilluse>><<set $feetactiondefault to "grabrub">><<set $feetaction to 0>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $feetskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<actionsgrabrub $feettarget>><<submission 2 $feettarget>>
	<<else>>
		<<set $feetactiondefault to "grab">><<personselect $feettarget>>
		<span class="blue">You try to rub <<his>> penis between your feet, but <<he>> moves away.</span>
		<<set $feetuse to 0>><<set $NPCList[$feettarget].penis to 0>><<set $NPCList[$feettarget].location.genitals to 0>>
	<</if>>
<</if>>

<<set $rng to random(1, 100)>>

<<if $feetaction is "vaginagrab">>
	<<feetskilluse>><<set $feetaction to 0>><<set $feetactiondefault to "vaginagrab">><<combatpromiscuity3>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $feetskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<submission 2 $feettarget>>
		<<if $NPCList[$feettarget].vagina is 0>>
			<<set $feetactiondefault to "vaginagrabrub">><<set $feetuse to "othervagina">><<set $NPCList[$feettarget].vagina to "feet">><<feetstat>><span class="lblue">You <<feettext>> press your feet against <<hisselect $feettarget>> pussy<<if $NPCList[$feettarget].chastity.vagina.includes("chastity")>> through <<hisselect $feettarget>> $NPCList[$feettarget].chastity.vagina<</if>>.</span>
		<<else>>
			<span class="blue">You to try press your feet against <<hisselect $feettarget>> pussy, but they're already occupied.</span>
		<</if>>
	<<else>>
		You try to keep <<hisselect $feettarget>> pussy away with your feet, but <<he>> moves it away.
	<</if>>
<</if>>

<<set $rng to random(1, 100)>>

<<if $feetaction is "vaginagrabrub">>
	<<set $feetaction to 0>><<feetskilluse>><<set $feetactiondefault to "vaginagrabrub">>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $feetskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<actionsfeetpussy $feettarget>><<submission 2 $feettarget>>
	<<else>>
		<<set $feetactiondefault to "vaginagrab">><<personselect $feettarget>>
		<span class="blue">You try to keep <<his>> pussy away with your feet, but <<he>> moves away.</span>
		<<set $feetuse to 0>><<set $NPCList[$feettarget].vagina to 0>>
	<</if>>
<</if>>

<<if $feetaction is "stop">>
	<<set $feetaction to 0>><<set $feetactiondefault to "stop">>
	You move your feet away from <<his>> genitals.
	<<set $feetuse to 0>>
	<<if $NPCList[$feettarget].penis is "feet">>
		<<set $NPCList[$feettarget].penis to 0>>
	<</if>>
	<<if $NPCList[$feettarget].vagina is "feet">>
		<<set $NPCList[$feettarget].vagina to 0>>
	<</if>>
<</if>>

<<if $feetaction is "feetshoes">>
	<<set $feetaction to 0>>
	You kick off your $worn.feet.name.
	<<feetstrip>>
<</if>>

<<if $feetaction is "feetsocks">>
	<<set $feetaction to 0>>
	<<if $worn.legs.state is "thighs">>
		You peel your $worn.legs.name down your thighs with your toes.
		<<set $worn.legs.state to "ankles">>
	<<elseif $worn.legs.state is "ankles">>
		You kick off your $worn.legs.name.
		<<legsstrip>>
	<</if>>
<</if>>

/*Stalked actions */
<<if !$stalk_end>>
	<<if $feetaction is "walk">>
		<<set $feetaction to 0>><<set $feetactiondefault to "walk">>
		You keep walking,
		<<if $control gte ($controlmax * 0.8)>>
			your feet sure and steady.
		<<elseif $control gte ($controlmax * 0.6)>>
			putting one foot in front of the other.
		<<elseif $control gte ($controlmax * 0.4)>>
			though worried about the gaining footsteps.
		<<elseif $control gte ($controlmax * 0.2)>>
			doing your best to stay calm.
		<<else>>
			suppressing the urge to break into a run.
		<</if>>
		<<stalk_walk_events>>
	<</if>>

	<<if $feetaction is "run">>
		<<set $feetaction to 0>><<set $feetactiondefault to "run">>
		<<if $NPCList[0].state is "pursuit">>
			<<if $feetuse isnot "run">>
				You break into a run, and chase the thief.
				<<stalk_run>>
			<<else>>
				You chase the thief.
			<</if>>
			<<run_text>>
			<<if $worn.feet.type.includes("heels")>>
				<<if $feetskill gte random(1, 1000)>>
					<<set _stalk_feet to true>>
				<<else>>
					<<set _stalk_feet to false>>
				<</if>>
			<<else>>
				<<set _stalk_feet to true>>
			<</if>>
			<<if $athletics gte random(1, $NPCList[0].skills.athletics)>>
				<<set _stalk_athletics to true>>
			<<else>>
				<<set _stalk_athletics to false>>
			<</if>>
			<<if _stalk_athletics and _stalk_feet>>
				<span class="teal">You catch up.</span>
				<<set $NPCList[0].distance -= 2>>
			<<else>>
				<span class="red"><<He>> outpaces you.</span>
				<br>
			<</if>>
			<<stalk_run_events>>
		<<else>>
			<<if $feetuse isnot "run">>
				You break into a run.
				<<if $NPCList[0].bold * 2 gte random(1, 1000)>>
					The footsteps behind you speed up. <span class="red">You are being chased.</span>
					<<stalk_run>>
					<<if $worn.feet.type.includes("heels")>>
						<<if $feetskill gte random(1, 1000)>>
							<<set _stalk_feet to true>>
						<</if>>
					<<else>>
						<<set _stalk_feet to true>>
					<</if>>
					<<if $athletics gte random(1, $NPCList[0].skills.athletics)>>
						<<set _stalk_athletics to true>>
					<<else>>
						<<set _stalk_athletics to false>>
					<</if>>
					<<if _stalk_athletics and _stalk_feet>>
						<span class="teal">The footsteps fall behind.</span>
						<<set $NPCList[0].distance += 2>>
					<<else>>
						<span class="red">The footsteps get closer.</span>
					<</if>>
				<<else>>
					<span class="teal">No one pursues.</span>
					<<set $stalk_end to "escaped">>
				<</if>>
			<<else>>
				You keep running.
				<<run_text>>
				<<if $worn.feet.type.includes("heels")>>
					<<if $feetskill gte random(1, 1000)>>
						<<set _stalk_feet to true>>
					<</if>>
				<<else>>
					<<set _stalk_feet to true>>
				<</if>>
				<<if $athletics gte random(1, $NPCList[0].skills.athletics)>>
					<<set _stalk_athletics to true>>
				<<else>>
					<<set _stalk_athletics to false>>
				<</if>>
				<<if _stalk_athletics and _stalk_feet>>
					<span class="teal">The footsteps fall behind.</span>
					<<set $NPCList[0].distance += 2>>
				<<else>>
					<span class="red">The footsteps get closer.</span>
				<</if>>
				<br>
			<</if>>
			<<if $NPCList[0].distance gte 5>>
				<span class="green">You leave them far behind,</span> and escape to safety.
				<<set $stalk_end to "escaped">>
			<<else>>
				<<stalk_run_events>>
			<</if>>
		<</if>>
	<</if>>

	<<if $feetaction is "stand">>
		<<set $feetaction to 0>><<set $feetactiondefault to "stand">>
		<<if $control gte ($controlmax * 0.8)>>
			You stand still, your feet firm.
		<<elseif $control gte ($controlmax * 0.6)>>
			You stand still, and take a deep breath.
		<<elseif $control gte ($controlmax * 0.4)>>
			Despite your nerves, you stand still.
		<<elseif $control gte ($controlmax * 0.2)>>
			You stand still, despite your fear.
		<<else>>
			Shaking with fear, you stand still.
		<</if>>
		<<set $NPCList[0].distance to 0>>
	<</if>>

	<<if $feetaction is "hobble">>
		<<set $feetaction to 0>><<set $feetactiondefault to "hobble">>
		<<if $leftleg is "bound" or $rightleg is "bound">>
			You hobble as fast as your bound legs will allow,
		<<else>>
			You hobble as fast as your inexperience with high heels will allow,
		<</if>>
		<<if $control gte ($controlmax * 0.8)>>
			your feet steady despite your predicament.
		<<elseif $control gte ($controlmax * 0.6)>>
			careful not to trip.
		<<elseif $control gte ($controlmax * 0.4)>>
			suppressing the growing fear of the footsteps behind you.
		<<elseif $control gte ($controlmax * 0.2)>>
			struggling to stay calm.
		<<else>>
			suppressing the urge to cower in terror.
		<</if>>
	<</if>>

	<<if $feetaction is "hide">>
		<<set $feetaction to 0>><<set $feetactiondefault to "hide">>
		<<set _difficulty to $NPCList[0].skills.security>>
		<<set _difficulty += ($semencount + $goocount) * 20>>
		<<if $skulduggery gte random(1, _difficulty)>>
			<<set _hide_success to true>>
		<</if>>
		<<if _hide_success and $NPCList[0].state is "pursuit">>
			<<switch $location>>
			<<case forest lake>>
				You hide behind a tree, and hope that no one's watching.
			<<case moor>>
				You crouch behind a small ridge, and hope that no one's watching.
			<<default>>
				You dive down a small alley, and take cover behind a dumpster.
			<</switch>>
			<<set $stalk_end to "hide">>
		<<elseif !_hide_success and ($NPCList[0].legs is "run" or $NPCList[0].bold gte random(1, 1000))>>
			<<switch $location>>
			<<case alley>>
				You dive down a thin alley, and take cover behind a dumpster. You peek around the corner. You don't see anyone.
			<<case forest lake>>
				You run into a dense copse, and take cover behind a thick trunk. You peek around the side. You don't see anyone.
			<<case moor>>
				You crest a small ridge, and dive into a ditch. You look up, and don't see anyone.
			<<default>>
				You dive down a thin alley, and take cover behind a dumpster. You peek around the side. You don't see anyone.
			<</switch>>
			<span class="red">Then you feel a presence.</span>
			<<events_stalk>>
		<<else>>
			<<switch $location>>
			<<case alley>>
				You dive down a thin alley, and take cover behind a dumpster. <span class="green"><<if $enemyno gt 1>>They pass<<else>>The <<person>> passes<</if>> without looking your way.</span>
			<<case forest lake>>
				You run into a dense copse, and take cover behind a thick trunk. You peek around the edge. <span class="green"><<if $enemyno gt 1>>They pass<<else>>The <<person>> passes<</if>> by without looking your way.</span>
			<<case moor>>
				You crest a small ridge, and dive into a ditch. The <<if $enemyno gt 1>><<person1>><</if>><<person>> pauses at the top, <span class="green">then moves on without looking your way.</span>
			<<default>>
				You dive down a thin alley, and take cover behind a dumpster. You peek around the side. <span class="green"><<if $enemyno gt 1>>They pass<<else>>The <<person>> passes<</if>> without looking your way.</span>
			<</switch>>
			<<set $stalk_end to "hide">>
		<</if>>
	<</if>>

	<<if $feetaction is "confront">>
		<<famescrap 1>>
		You swivel around, and come face to face with the
		<<person1>>
		<<if $enemyno gte 2>>
			<<person>> and <<his>> companions.
		<<else>>
			<<person>>.
		<</if>>
		<<actionsconfront>>
		<br><br>
		<<if $NPCList[0].bold * 2 gte random(1, 1000)>>
			<span class="red"><<He>> marches towards you.</span>
			<<if $NPCList[0].traits.includes("relaxed")>>
				"Best play along," <<he>> says. "It'll be easier for you."
			<<elseif $NPCList[0].traits.includes("sociable")>>
				"That's no way to talk to a <<if $pronoun is "m">>gentleman<<else>>lady<</if>> like me," <<he>> says. "I know how you can make it up to me."
			<<elseif $NPCList[0].traits.includes("brooding")>>
				"This is the way of the world," <<he>> says. "It'll be over soon."
			<<else>>
				"You're such a hot piece," <<he>> says. "You're gonna get jumped sooner or later. I might as well benefit."
			<</if>>
			<br><br>
			<<stalk_attack>>
		<<else>>
			<span class="green"><<He>> throws up <<his>> hands.</span>
			<<if $NPCList[0].traits.includes("relaxed")>>
				"Easy <<girl>>," <<he>> says, giving you a wide berth. "I didn't mean to frighten you."
			<<elseif $NPCList[0].traits.includes("sociable")>>
				"Damn <<girl>>," <<he>> says. "I am that ugly?" <<He>> gives you a wide berth.
			<<elseif $NPCList[0].traits.includes("brooding")>>
				The <<person>> laughs. "The streets that rough for you?" <<he>> asks. "I'll give you space."
			<<else>>
				"I was only looking!" <<he>> says. "Wasn't gonna try anything, honest." <<He>> gives you a wide berth.
			<</if>>
			<br><br>

			<<He>> walks ahead. You feel a little silly.
			<br><br>
			<<set $stalk_end to "passed">>
			<<set $NPCList[_n].distance to 1>>
		<</if>>
	<</if>>
<</if>>

/*End of stalked actions */

/***
*    ██   ██  █████  ██   ██ ███████ ██   ██
*    ███ ███ ██   ██ ██   ██   ███   ██   ██
*    ██ █ ██ ██   ██ ██   ██   ███   ███████
*    ██   ██ ██   ██ ██   ██   ███   ██   ██
*    ██   ██  █████   █████    ███   ██   ██
*
*/
<<if $newtarget isnot undefined>>
	<<setnewtarget>>
<</if>>

<<if $mouthaction is "rest">>
	<<set $mouthaction to 0>><<set $mouthactiondefault to "rest">>
<</if>>

<<if $mouthaction is "kiss">>
	<<set $mouthaction to 0>><<actionskiss $mouthtarget>><<submission 3 $mouthtarget>><<set $mouthactiondefault to "kiss">>
<</if>>

<<if $mouthaction is "plead">>
	<<set $mouthaction to 0>><<set _sound to 1>>
	<<if $neckuse is "hand" and $oxygen lt $oxygenmax and $asphyxiaLvl gte 2>>
		<<wheeze "plead with <<him>>">>
	<<else>>
		<<set $mouthactiondefault to "plead">>
		<<actionsplead>><<set $speechplead to 1>>
		<<meek `1 + $englishtrait`>>
	<</if>>
<</if>>

<<if $mouthaction is "moan">>
	<<set $mouthaction to 0>><<set _sound to 1>>
	<<if $neckuse is "hand" and $oxygen lt $oxygenmax and $asphyxiaLvl gte 2>>
		<<wheeze "say something sexy" 2>><<set $speechmoan to 1>>
	<<else>>
		<<set $mouthactiondefault to "moan">>
		<<actionsmoan>><<set $speechmoan to 1>>
		<<submission `1 + $englishtrait`>>
	<</if>>
<</if>>

<<if $mouthaction is "ask" and $askAction is "askchoke" and $askedtochoke isnot 1>>
	<<set $mouthaction to 0>><<unset $askAction>><<set _sound to 1>>
	<<if $neckuse is "hand" and $oxygen lt $oxygenmax and $asphyxiaLvl gte 2>>
		<<wheeze "ask to choke you" 1>>
	<<else>>
		<<set $askedtochoke to 1>>
		<<set $mouthactiondefault to 0>>
		<<actionschoke>>
		<<submission `1 + $englishtrait`>>
	<</if>>
<</if>>

<<if $mouthaction is "demand">>
	<<set $mouthaction to 0>><<set _sound to 1>>
	<<if $neckuse is "hand" and $oxygen lt $oxygenmax and $asphyxiaLvl gte 2>>
		<<wheeze "demand something">>
	<<else>>
		<<set $mouthactiondefault to "demand">>
		<<actionsdemand>><<set $speechdemand to 1>>
		<<defiance `1 + $englishtrait`>>
	<</if>>
<</if>>

<<if $mouthaction is "mock">>
	<<set $mouthaction to 0>><<set _sound to 1>>
	<<if $neckuse is "hand" and $oxygen lt $oxygenmax and $asphyxiaLvl gte 2>>
		<<wheeze "mock <<him>>">>
	<<else>>
		<<set $mouthactiondefault to "mock">>
		<<actionsmock>><<set $speechdemand to 1>>
		<<brat `1 + $englishtrait` $mouthtarget>>
		<<if $mockaction is $NPCList[$mouthtarget].insecurity>>
			<<if $consensual is 1>>
				<<submission `1 + $englishtrait` $mouthtarget>>
			<<else>>
				<<combatcontrol `1 + $englishtrait`>>
			<</if>>
		<</if>>
	<</if>>
<</if>>

<<if $mouthaction is "mouth">>
	<<set $mouthaction to 0>><<meek 1 $mouthtarget>><<set $mouthactiondefault to "mouth">><<combatpromiscuity4>>
	<<if $penisbitten is 1>>
		<<He>> smacks your head away from <<his>> penis.
		<<violence 5>>
	<<elseif (1000 - ($rng * 10) - ($enemytrust * 10) - $oralskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<set $mouthsubmit to 1>><<oralskilluse>>
		<<if $NPCList[$mouthtarget].penis is 0>>
			<<set $NPCList[$mouthtarget].penis to "mouthentrance">><<set $mouthactiondefault to "lick">><<set $mouthuse to "penis">><<set $mouthstate to "entrance">>
			<span class="lblue">You <<oraltext>> move your mouth to <<hisselect $mouthtarget>> <<npcPenis $mouthtarget>><<if !$npcSub>> and <<he>> waits expectantly<</if>>.</span>
			<<if $enemytype is "beast">><<set $NPCList[$mouthtarget].stance to "topface">><</if>>
			<<set $NPCList[$mouthtarget].location.genitals to "head">>
		<<else>>
			<span class="blue">You try to move your mouth to <<hisselect $mouthtarget>> <<npcPenis $mouthtarget>>, but the phallus is already occupied.</span>
		<</if>>
	<<else>>
		You try to move into a position where your mouth can take <<hisselect $mouthtarget>> penis, but <<he>> has other ideas.
		<<oralskilluse>>
	<</if>>
<</if>>

<<if $mouthaction is "swallow">>
	<<set $mouthaction to 0>><<set $mouthactiondefault to "swallow">><<combatpromiscuity5>>
	<<set $NPCList[$mouthtarget].penis to "mouth">>
	<span class="pink">You take <<hisselect $mouthtarget>> $NPCList[$mouthtarget].penisdesc into your mouth.</span>
	<<switch $NPCList[$mouthtarget].penissize>>
	<<case 4>>
		<span class="pink"> You struggle to accommodate its girth.</span>
	<<case 1>>
		<span class="pink"> You struggle to keep your mouth on something so small.</span>
	<</switch>>
	<<if $player.virginity.oral isnot true>>
		<<if $NPCList[$mouthtarget].type is "plant">>
			<span class="pink"> It tastes sweet.</span>
		<</if>>
		<<submission 10 $mouthtarget>><<bruise face>><<oralstat>><<raped>><<set $mouthstate to "penetrated">><<set $speechmouthpenetrated to 1>>
	<<elseif $player.virginity.oral is true>>
		<<if $NPCList[$mouthtarget].type is "plant">>
			<span class="red">It tastes uncomfortably sweet.</span>
		<<else>>
			<span class="red">It tastes strange.</span>
		<</if>>
		<<submission 30 $mouthtarget>>
		<<takeVirginity $NPCList[$mouthtarget].fullDescription "oral">><<bruise face>><<oralstat>><<violence 1>><<raped>>
		<<set $mouthstate to "penetrated">><<set $speechmouthvirgin to 1>>
	<</if>>
<</if>>

<<if $mouthaction is "othervagina">>
	<<set $mouthaction to 0>><<meek 1 $mouthtarget>><<set $mouthactiondefault to "othervagina">><<combatpromiscuity4>>
	<<if $penisbitten is 1>>
		<<He>> smacks your head away from <<his>> pussy.
		<<violence 5>>
	<<elseif (1000 - ($rng * 10) - ($enemytrust * 10) - $oralskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<oralskilluse>>
		<<if $NPCList[$mouthtarget].vagina is 0>>
			<span class="lblue">You <<oraltext>> move your mouth to <<hisselect $mouthtarget>> <<npcVagina $mouthtarget>><<if !$npcSub>> and <<he>> waits expectantly<</if>>.</span>
			<<set $NPCList[$mouthtarget].vagina to "mouth">><<set $mouthstate to "othervagina">><<set $mouthuse to "othervagina">>
			<<if $enemytype is "beast">><<set $NPCList[$mouthtarget].stance to "topface">><</if>><<set $mouthactiondefault to "vaginalick">>
			<<set $NPCList[$mouthtarget].location.genitals to "head">>
		<<else>>
			<span class="blue">You try to move your mouth to <<hisselect $mouthtarget>> <<npcVagina $mouthtarget>>, but they're already occupied.</span>
		<</if>>
	<<else>>
		You try to move into a position where your mouth can eat <<hisselect $mouthtarget>> pussy, but <<he>> has other ideas.
		<<oralskilluse>>
	<</if>>
<</if>>

<<if $mouthaction is "breastpull">>
	<<set $mouthaction to 0>><<set $mouthactiondefault to "breastpull">>
	You try to pull your head away from the chest pressing against your face.
	<<oralskilluse>><<brat 1 $mouthtarget>>
	<<willpowerdifficulty $drugged $willpowermax "silent">>
	<<if $NPCList[$mouthtarget].type is "plant" and !$willpowerSuccess>>
		<span class="red">However, you can't tear yourself from the sweet nectar.</span>
		<<if $mouthstate is "nipple">>
			You desperately suck their $NPCList[$mouthtarget].breastdesc.
		<<else>>
			You push your face back into their $NPCList[$mouthtarget].breastdesc.
		<</if>>
		<<gwillpower>><<willpower 1>>
	<<else>>
		<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $oralskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
			<<set $mouthstate to 0>><<set $mouthuse to 0>>
			<<set $NPCList[$mouthtarget].chest to 0>>
			<<set $NPCList[$mouthtarget].location.head to 0>>
			<span class="green"><<He `$mouthtarget + 1`>> doesn't stop you.</span>
			<<if $NPCList[$mouthtarget].lefthand is "head_breasts" or $NPCList[$mouthtarget].lefthand is "head_nipples">>
				<<set $NPCList[$mouthtarget].lefthand to 0>>
			<</if>>
			<<if $NPCList[$mouthtarget].righthand is "head_breasts" or $NPCList[$mouthtarget].righthand is "head_nipples">>
				<<set $NPCList[$mouthtarget].righthand to 0>>
			<</if>>
		<<else>>
			<<if $consensual is 1>>
				<<set $consensual to 0>><<molested>><<controlloss>>
			<</if>>
			<<violence 1>>
			<<if $mouthstate is "breasts">>
				<span class="red">However, <<personselect $mouthtarget>><<he>> refuses to allow it,</span> instead pushing your head back against their chest.
			<<elseif $mouthstate is "nipple">>
				<span class="red">However, <<personselect $mouthtarget>><<he>> refuses to allow it,</span> instead pushing your head back against their chest.
			<</if>>
		<</if>>
	<</if>>
<</if>>

<<if $mouthaction is "movetochest">>
	<<set $mouthaction to 0>><<meek 1 $mouthtarget>><<set $mouthactiondefault to "breastclosed">><<combatpromiscuity3>>
	<<if $breastbitten is 1>>
		<<He>> smacks your head away from <<his>> chest.
		<<violence 5>>
	<<elseif (1000 - ($rng * 10) - ($enemytrust * 10) - $oralskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<set $mouthactiondefault to "breastlick">>
		<span class="lblue">You <<oraltext>> move your mouth to <<hisselect $mouthtarget>> $NPCList[$mouthtarget].breastsdesc.</span>
		<<if $NPCList[$mouthtarget].type is "plant" and $NPCList[$mouthtarget].pronoun is "f" and $breastfeedingdisable is "f">>
			<span class="purple">It carries a sweet scent.</span>
		<<elseif $NPCList[$mouthtarget].lactation is 1 and $breastfeedingdisable is "f">>
			<span class="purple">It carries a scent of milk.</span>
		<</if>>
		<<set $NPCList[$mouthtarget].chest to "mouthentrance">><<set $mouthstate to "breasts">><<set $mouthuse to "breasts">><<set $head to "breasts">><<oralskilluse>>
		<<set $NPCList[$mouthtarget].location.head to "head">>
	<<else>>
		You try to move your mouth to <<someones $mouthtarget>> chest, but <<he>> has other ideas.
		<<oralskilluse>>
	<</if>>
<</if>>

<<if $mouthaction is "breastbite">>
	<<set $mouthaction to 0>><<set $mouthactiondefault to "breastbite">><<personselect $mouthtarget>>
	You bite down on the nipple, <<he>> <<if $enemytype is "man">>yelps<<elseif $enemytype is "beast">>growls<<else>>shrieks<</if>> and recoils in agony.
	<<defiance 20 $mouthtarget>><<attackstat>><<set $mouthuse to 0>><<set $breastbitten to 1>><<set $mouthstate to 0>>
	<<if $wolfgirl gte 2 or $cat gte 2  or $dragon gte 2>>
		<<defiance 40 $mouthtarget>>
		You lick your fangs clean.
	<</if>>
	<<if $head is "breasts">>
		<<set $head to 0>>
	<</if>>
	<<set $NPCList[$mouthtarget].chest to 0>>
	<<set $NPCList[$mouthtarget].location.head to 0>>
	<<if $NPCList[$mouthtarget].lefthand is "head_nipples">>
		<<set $NPCList[$mouthtarget].lefthand to 0>>
	<</if>>
	<<if $NPCList[$mouthtarget].righthand is "head_nipples">>
		<<set $NPCList[$mouthtarget].righthand to 0>>
	<</if>>
<</if>>

<<if $mouthaction is "breastlick">>
	<<set $mouthactiondefault to "breastlick">><<set $mouthaction to 0>><<submission 3 $mouthtarget>>
	You lick <<hisselect $mouthtarget>> $NPCList[$mouthtarget].breastsdesc.
<</if>>

<<if $mouthaction is "breastclosed">>
	<<set $mouthactiondefault to "breastclosed">><<set $mouthaction to 0>><<brat 3 $mouthtarget>>
	You keep your mouth closed.
	<<if $NPCList[$mouthtarget].type is "plant" and $NPCList[$mouthtarget].pronoun is "f" and $breastfeedingdisable is "f">>
		<span class="pink">Nectar leaks from <<hisselect $mouthtarget>> $NPCList[$mouthtarget].breastdesc.</span>
	<<elseif $NPCList[$mouthtarget].lactation is 1 and $breastfeedingdisable is "f">>
		<span class="pink">Milk leaks from <<hisselect $mouthtarget>> $NPCList[$mouthtarget].breastdesc.</span>
	<</if>>
<</if>>

<<if $mouthaction is "breastsuck">>
	<<set $mouthactiondefault to "breastsuck">><<set $mouthaction to 0>><<submission 3 $mouthtarget>>
	<<set $mouthstate to "nipple">>
	<<set $NPCList[$mouthtarget].chest to "mouth">>
	You <<oraltext>> suck <<hisselect $mouthtarget>> $NPCList[$mouthtarget].breastdesc.
	<<if $NPCList[$mouthtarget].lefthand is "head_breasts">><<set $NPCList[$mouthtarget].lefthand to "head_nipples">><</if>>
	<<if $NPCList[$mouthtarget].righthand is "head_breasts">><<set $NPCList[$mouthtarget].righthand to "head_nipples">><</if>>
	<<if $breastfeedingdisable is "f" and $NPCList[$mouthtarget].type is "plant" and $NPCList[$mouthtarget].pronoun is "f">>
		<span class="purple">Sweet nectar fills your mouth.</span>
		<<nectarfed 15>><<set $speechheadsuckle to 1>><<submission 2 $mouthtarget>>
	<<elseif $breastfeedingdisable is "f" and $NPCList[$mouthtarget].lactation is 1>>
		<span class="purple">Sweet, creamy milk fills your mouth.</span>
		<<breastfed>><<set $speechheadsuckle to 1>><<submission 2 $mouthtarget>>
	<<else>>
		<<set $speechheadnipple to 1>>
	<</if>>
<</if>>

<<if $mouthaction is "scream">>
	<<set $mouthaction to 0>><<set _sound to 1>>
	<<if $neckuse is "hand" and $oxygen lt $oxygenmax and $asphyxiaLvl gte 2>>
		<<wheeze "scream for help">>
	<<elseif $drugged gt 0>>
		You try to scream for help, <span class="pink">but the aphrodisiacs make it sound like a lewd moan.</span>
		<<neutral 1>><<set $speechmoan to 1>>
	<<elseif ($parasite.left_ear.name is "slime" or $parasite.right_ear.name is "slime") and $corruption_slime gte ($willpower / 10)>>
		You open your mouth to scream for help, <span class="red">but your voice catches in your throat.</span> You feel the slime steal your breath away.
		<<gwillpower>><<willpower 1>>
	<<else>>
		You scream for help.
		<<if $loveInterest>>
			<<if ($loveInterest.primary is "Eden" or $loveInterest.secondary is "Eden") and $location is "forest" and !($npc.includes("Eden"))>>
				<<if $rng lte 50>>
					"Eden! Get them off of me!"
				<<else>>
					"Eden! Help!"
				<</if>>
			<</if>>
		<</if>>
		<<brat 10>><<set $alarm to 1>><<set $mouthactiondefault to "scream">><<set $speechscream to 1>>
		<<if $NPCList[0].lefthand is 0 and $mouthuse is 0 and $position isnot "wall">>
			<<set $NPCList[0].lefthand to "mouth">><<He>> clasps <<his>> hand over your mouth to silence you.
			<<set $enemytrust -= 40>><<set $mouthuse to "lefthand">>
		<<elseif $NPCList[0].righthand is 0 and $mouthuse is 0 and $position isnot "wall">>
			<<set $NPCList[0].righthand to "mouth">><<He>> clasps <<his>> hand over your mouth to silence you.
			<<set $enemytrust -= 40>><<set $mouthuse to "righthand">>
		<</if>>
	<</if>>
<</if>>

<<if $mouthaction is "apologise">>
	<<set $mouthaction to 0>><<set _sound to 1>>
	<<if $neckuse is "hand" and $oxygen lt $oxygenmax and $asphyxiaLvl gte 2>>
		<<wheeze "apologise">>
	<<elseif $enemytype is "beast">>
		You tell <<him>> you're sorry for being bad.
		<<set $mouthactiondefault to "plead">>
		<<if $apologised is 0>>
			<<if $monster is 1>>
				<<bHe>> growls. "Good. Now stay still."
			<<else>>
				While it doesn't understand you, your tone of voice has an impact.
			<</if>>
			<<set $apologised to 1>><<set $speechapologise to 1>>
			<<set $enemyanger -= 50 * (1 + $englishtrait)>>
		<<else>>
			<<bHe>> ignores you.
			<<set $speechapologiseno to 1>>
		<</if>>
	<<else>>
		You tell <<him>> you're sorry for being bad.
		<<set $mouthactiondefault to "plead">>
		<<if $apologised is 0>>
			<<His>> face softens.
			<<set $apologised to 1>><<set $speechapologise to 1>>
			<<set $enemyanger -= 50 * (1 + $englishtrait)>>
		<<else>>
			<<He>> ignores you.
			<<set $speechapologiseno to 1>>
		<</if>>
	<</if>>
<</if>>

<<if $mouthaction is "forgive">>
	<<set $mouthaction to 0>><<set _sound to 1>>
	<<if $neckuse is "hand" and $oxygen lt $oxygenmax and $asphyxiaLvl gte 2>>
		<<wheeze>>
	<<else>>
		<<set $mouthactiondefault to "plead">>
		<<set $trauma -= $traumagain>><<set $traumagain to 0>><<set $speechforgive to 1>><<set $angelforgive to 1>>
		<<if $enemytype is "beast">>
			"You don't know any better. You're just a <<beasttype>>," you say. "I forgive you."
		<<else>>
			"Even though you're doing such a horrible thing, don't worry," you say. "I forgive you."
		<</if>>
	<</if>>
<</if>>

<<if $mouthaction is "peniskiss">>
	<<set $mouthaction to 0>><<set $mouthactiondefault to "peniskiss">>
	<<actionspeniskiss $mouthtarget>>
	<<submission 3 $mouthtarget>><<oralskilluse>>
<</if>>

<<if $mouthaction is "lick">>
	<<set $mouthaction to 0>><<set $mouthactiondefault to "lick">><<actionspenislick $mouthtarget>><<submission 5 $mouthtarget>><<oralskilluse>>
<</if>>

<<if $mouthaction is "suck">>
	<<set $mouthaction to 0>><<set $mouthactiondefault to "suck">><<actionspenissuck $mouthtarget>><<submission 10 $mouthtarget>><<oralskilluse>>
<</if>>

<<if $mouthaction is "pullaway">>
	<<set $mouthaction to 0>><<set $mouthactiondefault to "pullaway">>
	You try to pull your head away from the penis threatening your mouth.
	<<oralskilluse>><<brat 1 $mouthtarget>>
	<<willpowerdifficulty $drugged $willpowermax "silent">>
	<<if $NPCList[0].type is "plant" and $mouthstate is "penetrated" and !$willpowerSuccess>>
		<span class="red">However, you can't tear yourself from the sweet nectar.</span>
		You desperately suck on the penis invading your mouth.
		<<willpower 1>>
	<<else>>
		<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $oralskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
			<<set $pullaway to 1>>
			<<if $NPCList[$mouthtarget].penis is "mouth">>
				<<set $NPCList[$mouthtarget].penis to "mouthimminent">><<set $mouthstate to "imminent">><span class="green"><<He `$mouthtarget + 1`>> doesn't stop you.</span>
			<<elseif $NPCList[$mouthtarget].penis is "mouthimminent">>
				<<set $NPCList[$mouthtarget].penis to "mouthentrance">><<set $mouthstate to "entrance">><span class="green"><<He `$mouthtarget + 1`>> doesn't stop you.</span>
			<<elseif $NPCList[$mouthtarget].penis is "mouthentrance">>
				<<set $NPCList[$mouthtarget].penis to 0>><<set $mouthstate to 0>><<set $mouthuse to 0>><<set $mouthstate to 0>><<set $NPCList[$mouthtarget].location.genitals to 0>>
				<span class="green"><<He `$mouthtarget + 1`>> doesn't stop you.</span>
			<</if>>
		<<else>>
			<<if $consensual is 1>>
				<<set $consensual to 0>><<molested>><<controlloss>>
			<</if>>
			<<violence 1>>
			<<if $mouthstate is "penetrated">>
				<span class="red">However, <<personselect $mouthtarget>><<he>> refuses to allow it,</span> forcing the phallus back into your mouth.
			<<elseif $mouthstate is "imminent">>
				<span class="red">However, <<personselect $mouthtarget>><<he>> refuses to allow it,</span> instead pushing the penis against your lips.
			<<elseif $mouthstate is "entrance">>
				<span class="red">However, <<personselect $mouthtarget>><<he>> refuses to allow it,</span> instead pushing the penis against your lips.
			<</if>>
		<</if>>
	<</if>>
<</if>>

<<if $mouthaction is "pullawayvagina">>
	<<set $mouthaction to 0>><<set $mouthactiondefault to "pullawayvagina">>
	<<if $consensual is 1>>
		You try to move your head away from the pussy.
		<<oralskilluse>><<brat 1 $mouthtarget>>
	<<else>>
		You try to pull your head away from the pussy threatening your mouth.
		<<oralskilluse>><<brat 1 $mouthtarget>>
	<</if>>
	<<oralskilluse>><<brat 1 $mouthtarget>>
	<<willpowerdifficulty $drugged $willpowermax "silent">>
	<<if $NPCList[0].type is "plant" and !$willpowerSuccess>>
		<span class="red">However, you can't tear yourself from the sweet nectar.</span> You desperately lick the pussy pressing against your mouth.
		<<willpower 1>>
	<<else>>
		<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $oralskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
			<<set $mouthuse to 0>><<set $mouthstate to 0>><<set $pullaway to 1>>
			<<set $NPCList[$mouthtarget].vagina to 0>><span class="green"><<He `$mouthtarget + 1`>> doesn't stop you.</span>
			<<set $NPCList[$mouthtarget].location.genitals to 0>>
		<<else>>
			<<if $consensual is 1>>
				<<set $consensual to 0>><<molested>><<controlloss>>
			<</if>>
			<span class="red">However, <<theowner>> refuses to allow it,</span> forcing it against your face.
			<<violence 1>>
		<</if>>
	<</if>>
<</if>>

<<if $mouthaction is "bite">>
	<<set $mouthaction to 0>><<set $mouthactiondefault to "bite">><<personselect $mouthtarget>>
	You bite down on the penis, <<he>> <<if $enemytype is "man">>yelps<<elseif $enemytype is "beast">>growls<<else>>shrieks<</if>> and recoils in agony.
	<<defiance 20 $mouthtarget>><<attackstat>><<control 15>><<set $mouthuse to 0>><<set $penisbitten to 1>><<set $mouthstate to 0>>
	<<if $wolfgirl gte 2 or $cat gte 2 or $dragon gte 2>>
		<<defiance 20 $mouthtarget>><<defiance 20 $mouthtarget>>
		You lick your fangs clean.
	<</if>>
	<<set $NPCList[$mouthtarget].penis to 0>><<set $NPCList[$mouthtarget].location.genitals to 0>>
<</if>>

<<if $mouthaction is "bitepussy">>
	<<set $mouthaction to 0>><<set $mouthactiondefault to "bitepussy">>
	You bite down on <<his>> labia, <<theowner>> <<if $enemytype is "man">>yelps<<elseif $enemytype is "beast">>growls<<else>>shrieks<</if>> and recoils in agony.
	<<defiance 20>><<attackstat>><<control 15>><<set $mouthuse to 0>><<set $penisbitten to 1>><<set $mouthstate to 0>><<set $speechhit to 1>>
	<<if $wolfgirl gte 2 or $cat gte 2>>
		<<defiance 40 $mouthtarget>>
		You lick your fangs clean.
	<</if>>
	<<set $NPCList[ $mouthtarget].vagina to 0>><<set $NPCList[ $mouthtarget].location.genitals to 0>>
<</if>>

<<if $mouthaction is "vaginalick">>
	<<set $mouthaction to 0>><<set $mouthactiondefault to "vaginalick">><<actionspussylick $mouthtarget>><<submission 10 $mouthtarget>><<oralskilluse>>
<</if>>

<<if $mouthaction is "pullawaykiss">>
	<<set $mouthaction to 0>><<set $mouthactiondefault to "pullawaykiss">>
	You try to pull your head away from their lips.
	<<oralskilluse>><<brat 1 $mouthtarget>>
	<<willpowerdifficulty $drugged $willpowermax "silent">>
	<<if $NPCList[$mouthtarget].type is "plant" and $mouthstate isnot "kissentrance" and !$willpowerSuccess>>
		<span class="red">However, you can't tear yourself from the sweet nectar.</span>
		<<if $mouthstate is "kissimminent">>
			You kiss them back, parting their lips with your tongue.
		<<elseif $mouthstate is "kiss">>
			You kiss them back, caressing their tongue with your own.
		<</if>>
		<<willpower 1>>
	<<else>>
		<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $oralskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
			<<set $mouthuse to 0>><<set $mouthstate to 0>>
			<<set $NPCList[$mouthtarget].mouth to 0>><span class="green"><<He `$mouthtarget + 1`>> doesn't stop you.</span>
			<<set $NPCList[$mouthtarget].location.head to 0>>
		<<else>>
			<<if $consensual is 1>>
				<<set $consensual to 0>><<molested>><<controlloss>>
			<</if>>
			<<if $mouthstate is "kissentrance">>
				<span class="red">However, <<personselect $mouthtarget>><<he>> refuses to allow it,</span> preventing you from moving away from their face.
			<<else>>
				<span class="red">However, <<personselect $mouthtarget>><<he>> refuses to allow it,</span> kissing you more firmly.
			<</if>>
			<<violence 1>>
		<</if>>
	<</if>>
<</if>>

<<if $mouthaction is "kissback">>
	<<set $mouthaction to 0>><<set $mouthactiondefault to "kissback">><<actionskissback $mouthtarget>><<submission 2 $mouthtarget>><<oralskilluse>>
<</if>>

<<if $mouthaction is "anallick">>
	<<set $mouthaction to 0>><<set $mouthactiondefault to "anallick">><<actionsAnalLick $mouthtarget>><<submission 10 $mouthtarget>><<oralskilluse>>
<</if>>

<<if $mouthaction is "analkiss">>
	<<set $mouthaction to 0>><<set $mouthactiondefault to "analkiss">><<actionsAnalKiss $mouthtarget>><<submission 12 $mouthtarget>>
<</if>>

<<set $rng to random(1, 100)>>

<<if $mouthaction is "handbite">>
	<<set $mouthaction to 0>><<set $mouthactiondefault to "handbite">>
	<<actionshandbite $mouthtarget>>
	<<if $wolfgirl gte 2 or $cat gte 2 or $dragon gte 2>>
		<<defiance 6 $mouthtarget>>
	<<else>>
		<<defiance 2 $mouthtarget>>
	<</if>>
	<<if random(1, 5) gte 3 and ($wolfgirl gte 2 or $cat gte 2 or $dragon gte 2) or random(1, 5) gte 5>>
		<<set $mouthuse to 0>>
		<<if $NPCList[$mouthtarget].lefthand is "mouth">>
			<<set $NPCList[$mouthtarget].lefthand to 0>>
			<<control 15>>
			<span class="teal"><<He `$mouthtarget + 1`>> flinches away in pain, freeing your mouth.</span>
		<</if>>
		<<if $NPCList[$mouthtarget].righthand is "mouth">>
			<<set $NPCList[$mouthtarget].righthand to 0>>
			<<control 15>>
			<span class="teal"><<He `$mouthtarget + 1`>> flinches away in pain, freeing your mouth.</span>
		<</if>>
	<<else>>
		<<control -5>>
		<span class="purple">It remains over your mouth.</span> 
	<</if>>
<</if>>

<<if $mouthaction is "headbutt">>
	<<set $mouthaction to 0>><<set $mouthactiondefault to "headbutt">><<personselect $mouthtarget>>
	<<if $mouthstate is "kiss">>
		You disengage from the kiss, and headbutt <<him>> in retaliation.
	<<else>>
		You quickly rear back and headbutt <<him>>.
	<</if>>
	<<He>> <<if $enemytype is "beast">>yelps and backs off<<else>>yells and stumbles back, clutching <<his>> head<</if>>.
	<<defiance 10 $mouthtarget>><<attackstat>><<set $mouthuse to 0>><<set $mouthstate to 0>>
	<<if $cow gte 2 and $demon gte 2>>
		<<defiance 10 $mouthtarget>><<defiance 10 $mouthtarget>>
	<</if>>
	<<if $demon gte 2 or $dragon gte 3>>
		<<defiance 10 $mouthtarget>>
		You rub your horns.
	<</if>>
	<<if $cow gte 2 or $dragon gte 3>>
		<<print either("That didn't hurt you at all!", "You remain unshaken by the blow.", "You're unharmed by the hit.")>>
	<<else>>
		<<pain 4>>
		<<if $pain lte 20>>
			Your own head immediately stings.
		<<elseif $pain lte 60>>
			Your ears begin to ring from the blow.
		<<else>>
			Your mind feels rattled by the impact.
		<</if>>
		<<gpain>>
	<</if>>
	<<set $head to 0>>
	<<set $NPCList[$mouthtarget].mouth to 0>>
	<<set $NPCList[$mouthtarget].location.head to 0>>
<</if>>

<<if $mouthaction is "grasp">>
	<<set $mouthaction to 0>><<set $mouthactiondefault to "grasp">><<chestskilluse>><<combatpromiscuity3>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $chestskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<set $chestactiondefault to "rub">><<set $chestuse to "penis">><<cheststat>><<set $mouthstate to 0>><<set $mouthuse to 0>><<set $mouthactiondefault to "peniskiss">>
		<<set $NPCList[$mouthtarget].penis to "chest">><<personselect $mouthtarget>><<set $chesttarget to $mouthtarget>>
		<<if $breastcup is "none">>
			<span class="lblue">You <<chesttext>> squeeze your <<breasts>> together as best you can and try to grab <<his>> $NPCList[$mouthtarget].penisdesc between them.
			Your breasts are too small for it to be effective, but your cute attempt succeeds in charming <<him>>.</span> <<He>> rubs <<his>> penis against your chest.
		<<else>>
			<span class="lblue">You <<chesttext>> grab <<his>> $NPCList[$mouthtarget].penisdesc between your <<breasts>>.</span>
		<</if>>
	<<else>>
		<<if $breastsize is 0>>
			You squeeze your <<breasts>> together as best you can and try to grab <<a>> penis between them, to no avail.
		<<else>>
			You try to grab <<hisselect $mouthtarget>> penis between your <<breasts>>, but fail.
		<</if>>
	<</if>>
<</if>>

<<if $mouthaction is "ask" and $askAction is "finish">>
	<<set $mouthaction to 0>><<unset $askAction>><<set _sound to 1>>
	<<if $neckuse is "hand" and $oxygen lt $oxygenmax and $asphyxiaLvl gte 2 and $gamemode isnot "soft">>
		<<wheeze "tell <<him>> you want to stop">>
	<<else>>
		<<set $mouthactiondefault to "rest">><<brat 10>>
		You tell <<him>> you've had enough and want to stop.
		<<if !$loveDrunk and $NPCList[0].type isnot "plant" and ((1000 - ($rng * 10) - ($enemytrust * 10) - $seductionskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100) or $gamemode is "soft" or $gloryhole)>>
			<<set $finish to 1>>
			<<if $trueconsensual isnot 1 and $gamemode is "soft">>
				<<set $enemyhealth to -100>>
			<</if>>
			<<if $enemytype is "man" or $monster is 1>>
				<<He>> <<if $enemyno gte 2>>look<<else>>looks<</if>> disappointed, <span class="green">but <<if $enemyno gte 2>>comply<<else>>complies<</if>>.</span>
			<<else>>
				It can't speak, <span class="green">but understands your tone and complies.</span>
			<</if>>
			<<if $gamemode is "soft">>
				<<set $enemyhealth to -1000>>
			<</if>>
		<<else>>
			<<set $consensual to 0>>
			<<switch $enemytype>>
				<<case "plant">>
					<span class="red"><<He>> shakes <<his>> head happily.</span>
				<<case "beast">>
					Eager to breed, <span class="red"><<bhe>> ignores your desire.</span>
				<<default>>
					<span class="red"><<if $enemyno gte 2>>They refuse!<<else>><<He>> refuses!<</if>></span>
			<</switch>>
			<<molested>><<controlloss>>
		<</if>>
	<</if>>
<</if>>

<<if $mouthaction is "ask" and $askAction is "novaginal">>
	<<set $mouthaction to 0>><<unset $askAction>><<set _sound to 1>>
	<<if $neckuse is "hand" and $oxygen lt $oxygenmax and $asphyxiaLvl gte 2>>
		<<wheeze "tell <<him>> you don't want anything penetrating your vagina">>
	<<else>>
		<<set $mouthactiondefault to "rest">><<brat 5>><<if !$gloryhole and $gamemode isnot "soft">><<seductionskillusecombat>><</if>>
		<<if $player.virginity.vaginal is true>>
			You tell <<him>> you don't want anything penetrating your vagina, you are a virgin after all.
		<<else>>
			You tell <<him>> you don't want anything penetrating your vagina.
		<</if>>
		<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $seductionskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100) or $gamemode is "soft" or $gloryhole>>
			<<set $novaginal to 1>><span class="green">They nod in acknowledgement.</span>
			<<if $vaginastate is "penetrated">>
				<<set $vaginastate to "entrance">>
				<<if $NPCList[$vaginatarget].penis is "vagina">>
					<<personselect $vaginatarget>>
					<<set $NPCList[$vaginatarget].penis to "vaginaentrance">>The <<person>> withdraws <<his>> penis from your vagina.
				<</if>>
			<</if>>
		<<else>>
			<<set $consensual to 0>>
			<<if $NPCList[0].type is "plant">>
				<<He>> scoffs. <span class="red">"Are you kidding? That's the fun part!"</span>
			<<else>>
				They pause a moment before responding, <span class="red">"Stupid slut, you think you can tell me what to do?"</span>
			<</if>>
			<<molested>><<controlloss>>
		<</if>>
	<</if>>
<</if>>

<<if $mouthaction is "ask" and $askAction is "noanal">>
	<<set $mouthaction to 0>><<unset $askAction>><<set _sound to 1>>
	<<if $neckuse is "hand" and $oxygen lt $oxygenmax and $asphyxiaLvl gte 2>>
		<<wheeze "tell <<him>> you don't want anything inside your anus">>
	<<else>>
		<<set $mouthactiondefault to "rest">><<brat 5>><<if !$gloryhole and $gamemode isnot "soft">><<seductionskillusecombat>><</if>>
		<<if $player.virginity.anal is true>>
			You tell <<him>> you don't want anything inside your anus, it's dirty there!
		<<else>>
			You tell <<him>> you don't want anything penetrating your anus.
		<</if>>
		<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $seductionskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100) or $gamemode is "soft" or $gloryhole>>
			<<set $noanal to 1>><span class="green">They nod in acknowledgement.</span>
			<<if $anusstate is "penetrated">>
				<<set $anusstate to "entrance">>
				<<if $NPCList[$anustarget].penis is "anus">>
					<<personselect $anustarget>>
					<<set $NPCList[$anustarget].penis to "anusentrance">>The <<person>> withdraws <<his>> penis from your anus.
				<</if>>
			<</if>>
		<<else>>
			<<set $consensual to 0>>
			<<if $NPCList[0].type is "plant">>
				<<He>> scoffs. <span class="red">"Are you kidding? That's the fun part!"</span>
			<<else>>
				They pause a moment before responding, <span class="red">"Stupid slut, you think you can tell me what to do?"</span>
			<</if>>
			<<molested>><<controlloss>>
		<</if>>
	<</if>>
<</if>>

<<if $mouthaction is "ask" and $askAction is "nopenile">>
	<<set $mouthaction to 0>><<unset $askAction>><<set _sound to 1>>
	<<if $neckuse is "hand" and $oxygen lt $oxygenmax and $asphyxiaLvl gte 2>>
		<<wheeze "tell <<him>> you don't want your penis put inside anything">>
	<<else>>
		<<set $mouthactiondefault to "rest">><<brat 5>><<if !$gloryhole and $gamemode isnot "soft">><<seductionskillusecombat>><</if>>
		<<if $player.virginity.penile is true>>
			You tell <<him>> you don't want your penis put inside anything, you are a virgin after all.
		<<else>>
			You tell <<him>> you don't want your penis put inside anything.
		<</if>>
		<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $seductionskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100) or $gamemode is "soft" or $gloryhole>>
			<<set $nopenile to 1>><span class="green">They nod in acknowledgement.</span>
			<<if $penisstate is "penetrated">>
				<<set $penisstate to "entrance">>
				<<if $NPCList[$penistarget].vagina is "penis">>
					<<personselect $penistarget>>
					<<set $NPCList[$penistarget].vagina to "penisentrance">>The <<person>> frees your penis from <<his>> vagina.
				<</if>>
			<</if>>
			<<if $penisstate is "otheranus">>
				<<set $penisstate to "otheranusentrance">>
				<<if $NPCList[$penistarget].penis is "otheranus">>
					<<personselect $penistarget>>
					<<set $NPCList[$penistarget].penis to "otheranusentrance">>The <<person>> frees your penis from <<his>> anus.
				<</if>>
			<</if>>
			<<if $penisstate is "othermouth">>
				<<set $penisstate to "othermouthentrance">>
				<<if $NPCList[$penistarget].mouth is "penis">>
					<<personselect $penistarget>>
					<<set $NPCList[$penistarget].mouth to "penisentrance">>The <<person>> slips your penis out of <<his>> mouth.
				<</if>>
			<</if>>
		<<else>>
			<<set $consensual to 0>>
			<<if $NPCList[0].type is "plant">>
				<<He>> scoffs. <span class="red">"Are you kidding? That's the fun part!"</span>
			<<else>>
				They pause a moment before responding, <span class="red">"Stupid slut, you think you can tell me what to do?"</span>
			<</if>>
			<<molested>><<controlloss>>
		<</if>>
	<</if>>
<</if>>

<<if $mouthaction is "ask" and $askAction is "noupper">>
	<<set $mouthaction to 0>><<set _sound to 1>>
	<<if $neckuse is "hand" and $oxygen lt $oxygenmax and $asphyxiaLvl gte 2>>
		<<wheeze "tell <<him>> to leave your top on">>
	<<else>>
		<<set $mouthactiondefault to "rest">><<brat 5 demanding>><<if !$gloryhole and $gamemode isnot "soft">><<seductionskillusecombat>><</if>><<unset $askAction>>
		<<set $noupperasked to 1>>
		You tell <<him>> to leave your top on.

		<<if $combatgoal is "strip">>
			<span class="pink">"No," they laugh. "You'll look better without it."</span>
		<<elseif (1000 - ($rng * 10) - ($enemytrust * 10) - $seductionskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100) or $gamemode is "soft" or $gloryhole>>
			<<set $noupper to 1>><span class="green">They nod in acknowledgement.</span>
			<<for _j = 0; _j lt $enemynomax; _j++>>
				<<if $NPCList[_j].lefthand is "overupperclothes">>
					<<personselect _j>>
					<<set $NPCList[_j].lefthand to 0>>The <<person>> releases your $worn.over_upper.name.
				<<elseif $NPCList[_j].lefthand is "upperclothes">>
					<<personselect _j>>
					<<set $NPCList[_j].lefthand to 0>>The <<person>> releases your $worn.upper.name.
				<<elseif $NPCList[_j].lefthand is "underupperclothes">>
					<<personselect _j>>
					<<set $NPCList[_j].lefthand to 0>>The <<person>> releases your $worn.under_upper.name.
				<</if>>
				<<if $NPCList[_j].righthand is "overupperclothes">>
					<<personselect _j>>
					<<set $NPCList[_j].righthand to 0>>The <<person>> releases your $worn.over_upper.name.
				<<elseif $NPCList[_j].righthand is "upperclothes">>
					<<personselect _j>>
					<<set $NPCList[_j].righthand to 0>>The <<person>> releases your $worn.upper.name.
				<<elseif $NPCList[_j].righthand is "underupperclothes">>
					<<personselect _j>>
					<<set $NPCList[_j].righthand to 0>>The <<person>> releases your $worn.under_upper.name.
				<</if>>
			<</for>>
		<<else>>
			<<set $consensual to 0>>
			<<if $NPCList[0].type is "plant">>
				<<He>> scoffs. <span class="red">"Are you kidding? That's the fun part!"</span>
			<<else>>
				They pause a moment before responding, <span class="red">"Stupid slut, you think you can tell me what to do?"</span>
			<</if>>
			<<molested>><<controlloss>>
		<</if>>
	<</if>>
<</if>>

<<if $mouthaction is "ask" and $askAction is "nochoke">>
	<<set $mouthaction to 0>><<unset $askAction>><<set _sound to 1>>
	<<if $neckuse is "hand" and $oxygen lt $oxygenmax and $asphyxiaLvl gte 2>>
		<<wheeze "tell <<him>> you don't want to be choked">>
	<<else>>
		<<set $mouthactiondefault to "rest">><<brat 5>><<if !$gloryhole and $gamemode isnot "soft">><<seductionskillusecombat>><</if>>
		You tell <<him>> you don't want <<his>> hands around your neck.
		<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $seductionskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100) or $gamemode is "soft" or $gloryhole>>
			<<set $nochoke to 1>><span class="green">They nod in acknowledgement.</span>
			<<if $neckuse is "hand">>
				<<unset $neckuse>>
				<<for _j = 0; _j lt $enemynomax; _j++>>
					<<if $NPCList[_j].lefthand is "throat" or $NPCList[_j].righthand is "throat">>
						<<personselect _j>>
						<<if $NPCList[_j].lefthand is "throat">><<set $NPCList[_j].lefthand to 0>><</if>>
						<<if $NPCList[_j].righthand is "throat">><<set $NPCList[_j].righthand to 0>><</if>>
						The <<person>> releases your neck.
					<</if>>
				<</for>>
			<</if>>
		<<else>>
			<<set $consensual to 0>>
			<<if $NPCList[0].type is "plant">>
				<<He>> scoffs.
				<<if $NPCList[0].lefthand is 0 or $NPCList[0].righthand is 0>>
					<span class="red">Are you kidding? That's the fun part! Here, look!"</span>
				<<else>>
					<span class="red">Are you kidding? That's the fun part!"</span>
				<</if>>
			<<else>>
				They pause a moment before responding, <span class="red">"Stupid slut, you think you can tell me what to do?"</span>
			<</if>>
			<<molested>><<controlloss>>
			<<for _j = 0; _j lt $enemynomax; _j++>>
				<<if $NPCList[_j].lefthand is 0>>
					<<personselect _j>>
					<<set $NPCList[_j].lefthand to "throat">>
					<<set $neckuse to "hand">>
					<span class="red">The <<person>> immediately grabs your neck with <<his>> free hand.</span>
					<<break>>
				<<elseif $NPCList[_j].righthand is 0>>
					<<personselect _j>>
					<<set $NPCList[_j].lefthand to "throat">>
					<<set $neckuse to "hand">>
					<span class="red">The <<person>> immediately grabs your neck with <<his>> free hand.</span>
					<<break>>
				<</if>>
			<</for>>
		<</if>>
	<</if>>
<</if>>

<<if $mouthaction is "ask" and $askAction is "condoms">>
	<<set $mouthaction to 0>><<unset $askAction>><<set _sound to 1>>
	<<if $neckuse is "hand" and $oxygen lt $oxygenmax and $asphyxiaLvl gte 2>>
		<<wheeze "tell <<him>> to use condoms">>
	<<else>>
		<<set $mouthactiondefault to "rest">><<sub 2>><<if !$gloryhole and $gamemode isnot "soft">><<seductionskillusecombat>><</if>>
		<<set $condomAsk to true>>
		You tell <<him>> you want to use condoms.
		<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $seductionskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100) or $gamemode is "soft" or $gloryhole>>
			<<if $consensual is 0>>
				<<set $condomUse to true>>
				They pause a moment before responding,
				<<set _response to [
					"Sure thing, slut.",
					"Yeah, you probably have something contagious.",
					"Last thing I want is a brat with my name on it.",
					"Fine, but I expect you to cooperate.",
					"Good idea, I don't want any evidence traced back to me."
				]>>
				<span class="green">"<<print _response.pluck()>>"</span>
			<<else>>
				<<for _j = 0; _j lt $enemynomax; _j++>>
					<<if $NPCList[_j].pregnancyAvoidance is undefined>>
					<<elseif $NPCList[_j].pregnancyAvoidance lt random(1, 100)>>
						<<set _npcReject to true>>
					<</if>>
				<</for>>
				<<if _npcReject>>
					<<set $condomUse to false>>
					<<switch $npc>>
						<<case "Kylar">><span class="lewd"><<He>> says, "B-but why? We're going to have many children. We should start now."</span>
						<<default>><span class="lewd"><<He>> says, "It's a safe day for me, don't worry about it."</span>
					<</switch>>
				<<else>>
					<<set $condomUse to true>>
					<span class="green">They nod in acknowledgement.</span>
				<</if>>
			<</if>>
			<<if $condomUse>>
				/*Your penis*/
				<<if $penisstate is "entrance" or $penisstate is "imminent" or $penisstate is "otheranusentrance" or $penisstate is "otheranusimminent">>
					<<if ($NPCList[$penistarget].vagina is "penis" or $NPCList[$penistarget].penis is "otheranus") and !$player.condom and $parasite.penis.name is undefined>>
						<<personselect $penistarget>>
						<span class="green">The <<person>> slips a condom onto your penis.</span>
						<<equipCondom>>
					<</if>>
				<</if>>
				<<if $penisstate is "penetrated">>
					<<if $NPCList[$penistarget].vagina is "penis" and !$player.condom and $parasite.penis.name is undefined>>
						<<personselect $penistarget>>
						<span class="green">The <<person>> briefly frees your penis from <<his>> vagina, slips a condom on, and slides it back in.</span>
						<<equipCondom>>
					<</if>>
				<</if>>
				<<if $penisstate is "otheranus">>
					<<if $NPCList[$penistarget].penis is "otheranus" and !$player.condom and $parasite.penis.name is undefined>>
						<<personselect $penistarget>>
						<span class="green">The <<person>> briefly frees your penis from <<his>> anus, slips a condom on, and slides it back in.</span>
						<<equipCondom>>
					<</if>>
				<</if>>
				/*Their penis*/
				<<if $vaginastate is "entrance" or $vaginastate is "imminent">>
					<<if ($NPCList[$vaginatarget].penis is "vaginaentrance" or $NPCList[$vaginatarget].penis is "vaginaimminent") and $NPCList[$vaginatarget].condom is false>>
						<<personselect $vaginatarget>>
						<span class="green">The <<person>> slips a condom onto <<his>> penis.</span>
						<<equipCondom $vaginatarget>>
					<</if>>
				<</if>>
				<<if $vaginastate is "penetrated">>
					<<if $NPCList[$vaginatarget].penis is "vagina" and $NPCList[$vaginatarget].condom is false>>
						<<personselect $vaginatarget>>
						<span class="green">The <<person>> briefly withdraws <<his>> penis from your vagina, slips a condom on, and slides it back in.</span>
						<<equipCondom $vaginatarget>>
					<</if>>
				<</if>>
				<<if $anusstate is "entrance" or $anusstate is "imminent">>
					<<if ($NPCList[$anustarget].penis is "anusentrance" or $NPCList[$anustarget].penis is "anusimminent") and $NPCList[$anustarget].condom is false>>
						<<personselect $anustarget>>
						<span class="green">The <<person>> slips a condom onto <<his>> penis.</span>
						<<equipCondom $anustarget>>
					<</if>>
				<</if>>
				<<if $anusstate is "penetrated">>
					<<if $NPCList[$anustarget].penis is "anus" and $NPCList[$anustarget].condom is false>>
						<<personselect $anustarget>>
						<span class="green">The <<person>> briefly withdraws <<his>> penis from your anus, slips a condom on, and slides it back in.</span>
						<<equipCondom $anustarget>>
					<</if>>
				<</if>>
			<</if>>
		<<else>>
			<<set $condomUse to false>>
			<<if $consensual is 1>>
				<<set $consensual to 0>>
				<<molested>><<controlloss>>
			<</if>>
			<<set _response to [
				"Stupid slut, you think you can tell me what to do?",
				"You're not in charge here, slut.",
				"You should feel lucky if I knock you up.",
				"I think I'll leave you with a parting gift, actually.",
				"Hah! You wish!"
			]>>
			They pause a moment before responding,
			<span class="red">"<<print _response.pluck()>>"</span>
		<</if>>
	<</if>>
<</if>>

<<if $mouthaction is "ask" and $askAction is "noCondoms">>
	<<set $mouthaction to 0>><<unset $askAction>><<set _sound to 1>>
	<<if $neckuse is "hand" and $oxygen lt $oxygenmax and $asphyxiaLvl gte 2>>
		<<wheeze "tell <<him>> to not use condoms">>
	<<else>>
		<<set $mouthactiondefault to "rest">><<sub 2>><<if !$gloryhole and $gamemode isnot "soft">><<seductionskillusecombat>><</if>>
		<<set $condomAsk to true>>
		You tell <<him>> you do not want to use condoms.
		<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $seductionskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100) or $gamemode is "soft" or $gloryhole>>
			<<if $consensual is 0>>
				They pause a moment before responding,
				<<set _response to [
					"Sure thing, slut.",
					"Yeah, you probably have something contagious.",
					"Last thing I want is an unclaimed brat with my name on it.",
					"Fine, but I expect you to cooperate.",
					"Good idea, I don't want any evidence traced back to me."
				]>>
				<span class="green">"<<print _response.pluck()>>"</span>
				<<set $condomUse to false>>
			<<else>>
				<<if $npc and $NPCList[0].pregnancyAvoidance gt random(0, 99)>>
					<<set _npcReject to true>>
				<</if>>
				<<if _npcReject>>
					<<set $condomUse to true>>
					<<switch $npc>>
						<<default>><span class="lewd"><<He>> says, "I'm not ready for children, it's better to be safe than sorry."</span>
					<</switch>>
					/*Your penis*/
					<<if $penisstate is "entrance" or $penisstate is "imminent" or $penisstate is "otheranusentrance" or $penisstate is "otheranusimminent">>
						<<if ($NPCList[$penistarget].vagina is "penis" or $NPCList[$penistarget].penis is "otheranus") and !$player.condom and $parasite.penis.name is undefined>>
							<<personselect $penistarget>>
							<span class="green">The <<person>> slips a condom onto your penis.</span>
							<<equipCondom>>
						<</if>>
					<</if>>
					<<if $penisstate is "penetrated">>
						<<if $NPCList[$penistarget].vagina is "penis" and !$player.condom and $parasite.penis.name is undefined>>
							<<personselect $penistarget>>
							<span class="green">The <<person>> briefly frees your penis from <<his>> vagina, slips a condom on, and slides it back in.</span>
							<<equipCondom>>
						<</if>>
					<</if>>
					<<if $penisstate is "otheranus">>
						<<if $NPCList[$penistarget].penis is "otheranus" and !$player.condom and $parasite.penis.name is undefined>>
							<<personselect $penistarget>>
							<span class="green">The <<person>> briefly frees your penis from <<his>> anus, slips a condom on, and slides it back in.</span>
							<<equipCondom>>
						<</if>>
					<</if>>
					/*Their penis*/
					<<if $vaginastate is "entrance" or $vaginastate is "imminent">>
						<<if ($NPCList[$vaginatarget].penis is "vaginaentrance" or $NPCList[$vaginatarget].penis is "vaginaimminent") and $NPCList[$vaginatarget].condom is false>>
							<<personselect $vaginatarget>>
							<span class="green">The <<person>> slips a condom onto <<his>> penis.</span>
							<<equipCondom $vaginatarget>>
						<</if>>
					<</if>>
					<<if $vaginastate is "penetrated">>
						<<if $NPCList[$vaginatarget].penis is "vagina" and $NPCList[$vaginatarget].condom is false>>
							<<personselect $vaginatarget>>
							<span class="green">The <<person>> briefly withdraws <<his>> penis from your vagina, slips a condom on, and slides it back in.</span>
							<<equipCondom $vaginatarget>>
						<</if>>
					<</if>>
					<<if $anusstate is "entrance" or $anusstate is "imminent">>
						<<if ($NPCList[$anustarget].penis is "anusentrance" or $NPCList[$anustarget].penis is "anusimminent") and $NPCList[$anustarget].condom is false>>
							<<personselect $anustarget>>
							<span class="green">The <<person>> slips a condom onto <<his>> penis.</span>
							<<equipCondom $anustarget>>
						<</if>>
					<</if>>
					<<if $anusstate is "penetrated">>
						<<if $NPCList[$anustarget].penis is "anus" and $NPCList[$anustarget].condom is false>>
							<<personselect $anustarget>>
							<span class="green">The <<person>> briefly withdraws <<his>> penis from your anus, slips a condom on, and slides it back in.</span>
							<<equipCondom $anustarget>>
						<</if>>
					<</if>>
				<<else>>
					<span class="green">They nod in acknowledgement.</span>
					<<set $condomUse to false>>
				<</if>>
			<</if>>
		<<else>>
			<<set $condomUse to null>>
			<<if $consensual is 1>>
				<<set $consensual to 0>>
				<<molested>><<controlloss>>
			<</if>>
			<<set _response to [
				"Stupid slut, you think you can tell me what to do?",
				"You're not in charge here, slut.",
				"I'll do what I want, slut."
			]>>
			They pause a moment before responding,
			<span class="red">"<<print _response.pluck()>>"</span>
		<</if>>
	<</if>>
<</if>>

/*Stalked actions */
<<if !$stalk_end>>
	<<if $mouthaction is "up">>
		<<set $mouthaction to 0>><<set $mouthactiondefault to "up">>
		<<if $control gte 100>>
			You keep your chin up, and head proud.
		<<elseif $control gte 80>>
			You keep you head up and eyes focused on the path ahead.
		<<elseif $control gte 60>>
			You keep your eyes fixed on the path ahead.
		<<elseif $control gte 40>>
			You keep your eyes ahead, resisting the urge to look around for threats.
		<<elseif $control gte 20>>
			You keep your head up, your eyes searching the path ahead for danger.
		<<else>>
			You keep your head up, but close your eyes in fear.
		<</if>>
		<<brat 3>>
	<</if>>

	<<if $mouthaction is "down">>
		<<set $mouthaction to 0>><<set $mouthactiondefault to "down">>
		<<if $control gte 100>>
			You look at the ground in front of you.
		<<elseif $control gte 80>>
			You watch the ground in front of you.
		<<elseif $control gte 60>>
			You keep your head down, hoping not to be noticed.
		<<elseif $control gte 40>>
			You keep your head down, and hope nothing is watching.
		<<elseif $control gte 20>>
			You keep your head down, and tell yourself the path is safe.
		<<else>>
			You bow your head in fear.
		<</if>>
		<<meek 3>>
	<</if>>

	<<if $mouthaction is "turn">>
		<<set $mouthaction to 0>><<set $mouthactiondefault to "turn">>
		You glance over your shoulder.
		You see a <<person1>><<person>> following you.
		<<He>> moves with
		<<if $NPCList[0].skills.athletics gte 800>>
			<span class="pink">an energetic stride</span>
		<<elseif $NPCList[0].skills.athletics gte 600>>
			<span class="purple">a motivated pace</span>
		<<elseif $NPCList[0].skills.athletics gte 400>>
			<span class="blue">a calm gait</span>
		<<elseif $NPCList[0].skills.athletics gte 200>>
			<span class="lblue">a lazy ramble</span>
		<<else>>
			<span class="teal">a slothful shuffle</span>
		<</if>>
		and
		<<if $NPCList[0].skills.security gte 800>>
			<span class="pink">has a devious glint in <<his>> eyes.</span>
		<<elseif $NPCList[0].skills.security gte 600>>
			<span class="purple">looks focused.</span>
		<<elseif $NPCList[0].skills.security gte 400>>
			<span class="blue">looks relaxed.</span>
		<<elseif $NPCList[0].skills.security gte 200>>
			<span class="lblue">seems distracted.</span>
		<<else>>
			<span class="teal">appears to be daydreaming.</span>
		<</if>>
		<<set $stalk_assess to true>>
	<</if>>
<</if>>

/*End of stalked actions */

/***
*    ███████ ██   ██ ███████ ███████ ██   ██
*    ██   ██ ██   ██ ██      ██       ██ ██
*    ███████ ██   ██ ███████ ███████   ███
*    ██      ██   ██      ██      ██   ███
*    ██       █████  ███████ ███████   ███
*
*/
<<if $newtarget isnot undefined>>
	<<setnewtarget>>
<</if>>

<<set $rng to random(1, 100)>>

<<if $vaginaaction is "penisthighs">>
	<<set $vaginaaction to 0>><<meek 1 $vaginatarget>><<thighskilluse>><<set $vaginaactiondefault to "penisthighs">><<combatpromiscuity4>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $thighskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<set $thighactiondefault to "rub">>
		<<personselect $vaginatarget>>
		<span class="lblue">You <<thightext>> grab <<his>> $NPCList[$vaginatarget].penisdesc between your thighs.</span>
		<<set $NPCList[$vaginatarget].penis to "thighs">><<set $thightarget to $vaginatarget>>
		<<set $vaginause to 0>><<set $thighuse to "penis">><<thighstat>><<sex 5 $vaginatarget>><<set $vaginastate to 0>>
	<<else>>
		You try to hold <<hisselect $vaginatarget>> penis between your thighs, but <<he>> is intent on your pussy.
	<</if>>
<</if>>

<<set $rng to random(1, 100)>>
<<effectsvaginatopenis>>
<<set $rng to random(1, 100)>>
<<effectsvaginatovagina>>
<<set $rng to random(1, 100)>>
<<effectsvaginapenisfuck>>
<<set $rng to random(1, 100)>>
<<effectsvaginatovaginafuck>>
<<set $rng to random(1, 100)>>
<<effectsvaginapenisdoublefuck>>
<<set $rng to random(1, 100)>>
<<effectsvaginatopenisdouble>>

<<if $vaginaaction is "rest">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "rest">>
<</if>>

<<set $rng to random(1, 100)>>

<<if $vaginaaction is "penisanus">>
	<<if $anusstate isnot 0 and $anusstate is "entrance" or $anusstate is "imminent">>
		<<if $analdoubledisable is "f">>
			<<set $vaginaaction to "penisanusdouble">>
		<<else>>
			You give your <<bottom>> a little wiggle, but receive a slap.
			<<violence 2>><<hitstat>><<bruise bottom>>
		<</if>>
	<<elseif $anusstate isnot 0 and $anusstate.includes("double")>>
		You give your <<bottom>> a little wiggle, but receive a slap. "Settle down, <<bitch>>."
		<<violence 2>><<hitstat>><<bruise bottom>>
	<<else>>
		<<set $vaginaaction to 0>><<meek 5 $vaginatarget>><<analskilluse>><<set $vaginaactiondefault to "penisanus">>
		<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $analskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
			<<personselect $vaginatarget>>
			<span class="blue">You give your <<bottom>> a little wiggle, <<combatperson>> responds to the provocation and moves <<his>> penis in front of your butt.</span>
			<<if $NPCList[$vaginatarget].type is "plant" and $NPCList[$vaginatarget].penissize gte 4>>
				<span class="red">Something about it scares you.</span>
			<</if>>
			<<submission 2 $vaginatarget>><<set $anususe to "penis">><<set $NPCList[$vaginatarget].penis to "anusentrance">><<set $vaginause to 0>><<set $anusstate to "entrance">><<set $vaginastate to 0>>
		<<else>>
			You give your <<bottom>> a little wiggle, but you just receive a slap.
			<<violence 2>><<hitstat>><<bruise bottom>>
		<</if>>
	<</if>>
<</if>>

<<set $rng to random(1, 100)>>
<<if $vaginaaction is "penisanusdvp">>
	<<if $anusstate isnot 0 and $anusstate is "entrance" or $anusstate is "imminent">>
		<<if $analdoubledisable is "f" and  random(0,2) isnot 0 and $awareness gte 300>>
			<<set $vaginaaction to "penisanusdouble">>
		<<else>>
			You give your <<bottom>> a little wiggle, but receive a slap.
			<<violence 2>><<hitstat>><<bruise bottom>>
		<</if>>
	<<elseif $anusstate isnot 0 and $anusstate.includes("double")>>
		You give your <<bottom>> a little wiggle, but receive a slap. "Settle down, <<bitch>>."
		<<violence 2>><<hitstat>><<bruise bottom>>
	<<else>>
		<<set $vaginaaction to 0>><<meek 5>><<analskilluse>><<set $vaginaactiondefault to "penisanusdvp">>
		<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $analskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>

			<<set _npcA to ($NPCList[$vaginatarget].penis is "vaginadoubleentrance" ? $vaginatarget : $vaginadoubletarget)>>
			<<set _npcB to ($NPCList[$vaginatarget].penis is "vaginadoubleentrance" ? $vaginadoubletarget : $vaginatarget)>>

			<<if $NPCList[_npcB].penis is "vaginadouble">>
				<<set $NPCList[_npcB].penis to "vagina">>
				<<set $vaginastate to "penetrated">>
			<<elseif $NPCList[_npcB].penis is "vaginadoubleimminent">>
				<<set $NPCList[_npcB].penis to "vaginaimminent">>
				<<set $vaginastate to "imminent">>
			<<elseif $NPCList[_npcB].penis is "vaginadoubleentrance">>
				<<set $NPCList[_npcB].penis to "vaginaentrance">>
				<<set $vaginastate to "entrance">>
			<</if>>
			<<personselect _npcA>>
			<span class="blue">You give your <<bottom>> a little wiggle, <<combatperson>> responds to the provocation and moves <<his>> penis in front of your butt.</span>
			<<if $NPCList[_npcA].type is "plant" and $NPCList[_npcA].penissize gte 4>>
				<span class="red">Something about it scares you.</span>
			<</if>>
			<<submission 2>><<set $anususe to "penis">><<set $NPCList[_npcA].penis to "anusentrance">><<set $vaginause to "penis">><<set $anusstate to "entrance">>

		<<else>>
			You give your <<bottom>> a little wiggle, but you just receive a slap.
			<<violence 2>><<hitstat>><<bruise bottom>>
		<</if>>
	<</if>>
<</if>>

<<set $rng to random(1, 100)>>
<<if $vaginaaction is "penisanusdouble">>
	<<set $vaginaaction to 0>><<meek 5 $vaginatarget>><<analskilluse>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $analskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<personselect $vaginatarget>><<set $vaginaactiondefault to "rest">>
		<span class="blue">You give your <<bottom>> a little wiggle, <<combatperson>> responds to the provocation and moves <<his>> penis to join the phallus in front of your butt.</span>
		<<submission 2 $vaginatarget>>
		<<set $anususe to "penisdouble">><<set $anusstate to "doubleentrance">><<set $vaginause to 0>><<set $vaginastate to 0>>
		<<set $NPCList[$vaginatarget].penis to "anusdoubleentrance">>
		<<set $anusdoubletarget to $vaginatarget>>
		<<if $NPCList[$anustarget].penis is "anus">>
			<<set $NPCList[$anustarget].penis to "anusdouble">>
		<<elseif $NPCList[$anustarget].penis is "anusimminent">>
			<<set $NPCList[$anustarget].penis to "anusdoubleimminent">>
		<<elseif $NPCList[$anustarget].penis is "anusentrance">>
			<<set $NPCList[$anustarget].penis to "anusdoubleentrance">>
		<<elseif $NPCList[$anustarget].penis is "cheeks">>
			<<set $NPCList[$anustarget].penis to "anusentrance">>
			<<set $bottomuse to 0>> /* Issues with ass cheeks likely stem from this culprit right here */
		<</if>>
		<<set $NPCList[$anustarget].location.genitals to "genitals">>
	<<else>>
		You give your <<bottom>> a little wiggle, but you just receive a slap.
		<<violence 2>><<hitstat>><<bruise bottom>><<set $vaginaactiondefault to "penisanusdouble">>
	<</if>>
<</if>>

<<if $vaginaaction is "penistease">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "penistease">><<actionspenistip $vaginatarget>><<sex 5 $vaginatarget>><<vaginalskilluse>>
<</if>>

<<if $vaginaaction is "penisdoubletease">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "penistease">><<actionspenisdoubletip>><<sex 5>><<vaginalskilluse>>
<</if>>

<<if $vaginaaction is "doublecooperate">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "doublecooperate">><<actionspenisdoubleride>><<submission 20>><<vaginalskilluse>>
<</if>>

<<if $vaginaaction is "penisDoubleEdging">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "penisDoubleEdging">><<actionspenisdoubleedging>><<submission 5>><<sexControl 5 $vaginalskill>><<vaginalskilluse>><<combatpromiscuity4>>
<</if>>

<<if $vaginaaction is "doubletake">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "doubletake">><<actionspenisdoubletake>>
<</if>>

<<if $vaginaaction is "rub">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "rub">><<actionspenisrub $vaginatarget>><<sex 10 $vaginatarget>><<vaginalskilluse>>
<</if>>

<<if $vaginaaction is "cooperate">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "cooperate">><<actionspenisride $vaginatarget>><<submission 20 $vaginatarget>><<vaginalskilluse>>
<</if>>

<<if $vaginaaction is "penisEdging">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "penisEdging">><<actionspenisedging $vaginatarget>><<submission 5 $vaginatarget>><<sexControl 5 $vaginalskill $vaginatarget>><<vaginalskilluse>><<combatpromiscuity4>>
<</if>>

<<if $vaginaaction is "take">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "take">><<actionspenistake $vaginatarget>>
<</if>>

<<if $vaginaaction is "tribtease">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "tribtease">><<actionstribtease $vaginatarget>><<sex 10 $vaginatarget>><<vaginalskilluse>>
<</if>>

<<if $vaginaaction is "tribcooperate">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "tribcooperate">><<actionstribcooperate $vaginatarget>><<submission 20 $vaginatarget>><<vaginalskilluse>>
<</if>>

<<if $vaginaaction is "tribtake">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "tribtake">><<actionstribtake $vaginatarget>>
<</if>>

<<if $vaginaaction is "tribrest">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "rest">>
<</if>>

<<if $vaginaaction is "tribescape">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "tribescape">><<actionstribescape $vaginatarget>><<brat 10 $vaginatarget>>
	<<if $vaginastate is "othervagina">>
		<<set $vaginastate to "othervaginaimminent">>
	<<else>>
		<<set $vaginastate to "othervaginaentrance">>
	<</if>>
	<<if $NPCList[$vaginatarget].vagina is "vagina">>
		<<set $NPCList[$vaginatarget].vagina to "vaginaimminent">>
	<<elseif $NPCList[$vaginatarget].vagina is "vaginaimminent">>
		<<set $NPCList[$vaginatarget].vagina to "vaginaentrance">>
	<</if>>
<</if>>

<<if $vaginaaction is "escape">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "escape">><<actionsvaginaescape $vaginatarget>><<set $vaginause to "penis">><<set $vaginastate to "entrance">>
	<<set $NPCList[$vaginatarget].penis to "vaginaentrance">><<set $NPCList[$vaginatarget].speechvaginaescape to 1>>
	<<if $NPCList[$vaginatarget].penissize gte 5>>
		<<brat 35 $vaginatarget>>
	<<elseif $NPCList[$vaginatarget].penissize is 4>>
		<<brat 30 $vaginatarget>>
	<<elseif $NPCList[$vaginatarget].penissize is 3>>
		<<brat 25 $vaginatarget>>
	<<elseif $NPCList[$vaginatarget].penissize is 2>>
		<<brat 20 $vaginatarget>>
	<<elseif $NPCList[$vaginatarget].penissize is 1>>
		<<brat 15 $vaginatarget>>
	<<else>>
		<<brat 10 $vaginatarget>>
	<</if>>
<</if>>

<<if $vaginaaction is "doubleescape">>
	<<set $anusaction to 0>>
	<<set $vaginaactiondefault to "doubleescape">><<actionsanusdoubleescape>><<brat 10>><<set $vaginause to "penisdouble">><<set $vaginastate to "doubleentrance">>
	<<set $enemyanger += 5>>
	<<set _otherNPCindex to "f">>
	<<set _actiontext to "You escape ">>
	<<set _npcA to $vaginatarget>>
	<<set _npcB to $vaginadoubletarget>>

	<<if $NPCList[_npcA].penis is "vaginadoubleimminent">>
		<<set $NPCList[_npcA].penis to "vaginadoubleentrance">><<set $NPCList[_npcA].speechvaginaescape to 1>>

	<<elseif $NPCList[_npcA].penis is "vaginadoubleentrance" and random(0,3) is 0>> /* Chance to drop one of them and switch to regular anal */
		<<set _otherNPCindex to _npcB>><<set $NPCList[_npcA].location.genitals to 0>><<set $NPCList[_npcA].speechvaginaescape to 1>><<set $enemyanger += 15>>
		<<set $NPCList[_npcA].penis to 0>>
		<span class="green"> <<print _actiontext + ($npc_named isnot 1 ? "the " : "") + $NPCList[_npcA].fullDescription + "'s " + $NPCList[_npcA].penisdesc + ".">></span>
	<</if>>
	<<if $NPCList[_npcB].penis is "vaginadoubleimminent">>
		<<set $NPCList[_npcB].penis to "vaginadoubleentrance">><<set $NPCList[_npcB].speechvaginaescape to 1>>
		
	<<elseif $NPCList[_npcB].penis is "vaginadoubleentrance" and random(0,3) is 0>> /* Chance to drop one of them and switch to regular vaginal */
		<<set _otherNPCindex to _npcA>><<set $NPCList[_npcB].location.genitals to 0>><<set $NPCList[_npcB].speechanusescape to 1>><<set $enemyanger += 15>>
		<<set $NPCList[_npcB].penis to 0>>
		<span class="green"> <<print _actiontext + ($npc_named isnot 1 ? "the " : "") +  $NPCList[_npcB].fullDescription + "'s " + $NPCList[_npcB].penisdesc + ".">></span>
	<</if>>

	<<if _otherNPCindex isnot "f" and $NPCList[_otherNPCindex].penis isnot 0 and $NPCList[_otherNPCindex].penis.includes("double")>>
		<<set $vaginause to "penis">>
		<<switch $NPCList[_otherNPCindex].penis>>
			<<case "vaginadouble">>
				<<set $NPCList[_otherNPCindex].penis to "vagina">>
				<<set $vaginastate to "penetrated">>
			<<case "vaginadoubleentrance">>
				<<set $NPCList[_otherNPCindex].penis to "vaginaentrance">>
				<<set $vaginastate to "entrance">>
			<<case "vaginadoubleimminent">>
				<<set $NPCList[_otherNPCindex].penis to "vaginaimminent">>
				<<set $vaginastate to "imminent">>
		<</switch>>
	<</if>>
<</if>>

<<if $vaginaaction is "thighbay">>
	<<set $vaginaaction to 0>><<meek 1 $vaginatarget>><<thighskilluse>><<set $vaginaactiondefault to "thighbay">><<combatpromiscuity1>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $thighskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<set $thighactiondefault to "othermouthrub">>
		<<personselect $vaginatarget>>
		<span class="lblue">You <<thightext>> press your thigh against <<his>> mouth.</span>
		<<set $NPCList[$vaginatarget].mouth to "thigh">><<set $vaginause to 0>><<thighstat>><<neutral 5 $vaginatarget>><<set $vaginastate to 0>><<set $thighuse to "mouth">>
	<<else>>
		You try to keep the mouth menacing your <<pussy>> at bay by pressing your thigh against it, but <<theowner>> has other ideas.
	<</if>>
<</if>>

<<if $vaginaaction is "othervaginarub">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "othervaginarub">><<actionsothervaginavaginarub $vaginatarget>><<sex 10 $vaginatarget>><<vaginalskilluse>>
<</if>>

<<if $vaginaaction is "othermouthtease">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "othermouthtease">><<actionsothermouthvaginatease $vaginatarget>><<sex 5 $vaginatarget>><<vaginalskilluse>>
<</if>>

<<if $vaginaaction is "othermouthrub">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "othermouthrub">><<actionsothermouthvaginarub $vaginatarget>><<sex 10 $vaginatarget>><<vaginalskilluse>>
<</if>>

<<if $vaginaaction is "othermouthcooperate">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "othermouthcooperate">><<actionsothermouthvaginathrust $vaginatarget>><<submission 20 $vaginatarget>><<vaginalskilluse>>
<</if>>

<<if $vaginaaction is "othermouthescape">>
	<<set $vaginaaction to 0>><<set $vaginaactiondefault to "othermouthescape">><<actionsothermouthvaginaescape $vaginatarget>><<brat 10 $vaginatarget>>
	<<set $vaginause to "othermouth">><<set $vaginastate to "othermouthentrance">>
	<<if $NPCList[$vaginatarget].mouth is "vaginaimminent">>
		<<set $NPCList[$vaginatarget].mouth to "vaginaentrance">>
	<</if>>
<</if>>

/***
*      ███   ██   ██ ██   ██ ███████
*     ██ ██  ███  ██ ██   ██ ██
*    ██   ██ ██ █ ██ ██   ██ ███████
*    ███████ ██  ███ ██   ██      ██
*    ██   ██ ██   ██  █████  ███████
*
*/
<<if $newtarget isnot undefined>>
	<<setnewtarget>>
<</if>>

<<set $rng to random(1, 100)>>

<<if $anusaction is "rest">>
	<<set $anusaction to 0>><<set $anusactiondefault to "rest">>
<</if>>

<<if $anusaction is "penischeeks">>
	<<set $anusaction to 0>><<meek 1 $anustarget>><<bottomskilluse>><<set $anusactiondefault to "penischeeks">><<combatpromiscuity4>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $bottomskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<set $cheekactiondefault to "rub">>
		<<personselect $anustarget>>
		<<set $NPCList[$anustarget].penis to "cheeks">><<bottomstat>><<submission 2 $anustarget>><<set $bottomuse to "penis">><<set $anususe to "penis">><<set $anusstate to "cheeks">>
		<span class="lblue">You <<bottomtext>> grab <<his>> $NPCList[$anustarget].penisdesc between your butt cheeks.</span>
	<<else>>
		You try to grab <<hisselect $anustarget>> penis between your cheeks, but <<he>> isn't interested.
	<</if>>
<</if>>

<<set $rng to random(1, 100)>>

<<if $anusaction is "penispussy">>
	<!-- Check the player is not attempting to straddle and offer pussy at the same time. If so, switch to double or fail correctly -->
	<<if $vaginastate isnot 0 and !$vaginastate.includes("double") and ($vaginastate is "entrance" or $vaginastate is "imminent" or $vaginastate is "penetrated")>>
		<!-- Note that this action requires "penispussydouble" to come after "penispussy", else it will not work as expected -->
		<<if random(0,2) isnot 0 and $vaginaldoubledisable is "f">>
			<<set $anusaction to "penispussydouble">>
		<<else>>
			You spread your thighs, but fail to garner further interest.
		<</if>>
	<<elseif $vaginastate isnot 0 and $vaginastate.includes("double")>>
		You spread your thighs, but just receive a slap. "Settle down, <<bitch>>."
		<<violence 2>><<hitstat>><<bruise bottom>>
	<<else>>
		<<set $anusaction to 0>><<meek 10 $anustarget>><<analskilluse>><<set $anusactiondefault to "penispussy">>
		<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $vaginalskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
			<<personselect $anustarget>>
			<<submission 2 $anustarget>><<set $vaginause to "penis">><<set $NPCList[$anustarget].penis to "vaginaentrance">><<set $anususe to 0>><<set $vaginastate to "entrance">><<set $anusstate to 0>>
			<span class="lblue">You spread your thighs, giving clear access to your pussy, and <<combatperson>> takes advantage and moves <<his>> penis away from your butt.</span>
		<<else>>
			You spread your thighs, but fail to garner interest.
		<</if>>
	<</if>>
<</if>>

<<if $anusaction is "penispussydap">>
	<!-- Check the player is not attempting to straddle and offer pussy at the same time. If so, switch to double or fail correctly -->
	<<if $vaginastate isnot 0 and !$vaginastate.includes("double") and $vaginastate is "entrance">>
		<!-- Note that this action requires "penispussydouble" to come after "penispussy", else it will not work as expected -->
		<<if random(0,2) isnot 0 and $vaginaldoubledisable is "f" and $awareness gte 300>>
			<<set $anusaction to "penispussydouble">>
		<<else>>
			You spread your thighs, but fail to garner further interest.
		<</if>>
	<<elseif $vaginastate isnot 0 and $vaginastate.includes("double")>>
		You spread your thighs, but just receive a slap. "Settle down, <<bitch>>."
		<<violence 2>><<hitstat>><<bruise bottom>>
	<<else>>
		<<set $anusaction to 0>><<meek 10 $anustarget>><<analskilluse>><<set $anusactiondefault to "penispussy">>
		<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $vaginalskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>

			<<set _npcA to ($NPCList[$anustarget].penis is "anusdoubleentrance" ? $anustarget : $anusdoubletarget)>>
			<<set _npcB to ($NPCList[$anustarget].penis is "anusdoubleentrance" ? $anusdoubletarget : $anustarget)>>

			<<if $NPCList[_npcB].penis is "anusdouble">>
				<<set $NPCList[_npcB].penis to "anus">>
				<<set $anusstate to "penetrated">>
			<<elseif $NPCList[_npcB].penis is "anusdoubleimminent">>
				<<set $NPCList[_npcB].penis to "anusimminent">>
				<<set $anusstate to "imminent">>
			<<elseif $NPCList[_npcB].penis is "anusdoubleentrance">>
				<<set $NPCList[_npcB].penis to "anusentrance">>
				<<set $anusstate to "entrance">>
			<</if>>
			<<personselect _npcA>>

			<<submission 2 _npcA>><<set $vaginause to "penis">><<set $NPCList[_npcA].penis to "vaginaentrance">><<set $anususe to "penis">><<set $vaginastate to "entrance">>
			<span class="lblue">You spread your thighs, giving clear access to your pussy, and <<combatperson>> takes advantage and moves <<his>> penis away from your butt.</span>
		<<else>>
			You spread your thighs, but fail to garner interest.
		<</if>>
	<</if>>
<</if>>

<<set $rng to random(1, 100)>>
<<if $anusaction is "penispussydouble">>
	<<set $anusaction to 0>><<meek 10>><<analskilluse>><<set $anusactiondefault to "penispussydouble">>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $vaginalskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<for _j = 0; _j lt $enemyno; _j++>>
			<<if $NPCList[_j].penis is "anusentrance">>
				<<personselect _j>>
				<<submission 2>><<set $vaginause to "penisdouble">><<set $NPCList[_j].penis to "vaginadoubleentrance">><<set $anususe to 0>><<set $vaginastate to "doubleentrance">><<set $anusstate to 0>>
				<span class="lblue">You spread your thighs, giving clear access to your pussy, and <<combatperson>> takes advantage and moves <<his>> penis away from your butt to join the phallus in front of your pussy.</span>
				
				<<set $vaginatarget to _n>>
				<<set $vaginadoubletarget to "f">>
				<<for _k = 0; _k lt $enemyno; _k++>>
					<<if $NPCList[_k].penis is "vagina">>
						<<set $NPCList[_k].penis to "vaginadouble">>
						<<set $vaginadoubletarget to _k>>
						<<break>>
					<<elseif $NPCList[_k].penis is "vaginaimminent">>
						<<set $NPCList[_k].penis to "vaginadoubleimminent">>
						<<set $vaginadoubletarget to _k>>
						<<break>>
					<<elseif $NPCList[_k].penis is "vaginaentrance">>
						<<set $NPCList[_k].penis to "vaginadoubleentrance">>
						<<set $vaginadoubletarget to _k>>
						<<break>>
					<</if>>
				<</for>>
				
				<<break>>
			<</if>>
		<</for>>
	<<else>>
		You spread your thighs, but fail to garner interest.
	<</if>>
<</if>>

<<set $rng to random(1, 100)>>
<<effectsanustopenis>>
<<set $rng to random(1, 100)>>
<<effectsanuspenisfuck>>
<<set $rng to random(1, 100)>>
<<effectsanustopenisdouble>>
<<set $rng to random(1, 100)>>
<<effectsanuspenisdoublefuck>>

<<if $anusaction is "bottombay">>
	<<set $anusaction to 0>><<meek 1 $anustarget>><<bottomskilluse>><<set $anusactiondefault to "bottombay">><<combatpromiscuity1>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $bottomskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<set $cheekactiondefault to "othermouthrub">>
		<<personselect $anustarget>>
		<span class="lblue">You <<bottomtext>> press your <<bottom>> against <<his>> mouth.</span>
		<<set $NPCList[$anustarget].mouth to "bottom">><<set $anususe to 0>><<bottomstat>><<neutral 5 $anustarget>><<set $anusstate to 0>><<set $bottomuse to "mouth">>
	<<else>>
		You try to keep the mouth menacing your anus at bay by pressing your <<bottom>> against it, but <<theowner>> has other ideas.
	<</if>>
<</if>>

<<if $anusaction is "othermouthtease">>
	<<set $anusaction to 0>><<set $anusactiondefault to "othermouthtease">><<actionsothermouthanustease $anustarget>><<sex 5 $anustarget>><<analskilluse>>
<</if>>

<<if $anusaction is "othermouthrub">>
	<<set $anusaction to 0>><<set $anusactiondefault to "othermouthrub">><<actionsothermouthanusrub $anustarget>><<sex 10 $anustarget>><<analskilluse>>
<</if>>

<<if $anusaction is "othermouthcooperate">>
	<<set $anusaction to 0>><<set $anusactiondefault to "othermouthcooperate">><<actionsothermouthanusthrust $anustarget>><<submission 20 $anustarget>><<analskilluse>>
<</if>>

<<if $anusaction is "othermouthescape">>
	<<set $anusaction to 0>><<set $anusactiondefault to "othermouthescape">><<actionsothermouthanusescape $anustarget>><<brat 10 $anustarget>>
	<<set $anususe to "othermouth">><<set $anusstate to "othermouthentrance">>
	<<if $NPCList[$anustarget].mouth is "anusimminent">>
		<<set $NPCList[$anustarget].mouth to "anusentrance">>
	<</if>>
<</if>>

<<if $anusaction is "penistease">>
	<<set $anusactiondefault to "penistease">><<set $cheekaction to 0>>
	You <<analtext>> tease the tip of the penis with your <<bottom>>.
	<<sex 3 $anustarget>><<analskilluse>>
<</if>>

<<if $anusaction is "penisdoubletease">>
	<<set $anusactiondefault to "penisdoubletease">><<set $cheekaction to 0>>
	You <<analtext>> tease their <<penises>> with your <<bottom>>.
	<<sex 3>><<analskilluse>>
<</if>>

<<if $anusaction is "rub">>
	<<set $anusaction to 0>><<set $anusactiondefault to "rub">><<actionsanusrub $anustarget>><<sex 10 $anustarget>>
	<<analskilluse>>
<</if>>

<<if $anusaction is "cooperate">>
	<<set $anusaction to 0>><<set $anusactiondefault to "cooperate">><<actionsanusthrust $anustarget>><<submission 15 $anustarget>><<analskilluse>>
<</if>>

<<if $anusaction is "penisEdging">>
	<<set $anusaction to 0>><<set $anusactiondefault to "penisEdging">><<actionsanusedging $anustarget>><<submission 5 $anustarget>><<sexControl 5 $analskill $anustarget>><<analskilluse>><<combatpromiscuity4>>
<</if>>

<<if $anusaction is "take">>
	<<set $anusaction to 0>><<set $anusactiondefault to "take">><<actionsanustake $anustarget>>
<</if>>

<<if $anusaction is "doubletake">>
	<<set $anusaction to 0>><<set $anusactiondefault to "doubletake">><<actionsanusdoubletake>>
<</if>>

<<if $anusaction is "escape">><<set $anusaction to 0>><<set $anusactiondefault to "escape">><<actionsanusescape $anustarget>><<brat 10 $anustarget>><<set $anususe to "penis">><<set $anusstate to "entrance">>
	<<if $NPCList[$anustarget].penis is "anusimminent">>
		<<set $NPCList[$anustarget].penis to "anusentrance">><<set $NPCList[$anustarget].speechanusescape to 1>>
	<</if>>
<</if>>

<<if $anusaction is "penisdoubletease">>
	<<set $anusactiondefault to "penisdoubletease">><<set $cheekaction to 0>>
	<<if $NPCList[$anustarget].penis is "anusdoubleentrance" and $NPCList[$anusdoubletarget].penis isnot "anusdoubleentrance">>
		You tease <<if !($npc.includes($NPCList[$anustarget].fullDescription))>>the <</if>>$NPCList[$anustarget].fullDescription's tip
		while rubbing your bowel walls against <<if !($npc.includes($NPCList[$anusdoubletarget].fullDescription))>>the <</if>>$NPCList[$anusdoubletarget].fullDescription's $NPCList[$anusdoubletarget].penisdesc.
	<<elseif $NPCList[$anustarget].penis isnot "anusdoubleentrance" and $NPCList[$anusdoubletarget].penis is "anusdoubleentrance">>
		You tease <<if !($npc.includes($NPCList[$anusdoubletarget].fullDescription))>>the <</if>>$NPCList[$anusdoubletarget].fullDescription's tip
		while rubbing your bowel walls against <<if !($npc.includes($NPCList[$anustarget].fullDescription))>>the <</if>>$NPCList[$anustarget].fullDescription's $NPCList[$anustarget].penisdesc.
	<<else>>
		You tease both the tips with your <<bottom>>.<<sex 6 $anustarget $anusdoubletarget>>
	<</if>>
	<<analskilluse>>
<</if>>

<<if $anusaction is "doubleescape">><<set $anusaction to 0>><<set $anusactiondefault to "doubleescape">><<actionsanusdoubleescape $anustarget $anusdoubletarget>><<brat 10 $anustarget $anusdoubletarget>><<set $anususe to "penisdouble">><<set $anusstate to "doubleentrance">>
	<<set $enemyanger += 5>>
	<<set _otherNPCindex to "f">>
	<<set _npcA to $anustarget>>
	<<set _npcB to $anusdoubletarget>>

	<<if $NPCList[_npcA].penis is "anusdoubleimminent">>
		<<set $NPCList[$anustarget].penis to "anusdoubleentrance">><<set $NPCList[$anustarget].speechanusescape to 1>>
		
	<<elseif $NPCList[_npcA].penis is "anusdoubleentrance" and random(0,3) is 0>> /* Chance to drop one of them and switch to regular anal */
		<<set _otherNPCindex to _npcB>><<set $NPCList[_npcA].location.genitals to 0>><<set $NPCList[_npcA].speechanusescape to 1>><<set $enemyanger += 15>>
		<<set $NPCList[_npcA].penis to 0>>
		<span class="green"> <<print _actiontext + ($npc_named isnot 1 ? "the " : "") + $NPCList[_npcA].fullDescription + "'s " + $NPCList[_npcA].penisdesc + ".">></span>
	<</if>>
	<<if $NPCList[_npcB].penis is "anusdoubleimminent">>
		<<set $NPCList[_npcB].penis to "anusdoubleentrance">><<set $NPCList[_npcB].speechanusescape to 1>>
		
	<<elseif $NPCList[_npcB].penis is "anusdoubleentrance" and random(0,3) is 0>> /* Chance to drop one of them and switch to regular anal */
		<<set _otherNPCindex to _npcA>><<set $NPCList[_npcB].location.genitals to 0>><<set $NPCList[_npcB].speechanusescape to 1>><<set $enemyanger += 15>>
		<<set $NPCList[_npcB].penis to 0>>
		<span class="green"> <<print _actiontext + ($npc_named isnot 1 ? "the " : "") +  $NPCList[_npcB].fullDescription + "'s " + $NPCList[_npcB].penisdesc + ".">></span>
	<</if>>

	<<if _otherNPCindex isnot "f" and $NPCList[_otherNPCindex].penis isnot 0 and $NPCList[_otherNPCindex].penis.includes("double")>>
		<<set $anususe to "penis">>
		<<switch $NPCList[_otherNPCindex].penis>>
		<<case "anusdouble">>
			<<set $NPCList[_otherNPCindex].penis to "anus">>
			<<set $anusstate to "penetrated">>
		<<case "anusdoubleentrance">>
			<<set $NPCList[_otherNPCindex].penis to "anusentrance">>
			<<set $anusstate to "entrance">>
		<<case "anusdoubleimminent">>
			<<set $NPCList[_otherNPCindex].penis to "anusimminent">>
			<<set $anusstate to "imminent">>
		<</switch>>
	<</if>>
<</if>>

<<if $anusaction is "doublecooperate">>
	<<set $anusaction to 0>><<set $anusactiondefault to "doublecooperate">><<actionsanusdoublethrust $anustarget $anusdoubletarget>><<submission 15 $anustarget $anusdoubletarget>><<analskilluse>>
<</if>>

<<if $anusaction is "penisDoubleEdging">>
	<<set $anusaction to 0>><<set $anusactiondefault to "penisDoubleEdging">><<actionsanusdoubleedging $anustarget $anusdoubletarget>><<submission 5 $anustarget $anusdoubletarget>><<sexControl 5 $analskill $anustarget $anusdoubletarget>><<analskilluse>><<combatpromiscuity5>>
<</if>>

<<if $anusaction is "doubletake">>
	<<set $anusaction to 0>><<set $anusactiondefault to "doubletake">><<actionsanusdoubletake $anustarget $anusdoubletarget>>
<</if>>

<<if $cheekaction is "rub" or $anusaction is "otherAnusRub">>
	<<if $cheekaction is "rub">>
		<<set $cheekaction to 0>>
	<</if>>
	<<if $anusaction is "otherAnusRub">>
		<<set $anusaction to 0>>
	<</if>>
	<<bottomskilluse>><<set $cheekactiondefault to "rub">>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $bottomskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<actionscheekrub $anustarget>><<set $cheekactiondefault to "rub">><<submission 3 $anustarget>><<bottomstat>>
	<<else>><<set $cheekactiondefault to "cheeks">>
		<<personselect $anustarget>>
		<<set $NPCList[$anustarget].penis to "anusentrance">><<set $bottomuse to 0>><<set $anusstate to "entrance">>
		<span class="blue">You try to rub <<his>> penis between your cheeks, but <<he>> is not interested.</span>
	<</if>>
<</if>>

<<if $cheekaction is "stop" or $anusaction is "otherAnusStop">>
	<<if $cheekaction is "stop">>
		<<set $cheekaction to 0>>
	<</if>>
	<<if $anusaction is "otherAnusStop">>
		<<set $anusaction to 0>>
	<</if>>
	<<set $cheekaction to 0>><<set $cheekactiondefault to "stop">>
	<<personselect $anustarget>>
	<<set $NPCList[$anustarget].penis to "anusentrance">><<set $bottomuse to 0>><<set $anusstate to "entrance">>
	<span class="blue">You stop holding <<his>> penis between your cheeks. <<He>> angles <<his>> $NPCList[$anustarget].penisdesc toward your anus.</span>
<</if>>

<<if $cheekaction is "othermouthrub" or $anusaction is "otherMouthAnusRub">>
	<<set $cheekaction to 0>><<set $cheekactiondefault to "othermouthrub">><<bottomskilluse>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $bottomskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<set $cheekactiondefault to "othermouthrub">><<bottomstat>><<sex 5 $anustarget>>
		<<actionsmouthbottomrub $anustarget>>
	<<else>>
		<<if $anususe is 0>>
			<<set $anususe to "othermouth">><<set $anusstate to "othermouthentrance">><<set $anusactiondefault to "bottombay">><<set $bottomuse to 0>>
			<<personselect $anustarget>><<set $NPCList[$anustarget].mouth to "anusentrance">>
			<span class="blue">You press your <<bottom>> against <<his>> mouth, but instead <<he>> moves <<his>> head between your cheeks.</span>
		<<else>>
			<<if $NPCList[$anustarget].penis is "othermouth">>
				<<set $NPCList[$anustarget].penis to 0>>
			<</if>>
			<<if $NPCList[$anustarget].vagina is "othermouth">>
				<<set $NPCList[$anustarget].vagina to 0>>
			<</if>>
			<span class="lblue">You press your <<bottom>> against <<his1>> mouth, but <<he>> moves <<his>> head away from you.</span>
			<<set $NPCList[$anustarget].mouth to 0>><<set $bottomuse to 0>><<set $NPCList[$anustarget].location.head to 0>>
		<</if>>
	<</if>>
<</if>>

<<if $cheekaction is "othermouthstop" or $anusaction is "otherMouthAnusStop">>
	<<set $cheekaction to 0>><<set $cheekactiondefault to "stop">><<set $bottomuse to 0>>
	<<if $anususe is 0>>
		<<personselect $anustarget>><<set $NPCList[$anustarget].mouth to "anusentrance">><<set $anusstate to "othermouthentrance">><<set $anususe to "othermouth">>
		<span class="blue">You stop pressing your <<bottom>> against <<his>> mouth.</span>
	<<else>>
		<<personselect $anustarget>>
		<<if $NPCList[$anustarget].penis is "othermouth">>
			<<set $NPCList[$anustarget].penis to 0>>
		<</if>>
		<<if $NPCList[$anustarget].vagina is "othermouth">>
			<<set $NPCList[$anustarget].vagina to 0>>
		<</if>>
		<<set $NPCList[$anustarget].mouth to 0>><<set $NPCList[$anustarget].location.head to 0>>
		<span class="blue">You stop pressing your <<bottom>> against <<his>> mouth.</span>
	<</if>>
<</if>>

/***
*    ███████ ██   ██ ███████  █████  ██   ██
*      ███   ██   ██   ███   ██      ██   ██
*      ███   ███████   ███   ██ ████ ███████
*      ███   ██   ██   ███   ██   ██ ██   ██
*      ███   ██   ██ ███████  █████  ██   ██
*
*/
<<if $newtarget isnot undefined>>
	<<setnewtarget>>
<</if>>

<<if $thighaction is "rub">>
	<<set $thighaction to 0>><<thighskilluse>><<set $thighactiondefault to "rub">>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $thighskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>><<set $thighactiondefault to "rub">>
		<<actionsthighrub $thightarget>><<thighstat>><<sex 5 $thightarget>>
	<<else>>
		<<set $thighactiondefault to "thighs">><<set $thighuse to 0>>
		<<if $vaginause is 0>><<set $vaginause to "penis">>
			<<personselect $thightarget>>
			<<set $NPCList[$thightarget].penis to "vaginaentrance">><<set $vaginastate to "entrance">>
			<span class="blue">You try to hold <<his>> penis between your thighs, but <<he>> instead angles it towards your <<genitals>>.</span>
		<<else>>
			<<personselect $thightarget>>
			<<set $NPCList[$thightarget].penis to 0>><<set $NPCList[$thightarget].location.genitals to 0>>
			<span class="blue">You try to hold <<his>> penis between your thighs, but <<he>> moves it away.</span>
		<</if>>
	<</if>>
<</if>>

<<if $thighaction is "stop">>
	<<set $thighaction to 0>><<set $thighactiondefault to "stop">>
	You stop holding <<his>> penis between your thighs.
	<<set $thighuse to 0>>
	<<if $vaginause is 0>>
		<<personselect $thightarget>>
		<<set $NPCList[$thightarget].penis to "vaginaentrance">><<set $vaginastate to "entrance">>
		<span class="blue"><<He>> angles towards your <<genitals>>.</span>
	<<else>>
		<<set $NPCList[$thightarget].penis to 0>><<set $NPCList[$thightarget].location.genitals to 0>>
	<</if>>
<</if>>

<<if $thighaction is "othermouthrub">>
	<<set $thighaction to 0>><<set $thighactiondefault to "othermouthrub">><<thighskilluse>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $thighskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<set $thighactiondefault to "othermouthrub">><<thighstat>><<sex 5 $thightarget>>
		<<actionsmouththighrub $thightarget>>
	<<else>>
		<<if $penisuse is 0 and (!$player.vaginaExist or $vaginause isnot 0 or random(0,100) gte 50)>>
			<<set $penisuse to "othermouth">><<set $penisstate to "othermouthentrance">><<set $penisactiondefault to "thighbay">><<set $thighuse to 0>>
			<<personselect $thightarget>>
			<<set $NPCList[$thightarget].mouth to "penisentrance">>
			<span class="blue">You press your thigh against <<his>> mouth, but <<he>> would prefer the main course and moves <<his>> head closer to your <<penis>>.</span>
		<<elseif $vaginause is 0>>
			<<set $vaginause to "othermouth">><<set $vaginastate to "othermouthentrance">><<set $vaginaactiondefault to "thighbay">><<set $thighuse to 0>>
			<<personselect $thightarget>>
			<<set $NPCList[$thightarget].mouth to "vaginaentrance">>
			<span class="blue">You press your thigh against <<his>> mouth, but <<he>> would prefer the main course and moves <<his>> head closer to your <<pussy>>.</span>
		<<else>>
			<<personselect $thightarget>>
			<<if $NPCList[$thightarget].penis is "othermouth">>
				<<set $NPCList[$thightarget].penis to 0>>
			<</if>>
			<<if $NPCList[$thightarget].vagina is "othermouth">>
				<<set $NPCList[$thightarget].vagina to 0>>
			<</if>>
			<span class="lblue">You press your thigh against <<his>> mouth, but <<he>> moves <<his>> head away from you.</span>
			<<set $NPCList[$thightarget].mouth to 0>><<set $thighuse to 0>><<set $NPCList[$thightarget].location.head to 0>>
		<</if>>
	<</if>>
<</if>>

<<if $thighaction is "othermouthstop">>
	<<set $thighaction to 0>><<set $thighactiondefault to "stop">><<set $thighuse to 0>>
	<<if $penisuse is 0 and (!$player.vaginaExist or $vaginause isnot 0 or random(0,100) gte 50)>>
		<<personselect $thightarget>><<set $NPCList[$thightarget].mouth to "penisentrance">><<set $penisstate to "othermouthentrance">><<set $penisuse to "othermouth">>
		<span class="blue">You stop pressing your thigh against <<his>> mouth.</span>
	<<elseif $vaginause is 0>>
		<<personselect $thightarget>><<set $NPCList[$thightarget].mouth to "vaginaentrance">><<set $vaginastate to "othermouthentrance">><<set $vaginause to "othermouth">>
		<span class="blue">You stop pressing your thigh against <<his>> mouth.</span>
	<<else>>
		<<personselect $thightarget>>
		<<if $NPCList[$thightarget].penis is "othermouth">>
			<<set $NPCList[$thightarget].penis to 0>>
		<</if>>
		<<if $NPCList[$thightarget].vagina is "othermouth">>
			<<set $NPCList[$thightarget].vagina to 0>>
		<</if>>
		<<set $NPCList[$thightarget].mouth to 0>><<set $NPCList[$thightarget].location.head to 0>>
		<span class="blue">You stop pressing your thigh against <<his>> mouth.</span>
	<</if>>
<</if>>

/***
*    ███████ ██████ ██   ██ ███████ ███████
*    ██   ██ ██     ███  ██   ███   ██
*    ███████ ██████ ██ █ ██   ███   ███████
*    ██      ██     ██  ███   ███        ██
*    ██      ██████ ██   ██ ███████ ███████
*
*/
<<if $newtarget isnot undefined>>
	<<setnewtarget>>
<</if>>

<<set $rng to random(1, 100)>>
<<effectspenistovagina>>
<<set $rng to random(1, 100)>>
<<effectspenisvaginafuck>>
<<set $rng to random(1, 100)>>
<<effectspenisanusfuck>>
<<set $rng to random(1, 100)>>
<<effectspenistoanus>>
<<set $rng to random(1, 100)>>
<<effectspenistopenisfuck>>
<<set $rng to random(1, 100)>>
<<effectspenistopenis>>


<<if $penisaction is "rest">>
	<<set $penisaction to 0>><<set $penisactiondefault to "rest">>
<</if>>

<<if $penisaction is "bay">>
	<<set $penisaction to 0>><<meek 1 $penistarget>><<penileskilluse>><<set $penisactiondefault to "bay">><<combatpromiscuity4>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $penileskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<set $penisactiondefault to "rub">>
		<<personselect $penistarget>>
		<span class="lblue">You <<peniletext>> press your penis against <<his>> clit.</span>
		<<set $NPCList[$penistarget].vagina to "frot">><<set $penisuse to "clit">><<sex 5 $penistarget>><<set $penisstate to "clit">>
	<<else>>
		You try to keep the vagina menacing your <<penis>> at bay by rubbing against the clit, but <<theowner>> has other ideas.
	<</if>>
<</if>>

<<set $rng to random(1, 100)>>
<<if $penisaction is "penisanusdouble">>
	<<set $penisaction to 0>><<meek 5 $penistarget>><<analskilluse>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $analskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<personselect $penistarget>><<set $penisactiondefault to "rest">>
		<span class="blue">You give your <<bottom>> a little wiggle, <<combatperson>> responds to the provocation and moves <<his>> penis to join the phallus in front of your butt.</span>
		<<submission 2 $penistarget>><<set $anususe to "penisdouble">><<set $NPCList[$penistarget].penis to "anusdoubleentrance">><<set $penisuse to 0>><<set $anusstate to "doubleentrance">><<set $penisstate to 0>>
		<<set $anusdoubletarget to $penistarget>>
		<<if $NPCList[$anustarget].penis is "anus">>
			<<set $NPCList[$anustarget].penis to "anusdouble">>
		<<elseif $NPCList[$anustarget].penis is "anusimminent">>
			<<set $NPCList[$anustarget].penis to "anusdoubleimminent">>
		<<elseif $NPCList[$anustarget].penis is "anusentrance">>
			<<set $NPCList[$anustarget].penis to "anusdoubleentrance">>
		<<elseif $NPCList[$anustarget].penis is "cheeks">>
			<<set $NPCList[$anustarget].penis to "anusentrance">>
			<<set $bottomuse to 0>> /* Issues with ass cheeks likely stem from this culprit right here */
		<</if>>
		<<set $NPCList[$anustarget].location.genitals to "genitals">>
	<<else>>
		You give your <<bottom>> a little wiggle, but you just receive a slap.
		<<violence 2>><<hitstat>><<bruise bottom>><<set $penisactiondefault to "penisanusdouble">>
	<</if>>
<</if>>

<<if $penisaction is "clitrub">><<set $penisaction to 0>><<set $penisactiondefault to "rub">><<penileskilluse>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $penileskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<set $penisactiondefault to "rub">><<sex 5 $penistarget>>
		<<actionsclitrub $penistarget>>
	<<else>>
		<<set $penisactiondefault to "bay">>
		<<set $penisuse to "othervagina">><<set $penisstate to "entrance">>
		<<personselect $penistarget>>
		<<set $NPCList[$penistarget].vagina to "penisentrance">>
		<span class="blue">You rub your <<penis>> against <<his>> clit, but <<he>> would prefer the main course and moves <<his>> labia closer to your tip.</span>
	<</if>>
<</if>>

<<if $penisaction is "stop">>
	<<set $penisaction to 0>><<set $penisactiondefault to "stop">>
	<<personselect $penistarget>>
	<<set $NPCList[$penistarget].vagina to "penisentrance">><<set $penisstate to "entrance">><<set $penisuse to "othervagina">>
	<span class="blue">You stop rubbing <<his>> clit with your <<penis>>.</span>
<</if>>

<<if $penisaction is "tease">>
	<<set $penisaction to 0>><<set $penisactiondefault to "tease">><<actionspussytease $penistarget>><<sex 5 $penistarget>><<penileskilluse>>
<</if>>

<<if $penisaction is "rub">>
	<<set $penisaction to 0>><<set $penisactiondefault to "rub">><<actionspussyrub $penistarget>><<sex 10 $penistarget>><<penileskilluse>>
<</if>>

<<if $penisaction is "cooperate">>
	<<set $penisaction to 0>><<set $penisactiondefault to "cooperate">><<actionspussythrust $penistarget>><<submission 20 $penistarget>><<penileskilluse>>
<</if>>

<<if $penisaction is "vaginaEdging">>
	<<set $penisaction to 0>><<set $penisactiondefault to "vaginaEdging">><<actionspussyedging $penistarget>><<submission 5 $penistarget>><<sexControl 5 $penileskill $penistarget>><<penileskilluse>><<combatpromiscuity4>>
<</if>>

<<if $penisaction is "take">>
	<<set $penisaction to 0>><<set $penisactiondefault to "take">><<actionspussytake $penistarget>>
<</if>>

<<if $penisaction is "escape">>
	<<set $penisaction to 0>><<set $penisactiondefault to "escape">><<actionspenisescape $penistarget>><<brat 10 $penistarget>><<set $penisuse to "othervagina">><<set $penisstate to "entrance">>
	<<personselect $penistarget>>
	<<set $NPCList[$penistarget].vagina to "penisentrance">><<set $NPCList[$penistarget].speechpenisescape to 1>>
<</if>>

<<if $penisaction is "fencingtease">>
	<<set $penisaction to 0>><<set $penisactiondefault to "fencingtease">><<actionsfencingtease $penistarget>><<sex 10 $penistarget>><<penileskilluse>>
<</if>>

<<if $penisaction is "fencingcooperate">>
	<<set $penisaction to 0>><<set $penisactiondefault to "fencingcooperate">><<actionsfencingcooperate $penistarget>><<submission 20 $penistarget>><<penileskilluse>>
<</if>>

<<if $penisaction is "fencingtake">>
	<<set $penisaction to 0>><<set $penisactiondefault to "fencingtake">><<actionsfencingtake $penistarget>>
<</if>>

<<if $penisaction is "fencingrest">>
	<<set $penisaction to 0>><<set $penisactiondefault to "rest">>
<</if>>

<<if $penisaction is "fencingescape">>
	<<set $penisaction to 0>><<set $penisactiondefault to "fencingescape">><<actionsfencingescape $penistarget>><<brat 10 $penistarget>>
	<<if $penisstate is "otherpenis">>
		<<set $penisstate to "otherpenisimminent">>
	<<else>>
		<<set $penisstate to "otherpenisentrance">>
	<</if>>
	<<if $NPCList[$penistarget].penis is "penis">>
		<<set $NPCList[$penistarget].penis to "penisimminent">>
	<<elseif $NPCList[$penistarget].penis is "penisimminent">>
		<<set $NPCList[$penistarget].penis to "penisentrance">>
	<</if>>
<</if>>

<<if $penisaction is "otherpenisrub">>
	<<set $penisaction to 0>><<set $penisactiondefault to "otherpenisrub">><<actionsotherpenispenisrub $penistarget>><<sex 10 $penistarget>><<penileskilluse>>
<</if>>

<<if $penisaction is "thighbay">>
	<<set $penisaction to 0>><<meek 1 $penistarget>><<thighskilluse>><<set $penisactiondefault to "thighbay">><<combatpromiscuity1>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $thighskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<set $thighactiondefault to "othermouthrub">>
		<<personselect $penistarget>>
		<span class="lblue">You <<thightext>> press your thigh against <<his>> mouth.</span>
		<<set $NPCList[$penistarget].mouth to "thigh">><<set $penisuse to 0>><<thighstat>><<neutral 5 $penistarget>><<set $penisstate to 0>><<set $thighuse to "mouth">>
	<<else>>
		You try to keep the mouth menacing your <<penis>> at bay by pressing your thigh against it, but <<theowner>> has other ideas.
	<</if>>
<</if>>

<<if $penisaction is "othermouthtease">>
	<<set $penisaction to 0>><<set $penisactiondefault to "othermouthtease">><<actionsothermouthpenistease $penistarget>><<sex 5 $penistarget>><<penileskilluse>>
<</if>>

<<if $penisaction is "othermouthrub">>
	<<set $penisaction to 0>><<set $penisactiondefault to "othermouthrub">><<actionsothermouthpenisrub $penistarget>><<sex 10 $penistarget>><<penileskilluse>>
<</if>>

<<if $penisaction is "othermouthcooperate">>
	<<set $penisaction to 0>><<set $penisactiondefault to "othermouthcooperate">><<actionsothermouthpenisthrust $penistarget>><<submission 20 $penistarget>><<penileskilluse>>
<</if>>

<<if $penisaction is "othermouthescape">>
	<<set $penisaction to 0>><<set $penisactiondefault to "othermouthescape">><<actionsothermouthpenisescape $penistarget>><<brat 10 $penistarget>>
	<<set $penisuse to "othermouth">><<set $penisstate to "othermouthentrance">>
	<<if $NPCList[$penistarget].mouth is "penisimminent">>
		<<set $NPCList[$penistarget].mouth to "penisentrance">>
	<</if>>
<</if>>

<<if $penisaction is "otheranusbay">>
	<<set $penisaction to 0>><<meek 1 $penistarget>><<penileskilluse>><<set $penisactiondefault to "otheranusbay">><<combatpromiscuity4>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $penileskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<set $penisactiondefault to "otheranusrub">><<personselect $penistarget>>
		<<if $NPCList[$penistarget].vagina is "otheranusentrance">>
			<span class="lblue">You <<peniletext>> point your <<penis>> away from <<his>> anus, rubbing between <<his>> cheeks.</span>
			<<set $NPCList[$penistarget].vagina to "otheranusfrot">><<set $penisuse to "otheranusrub">><<sex 5 $penistarget>><<set $penisstate to "otheranusrub">>
		<</if>>
		<<if $NPCList[$penistarget].penis is "otheranusentrance">>
			<span class="lblue">You <<peniletext>> point your <<penis>> away from <<his>> anus, rubbing between <<his>> cheeks.</span>
			<<set $NPCList[$penistarget].penis to "otheranusfrot">><<set $penisuse to "otheranusrub">><<sex 5 $penistarget>><<set $penisstate to "otheranusrub">>
		<</if>>
	<<else>>
		You try to move your <<penis>> away from the anus pressing against it, but <<theowner>> has other ideas.
	<</if>>
<</if>>

<<if $penisaction is "otheranusrub">>
	<<set $penisaction to 0>><<set $penisactiondefault to "otheranusrub">><<penileskilluse>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $penileskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<set $penisactiondefault to "otheranusrub">><<sex 5 $penistarget>>
		<<actionsotheranusrub $penistarget>>
	<<else>>
		<<set $penisactiondefault to "otheranusbay">>
		<<set $penisuse to "otheranus">><<set $penisstate to "otheranusentrance">>
		<<personselect $penistarget>>
		<<if $NPCList[$penistarget].vagina is "otheranusfrot">>
			<<set $NPCList[$penistarget].vagina to "otheranusentrance">>
			<span class="blue">You rub your penis between <<his>> cheeks, but <<he>> would prefer the main course and presses <<his>> anus against your tip.</span>
		<</if>>
		<<if $NPCList[$penistarget].penis is "otheranusfrot">>
			<<set $NPCList[$penistarget].penis to "otheranusentrance">>
			<span class="blue">You rub your penis between <<his>> cheeks, but <<he>> would prefer the main course and presses <<his>> anus against your tip.</span>
		<</if>>
	<</if>>
<</if>>

<<if $penisaction is "otheranusstop">>
	<<set $penisaction to 0>><<set $penisactiondefault to "stop">>
	<<personselect $penistarget>>
	<<if $NPCList[$penistarget].vagina is "otheranusfrot">>
		<<set $NPCList[$penistarget].vagina to "otheranusentrance">><<set $penisstate to "otheranusentrance">><<set $penisuse to "otheranus">>
		<span class="blue">You stop rubbing your <<penis>> between <<his>> cheeks.</span>
	<</if>>
	<<if $NPCList[$penistarget].penis is "otheranusfrot">>
		<<set $NPCList[$penistarget].penis to "otheranusentrance">><<set $penisstate to "otheranusentrance">><<set $penisuse to "otheranus">>
		<span class="blue">You stop rubbing your <<penis>> between <<his>> cheeks.</span>
	<</if>>
<</if>>

<<if $penisaction is "otheranustease">>
	<<set $penisaction to 0>><<set $penisactiondefault to "otheranustease">><<actionsotheranustease $penistarget>><<sex 5 $penistarget>><<penileskilluse>>
<</if>>

<<if $penisaction is "otheranuscooperate">>
	<<set $penisaction to 0>><<set $penisactiondefault to "otheranuscooperate">><<actionsotheranusthrust $penistarget>><<submission 20 $penistarget>><<penileskilluse>>
<</if>>

<<if $penisaction is "otheranusEdging">>
	<<set $penisaction to 0>><<set $penisactiondefault to "otheranusEdging">><<actionsotheranusedging $penistarget>><<submission 5 $penistarget>><<sexControl 5 $penileskill $penistarget>><<penileskilluse>><<combatpromiscuity4>>
<</if>>

<<if $penisaction is "otheranustake">>
	<<set $penisaction to 0>><<set $penisactiondefault to "otheranustake">><<actionsotheranustake $penistarget>>
<</if>>

<<if $penisaction is "otheranusescape">>
	<<set $penisaction to 0>><<set $penisactiondefault to "otheranusescape">><<actionsotheranusescape>><<brat 10 $penistarget>>
	<<set $penisuse to "otheranus">><<set $penisstate to "otheranusentrance">>
	<<if $NPCList[$penistarget].vagina is "otheranusimminent">>
		<<set $NPCList[$penistarget].vagina to "otheranusentrance">><<print '<<set $speechotheranusescape'+ ($penistarget + 1) +' to 1>>'>>
	<</if>>
	<<if $NPCList[$penistarget].penis is "otheranusimminent">>
		<<set $NPCList[$penistarget].penis to "otheranusentrance">><<print '<<set $speechotheranusescape'+ ($penistarget + 1) +' to 1>>'>>
	<</if>>
<</if>>

<<if $penisaction is "penisthighs">>
	<<set $penisaction to 0>><<meek 1 $penistarget>><<thighskilluse>><<set $penisactiondefault to "penisthighs">><<combatpromiscuity4>>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $thighskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<set $thighactiondefault to "rub">>
		<<personselect $penistarget>>
		<span class="lblue">You <<thightext>> grab <<his>> $NPCList[$penistarget].penisdesc between your thighs.</span>
		<<set $NPCList[$penistarget].penis to "thighs">><<set $thightarget to $penistarget>>
		<<set $penisuse to 0>><<set $thighuse to "penis">><<thighstat>><<sex 5 $penistarget>><<set $penisstate to 0>>
	<<else>>
		You try to hold <<hisselect $penistarget>> penis between your thighs, but <<he>> is intent on your cock.
	<</if>>
<</if>>

<<if $penisaction is "penisanus">>
	<<set $penisaction to 0>><<meek 5 $penistarget>><<analskilluse>><<set $penisactiondefault to "penisanus">>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $analskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<personselect $penistarget>><<set $anustarget to $penistarget>>
		<span class="blue">You give your <<bottom>> a little wiggle, <<combatperson>> responds to the provocation and moves <<his>> <<npcPenis $penistarget>> in front of your butt.</span>
		<<if $NPCList[$penistarget].type is "plant" and $NPCList[$penistarget].penissize gte 4>>
			<span class="red">Something about it scares you.</span>
		<</if>>
		<<submission 2>><<set $anususe to "penis">><<set $NPCList[$penistarget].penis to "anusentrance">><<set $penisuse to 0>><<set $anusstate to "entrance">><<set $penisstate to 0>>
	<<else>>
		You give your <<bottom>> a little wiggle, but you just receive a slap.
		<<violence 2 $penistarget>><<hitstat>><<bruise bottom>>
	<</if>>
<</if>>

/***
*     ██████ ██   ██ ███████ ███████ ███████
*    ██      ██   ██ ██      ██        ███
*    ██      ███████ ███████ ███████   ███
*    ██      ██   ██ ██           ██   ███
*     ██████ ██   ██ ███████ ███████   ███
*
*/
<<if $newtarget isnot undefined>>
	<<setnewtarget>>
<</if>>

<<if $chestaction is "rub">>
	<<set $chestaction to 0>><<set $chestactiondefault to "rub">>
	<<if (1000 - ($rng * 10) - ($enemytrust * 10) - $chestskill + $enemyanger) lte (($enemyarousalmax / ($enemyarousal + 1)) * 100)>>
		<<if $breastsize is 0>>
			You <<chesttext>> rub your <<breasts>> against <<his>> penis.
		<<else>>
			You <<chesttext>> rub <<his>> penis between your <<breasts>>.
		<</if>>
		<<submission 3 $chesttarget>><<chestskilluse>><<cheststat>>
	<<else>>
		<<set $chestuse to 0>><<personselect $chesttarget>>
		<<if $mouthuse is 0>>
			<<set $mouthactiondefault to "grasp">><<set $mouthstate to "entrance">><<set $mouthuse to "penis">>
			<<set $NPCList[$chesttarget].penis to "mouthentrance">>
			<span class="purple">You try to rub your <<breasts>> against <<his>> $NPCList[$chesttarget].penisdesc, but <<he>> moves <<his>> penis to your mouth.</span>
		<<else>>
			<<set $NPCList[$chesttarget].penis to 0>>
			<span class="blue">You try to rub your <<breasts>> against <<his>> penis, but <<he>> pulls away.</span>
		<</if>>
	<</if>>
<</if>>

<<if $chestaction is "stop">>
	<<set $chestuse to 0>><<set $chestaction to 0>><<personselect $chesttarget>>
	<<if $mouthuse is 0>>
		<<set $mouthactiondefault to "grasp">><<set $mouthstate to "entrance">><<set $mouthuse to "penis">>
		<<set $NPCList[$chesttarget].penis to "mouthentrance">>
		<span class="purple">As you stop rubbing <<he>> moves <<his>> penis to your mouth.</span>
	<<else>>
		<<set $NPCList[$chesttarget].penis to 0>>
		<span class="blue">As you stop rubbing <<he>> pulls away.</span>
	<</if>>
<</if>>

<<set $NPCList[0].intro to 0>>
<<set $NPCList[1].intro to 0>>
<<set $NPCList[2].intro to 0>>
<<set $NPCList[3].intro to 0>>
<<set $NPCList[4].intro to 0>>
<<set $NPCList[5].intro to 0>>

<<combat_lewdity_text>>

</div>
<</widget>>

<<widget "wheeze">>
	<<set _action to $args[0] or "say something">>
	<<switch $args[1]>>
		<<case 1>>
			You try to _action, <span class="purple">but only a wheeze comes out because you are already being choked.</span>
		<<case 2>>
			You try to _action, <span class="lewd">but only a lewd moan comes out because the hand around your throat prevents you from talking.</span>
		<<default>>
			You try to _action, <span class="red">but only a choked wheeze comes out because of the hand squeezing your throat.</span><<gwillpower>><<willpower 1>>
			<<set $speechwheeze to 1>>
	<</switch>>
<</widget>>
